{
    "title": "GEOLYTIX | XYZ Mitchells & Butlers",
    "documentation": "https://mbplc.sharepoint.com/sites/connect/SitePages/Acquisitions.aspx",
    "locales": {
        "UK": {
            "name": "United Kingdom",
            "locate": {},
            "gazetteer": {
                "datasets": [
                    {
                        "layer": "pubs",
                        "table": "mb.house_list",
                        "label": "buncode_str"
                    },
                    {
                        "layer": "pubs",
                        "table": "mb.house_list",
                        "label": "short_name"
                    }
                ],
                "provider": "GOOGLE",
                "placeholder": "e.g. London",
                "code": "GB"
            },
            "view": {
                "lat": 53.3,
                "lng": -3.9,
                "z": 5
            },
            "showScaleBar": true,
            "bounds": {
                "north": 48,
                "east": -13,
                "south": 62,
                "west": 5
            },
            "minZoom": 5,
            "maxZoom": 17,
            "layers": {
                "Mapbox Baselayer": {
                    "group": "Base Maps",
                    "attribution": {
                        "© Mapbox": "https://www.mapbox.com/about/maps"
                    },
                    "format": "tiles",
                    "URI": "https://api.mapbox.com/styles/v1/dbauszus/ciozrimi3002bdsm8bjtn2v1y/tiles/256/{z}/{x}/{y}?&provider=MAPBOX"
                },
                "Mapbox Color": {
                    "display": true,
                    "group": "Base Maps",
                    "attribution": {
                        "© Mapbox": "https://www.mapbox.com/about/maps"
                    },
                    "format": "tiles",
                    "URI": "https://api.mapbox.com/styles/v1/horns/cjig1sv8t0cjc2qocht27ij5y/tiles/256/{z}/{x}/{y}?&provider=MAPBOX"
                },
                "HERE Imagery": {
                    "group": "Base Maps",
                    "attribution": {
                        "Here": "https://www.here.com/"
                    },
                    "format": "tiles",
                    "URI": "https://1.aerial.maps.api.here.com/maptile/2.1/maptile/newest/satellite.day/{z}/{x}/{y}/256/png8?&provider=HERE"
                },
                "Mapbox Labels": {
                    "group": "Base Maps",
                    "display": false,
                    "attribution": {
                        "© Mapbox": "https://www.mapbox.com/about/maps"
                    },
                    "format": "tiles",
                    "URI": "https://api.mapbox.com/styles/v1/dbauszus/cj9puo8pr5o0c2sovhdwhkc7z/tiles/256/{z}/{x}/{y}?&provider=MAPBOX"
                },
                "F&B Hubs": {
                    "group": "Retail Places",
                    "format": "mvt",
                    "geom": "geom_3857",
                    "srid": "3857",
                    "dbs": "MB",
                    "properties": "hubname",
                    "qID": "id",
                    "mvt_cache": "xyz.x_mvts_uk_glx_geodata_fb_hubs",
                    "tables": {
                        "11": null,
                        "12": "geodata.uk_glx_geodata_fb_hubs"
                    },
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "field": "hubname",
                            "label": "Name",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "nightclubs",
                            "label": "Nightclubs",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "eating",
                            "label": "Eating",
                            "type": "integer"
                        },
                        {
                            "field": "drinking",
                            "label": "Drinking",
                            "type": "integer"
                        },
                        {
                            "field": "total_pcr",
                            "label": "Total - Pubs, Clubs & Restaurants",
                            "type": "integer"
                        },
                        {
                            "field": "pc_branded",
                            "fieldfx": "pc_branded*100",
                            "label": "Branded %",
                            "type": "numeric"
                        },
                        {
                            "field": "pc_hub_pcr",
                            "fieldfx": "pc_hub_pcr*100",
                            "label": "% of Pubs, Clubs & Restaurants",
                            "type": "numeric"
                        },
                        {
                            "field": "dens_score",
                            "label": "Density Score",
                            "type": "numeric"
                        }
                    ],
                    "style": {
                        "default": {
                            "strokeWidth": 1,
                            "strokeColor": "#00b386",
                            "fillColor": "#00b386",
                            "fillOpacity": 0.6
                        },
                        "highlight": {
                            "strokeColor": "#e91e63",
                            "fillColor": "#e91e63",
                            "fillOpacity": 0.3
                        }
                    }
                },
                "Retail Places": {
                    "group": "Retail Places",
                    "meta": "Polygon representing a Retail Place.",
                    "format": "mvt",
                    "geom": "geom_3857",
                    "srid": "3857",
                    "dbs": "MB",
                    "properties": "rp_type",
                    "qID": "id",
                    "mvt_cache": "xyz.x_mvts_uk_glx_geodata_retail_place",
                    "tables": {
                        "11": null,
                        "12": "geodata.uk_glx_geodata_retail_place"
                    },
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "field": "rp_name",
                            "label": "Name",
                            "type": "text"
                        },
                        {
                            "field": "rp_type",
                            "label": "Type",
                            "type": "text"
                        },
                        {
                            "field": "comp_strgh",
                            "label": "Competition Strength",
                            "type": "integer",
                            "level": 1
                        },
                        {
                            "field": "est_units",
                            "label": "Estimate Units",
                            "type": "integer",
                            "level": 1
                        },
                        {
                            "field": "est_brands",
                            "label": "Estimate Brands",
                            "type": "integer",
                            "level": 1
                        },
                        {
                            "field": "classbrass",
                            "label": "Class|Brass",
                            "type": "numeric",
                            "level": 1
                        },
                        {
                            "label": "Retail Composition",
                            "type": "group",
                            "chart": {
                                "x": "label x",
                                "y": "label y",
                                "type": "doughnut",
                                "backgroundColor": [
                                    "#ffb300",
                                    "#d81b60",
                                    "#8e24aa",
                                    "#5e35b1",
                                    "#3949ab",
                                    "#1e88e5",
                                    "#039be5",
                                    "#00acc1",
                                    "#00897b"
                                ],
                                "borderColor": [
                                    "#ffb300",
                                    "#d81b60",
                                    "#8e24aa",
                                    "#5e35b1",
                                    "#3949ab",
                                    "#1e88e5",
                                    "#039be5",
                                    "#00acc1",
                                    "#00897b"
                                ]
                            }
                        },
                        {
                            "field": "comp_pct",
                            "group": "Retail Composition",
                            "label": "Comparison",
                            "type": "integer"
                        },
                        {
                            "field": "fbl_pct",
                            "group": "Retail Composition",
                            "label": "Food, Beverage, Leisure",
                            "type": "integer"
                        },
                        {
                            "field": "conv_pct",
                            "group": "Retail Composition",
                            "label": "Convenience",
                            "type": "integer"
                        },
                        {
                            "field": "serv_pct",
                            "group": "Retail Composition",
                            "label": "Services",
                            "type": "integer"
                        }
                    ],
                    "style": {
                        "default": {
                            "strokeWidth": 1,
                            "strokeColor": "#000",
                            "fill": true,
                            "fillColor": "#000",
                            "fillOpacity": 0.3
                        },
                        "highlight": {
                            "strokeColor": "#e91e63",
                            "fill": true,
                            "fillOpacity": 0.3
                        },
                        "themes": {
                            "Retail Place Type": {
                                "type": "categorized",
                                "field": "rp_type",
                                "other": true,
                                "cat": {
                                    "City Centre": {
                                        "style": {
                                            "strokeColor": "#6e016b",
                                            "fillColor": "#6e016b"
                                        }
                                    },
                                    "Town Centre": {
                                        "style": {
                                            "strokeColor": "#88419d",
                                            "fillColor": "#88419d"
                                        }
                                    },
                                    "Urban Centre": {
                                        "style": {
                                            "strokeColor": "#8c6bb1",
                                            "fillColor": "#8c6bb1"
                                        }
                                    },
                                    "Village Centre": {
                                        "style": {
                                            "strokeColor": "#8c96c6",
                                            "fillColor": "#8c96c6"
                                        }
                                    },
                                    "Parade": {
                                        "style": {
                                            "strokeColor": "#9ebcda",
                                            "fillColor": "#9ebcda"
                                        }
                                    },
                                    "Shopping Centre": {
                                        "style": {
                                            "strokeColor": "#016450",
                                            "fillColor": "#016450"
                                        }
                                    },
                                    "Leisure Park": {
                                        "style": {
                                            "strokeColor": "#02818a",
                                            "fillColor": "#02818a"
                                        }
                                    },
                                    "Outlet Centre": {
                                        "style": {
                                            "strokeColor": "#3690c0",
                                            "fillColor": "#3690c0"
                                        }
                                    },
                                    "Retail Park": {
                                        "style": {
                                            "strokeColor": "#67a9cf",
                                            "fillColor": "#67a9cf"
                                        }
                                    },
                                    "Trade Park": {
                                        "style": {
                                            "strokeColor": "#a6bddb",
                                            "fillColor": "#a6bddb"
                                        }
                                    },
                                    "Airport": {
                                        "style": {
                                            "strokeColor": "#8c2d04",
                                            "fillColor": "#8c2d04"
                                        }
                                    },
                                    "Service Area": {
                                        "style": {
                                            "strokeColor": "#f16913",
                                            "fillColor": "#f16913"
                                        }
                                    },
                                    "Rail Station": {
                                        "style": {
                                            "strokeColor": "#fdae6b",
                                            "fillColor": "#fdae6b"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "Retail Place Shopping Centre": {
                    "group": "Retail Places",
                    "meta": "Polygons of all shopping centres within the UK.",
                    "format": "mvt",
                    "geom": "geom_3857",
                    "srid": "3857",
                    "dbs": "MB",
                    "qID": "id",
                    "mvt_cache": "xyz.x_mvts_uk_glx_geodata_retail_place_shopcent",
                    "tables": {
                        "12": null,
                        "13": "geodata.uk_glx_geodata_retail_place_shopcent"
                    },
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "field": "rp_id",
                            "label": "Retail place ID",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "sc_name",
                            "label": "Shopping centre name",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "rp_name",
                            "label": "Retail place name",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "rp_type",
                            "label": "Retail place type",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "unit_count",
                            "label": "Unit count",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "sc_type",
                            "label": "Shopping centre type",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "area_curt",
                            "label": "Area",
                            "type": "integer",
                            "inline": true
                        }
                    ],
                    "style": {
                        "default": {
                            "strokeWidth": 1,
                            "strokeColor": "#444",
                            "fill": true,
                            "fillColor": "#444",
                            "fillOpacity": 0.3
                        },
                        "highlight": {
                            "strokeColor": "#e91e63",
                            "fill": true,
                            "fillOpacity": 0.3
                        },
                        "themes": {
                            "Retail Place Type": {
                                "type": "categorized",
                                "field": "rp_type",
                                "other": true,
                                "cat": {
                                    "Major City Centre": {
                                        "label": "Major City Centre",
                                        "style": {
                                            "strokeColor": "#EF271B",
                                            "fillColor": "#EF271B"
                                        }
                                    },
                                    "City Centre": {
                                        "label": "City Centre",
                                        "style": {
                                            "strokeColor": "#BA2D0B",
                                            "fillColor": "#BA2D0B"
                                        }
                                    },
                                    "Large Town Centre": {
                                        "label": "Large Town Centre",
                                        "style": {
                                            "strokeColor": "#FE4E00",
                                            "fillColor": "#FE4E00"
                                        }
                                    },
                                    "Major Urban Centre": {
                                        "label": "Major Urban Centre",
                                        "style": {
                                            "strokeColor": "#E2711D",
                                            "fillColor": "#E2711D"
                                        }
                                    },
                                    "Town Centre": {
                                        "label": "Town Centre",
                                        "style": {
                                            "strokeColor": "#F3A712",
                                            "fillColor": "#F3A712"
                                        }
                                    },
                                    "Urban Centre": {
                                        "label": "Urban Centre",
                                        "style": {
                                            "strokeColor": "#FADF63",
                                            "fillColor": "#FADF63"
                                        }
                                    },
                                    "Small Town Centre": {
                                        "label": "Small Town Centre",
                                        "style": {
                                            "strokeColor": "#FFE74C",
                                            "fillColor": "#FFE74C"
                                        }
                                    },
                                    "Village Centre": {
                                        "label": "Village Centre",
                                        "style": {
                                            "strokeColor": "#DBFE87",
                                            "fillColor": "#DBFE87"
                                        }
                                    },
                                    "Regional SC": {
                                        "label": "Regional Shopping Centre",
                                        "style": {
                                            "strokeColor": "#8ED081",
                                            "fillColor": "#8ED081"
                                        }
                                    },
                                    "Outlet Centre": {
                                        "label": "Outlet Centre",
                                        "style": {
                                            "strokeColor": "#7DDF64",
                                            "fillColor": "#7DDF64"
                                        }
                                    },
                                    "Shopping Park": {
                                        "label": "Shopping Park",
                                        "style": {
                                            "strokeColor": "#074F57",
                                            "fillColor": "#074F57"
                                        }
                                    },
                                    "Retail Park": {
                                        "label": "Retail Park",
                                        "style": {
                                            "strokeColor": "#32746D",
                                            "fillColor": "#32746D"
                                        }
                                    },
                                    "Leisure Park": {
                                        "label": "Leisure Park",
                                        "style": {
                                            "strokeColor": "#41D3BD",
                                            "fillColor": "#41D3BD"
                                        }
                                    },
                                    "Local Hub": {
                                        "label": "Local Hub",
                                        "style": {
                                            "strokeColor": "#08B2E3",
                                            "fillColor": "#08B2E3"
                                        }
                                    },
                                    "Large Parade": {
                                        "label": "Large Parades",
                                        "style": {
                                            "strokeColor": "#1F487E",
                                            "fillColor": "#1F487E"
                                        }
                                    },
                                    "Parade": {
                                        "label": "Parade",
                                        "style": {
                                            "strokeColor": "#541388",
                                            "fillColor": "#541388"
                                        }
                                    },
                                    "Weak Parade": {
                                        "label": "Weak Parade",
                                        "style": {
                                            "strokeColor": "#D90368",
                                            "fillColor": "#D90368"
                                        }
                                    }
                                }
                            },
                            "Shopping Centre Type": {
                                "label": "Shopping Centre type",
                                "field": "sc_type",
                                "type": "categorized",
                                "other": true,
                                "cat": {
                                    "Arcades/Buildings": {
                                        "label": "Arcades/Buildings",
                                        "style": {
                                            "strokeColor": "#D90368",
                                            "fillColor": "#D90368"
                                        }
                                    },
                                    "Aspirational Brand": {
                                        "label": "Aspirational Brand",
                                        "style": {
                                            "strokeColor": "#541388",
                                            "fillColor": "#541388"
                                        }
                                    },
                                    "City Centre Monsters": {
                                        "label": "City Centre Monsters",
                                        "style": {
                                            "strokeColor": "#1F487E",
                                            "fillColor": "#1F487E"
                                        }
                                    },
                                    "Large Classics": {
                                        "label": "Large Classics",
                                        "style": {
                                            "strokeColor": "#08B2E3",
                                            "fillColor": "#08B2E3"
                                        }
                                    },
                                    "New Town Centres": {
                                        "label": "New Town Centres",
                                        "style": {
                                            "strokeColor": "#32746D",
                                            "fillColor": "#32746D"
                                        }
                                    },
                                    "Outlet Centres": {
                                        "label": "Outlet Centres",
                                        "style": {
                                            "strokeColor": "#074F57",
                                            "fillColor": "#074F57"
                                        }
                                    },
                                    "Planned Urban Centre": {
                                        "label": "Planned Urban Centre",
                                        "style": {
                                            "strokeColor": "#7DDF64",
                                            "fillColor": "#7DDF64"
                                        }
                                    },
                                    "Regional Mall": {
                                        "label": "Regional Mall",
                                        "style": {
                                            "strokeColor": "#8ED081",
                                            "fillColor": "#8ED081"
                                        }
                                    },
                                    "Small Classic": {
                                        "label": "Small Classic",
                                        "style": {
                                            "strokeColor": "#DBFE87",
                                            "fillColor": "#DBFE87"
                                        }
                                    },
                                    "Small Classics": {
                                        "label": "Small Classics",
                                        "style": {
                                            "strokeColor": "#FFE74C",
                                            "fillColor": "#FFE74C"
                                        }
                                    },
                                    "Standalone Shopping": {
                                        "label": "Standalone Shopping",
                                        "style": {
                                            "strokeColor": "#FADF63",
                                            "fillColor": "#FADF63"
                                        }
                                    },
                                    "Urban Entertainment Centre": {
                                        "label": "Urban Entertainment Centre",
                                        "style": {
                                            "strokeColor": "#E2711D",
                                            "fillColor": "#E2711D"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "Retail Place Pitch": {
                    "group": "Retail Places",
                    "meta": "Comparitive strength within Retail Place area. Hex grid created using Retail Place to determine ranking of each cell within the centre.",
                    "format": "mvt",
                    "dbs": "MB",
                    "qID": "id",
                    "geom": "geom_3857",
                    "srid": "3857",
                    "mvt_cache": "xyz.x_mvts_uk_glx_geodata_retail_place_pitch",
                    "tables": {
                        "15": null,
                        "16": "geodata.uk_glx_geodata_retail_place_pitch"
                    },
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "field": "rp_id",
                            "label": "ID",
                            "type": "text",
                            "inline": true
                        }
                    ],
                    "style": {
                        "default": {
                            "stroke": false,
                            "fill": true,
                            "fillColor": "#000",
                            "fillOpacity": 0.3
                        },
                        "themes": {
                            "Retail pitch rank": {
                                "type": "categorized",
                                "field": "pitch_dec",
                                "label": "Retail pitch rank",
                                "cat": {
                                    "1": {
                                        "style": {
                                            "fillColor": "#ca0020"
                                        }
                                    },
                                    "2": {
                                        "style": {
                                            "fillColor": "#dd494b"
                                        }
                                    },
                                    "3": {
                                        "style": {
                                            "fillColor": "#f09377"
                                        }
                                    },
                                    "4": {
                                        "style": {
                                            "fillColor": "#f5c1a9"
                                        }
                                    },
                                    "5": {
                                        "style": {
                                            "fillColor": "#f7e5dd"
                                        }
                                    },
                                    "6": {
                                        "style": {
                                            "fillColor": "#e1ecf2"
                                        }
                                    },
                                    "7": {
                                        "style": {
                                            "fillColor": "#b4d6e7"
                                        }
                                    },
                                    "8": {
                                        "style": {
                                            "fillColor": "#82bcd9"
                                        }
                                    },
                                    "9": {
                                        "style": {
                                            "fillColor": "#4396c5"
                                        }
                                    },
                                    "10": {
                                        "style": {
                                            "fillColor": "#0571b0"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "Rail Stations": {
                    "group": "Public Transport",
                    "meta": "The stations that service underground lines, are part of the National Rail network or the Northern Ireland rail stations and support thirteen light rail systems within the United Kingdom.",
                    "format": "cluster",
                    "dbs": "MB",
                    "table": "geodata.uk_glx_geodata_custom_transport_station",
                    "geom": "geom_4326",
                    "srid": "4326",
                    "cluster_label": "stat_name",
                    "qID": "id",
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "field": "atco_code",
                            "label": "ATCO Code",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "stat_type",
                            "label": "Type",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "stat_name",
                            "label": "Station name",
                            "type": "text"
                        },
                        {
                            "field": "network",
                            "label": "Network",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "line",
                            "label": "Lines",
                            "type": "text"
                        },
                        {
                            "field": "glx_town",
                            "label": "Town",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "country",
                            "label": "Country",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "type": "streetview"
                        }
                    ],
                    "style": {
                        "marker": {
                            "type": "target",
                            "fillColor": "#777",
                            "layers": {
                                "0.75": "#EEE",
                                "0.50": "#777"
                            }
                        },
                        "markerMulti": {
                            "type": "target",
                            "fillColor": "#777"
                        },
                        "themes": {
                            "Rail Type": {
                                "label": "Rail type",
                                "field": "stat_type",
                                "type": "categorized",
                                "other": true,
                                "cat": {
                                    "Light Rail Station": {
                                        "label": "Light Rail",
                                        "style": {
                                            "fillColor": "#00afad",
                                            "layers": {
                                                "0.75": "#ffffff",
                                                "0.50": "#00afad"
                                            }
                                        }
                                    },
                                    "Rail Station": {
                                        "label": "Rail",
                                        "style": {
                                            "fillColor": "#0019a8",
                                            "layers": {
                                                "0.75": "#ffffff",
                                                "0.50": "#0019a8"
                                            }
                                        }
                                    },
                                    "Underground Station": {
                                        "label": "Underground",
                                        "style": {
                                            "fillColor": "#0019A8",
                                            "layers": {
                                                "0.75": "#ffffff",
                                                "0.50": "#DC241F"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "Railways": {
                    "group": "Public Transport",
                    "meta": "The rail and light rail systems within the United Kingdom.",
                    "format": "mvt",
                    "dbs": "MB",
                    "qID": "id",
                    "geom": "geom_3857",
                    "srid": "3857",
                    "tables": {
                        "7": null,
                        "8": "geodata.uk_glx_geodata_custom_transport_line"
                    },
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "field": "line_name",
                            "label": "Name"
                        },
                        {
                            "field": "line_type",
                            "label": "Type",
                            "inline": true
                        },
                        {
                            "field": "track_type",
                            "label": "Track Type",
                            "inline": true
                        }
                    ],
                    "style": {
                        "default": {
                            "strokeWidth": 2,
                            "strokeColor": "#3C7A89",
                            "opacity": 1,
                            "fill": true,
                            "fillColor": "#3C7A89",
                            "fillOpacity": 0.3
                        },
                        "highlight": {
                            "strokeWidth": 1,
                            "strokeColor": "#3C7A89",
                            "fill": true
                        },
                        "themes": {
                            "Rail Type": {
                                "field": "line_type",
                                "label": "Rail type",
                                "type": "categorized",
                                "other": true,
                                "cat": {
                                    "Rail Line": {
                                        "label": "Rail",
                                        "style": {
                                            "strokeColor": "#129490",
                                            "fillColor": "#129490"
                                        }
                                    },
                                    "Light Rail Line": {
                                        "label": "Light Rail",
                                        "style": {
                                            "strokeColor": "#C1B098",
                                            "fillColor": "#C1B098"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "Seamless towns and suburbs": {
                    "group": "Towns",
                    "meta": "Seamless boundaries for towns and suburbs in the UK.",
                    "format": "mvt",
                    "mvt_cache": "xyz.x_mvts_uk_glx_geodata_seamless_town",
                    "geom": "geom_3857",
                    "srid": "3857",
                    "dbs": "MB",
                    "qID": "id",
                    "tables": {
                        "8": null,
                        "9": "geodata.uk_glx_geodata_seamless_town",
                        "10": "geodata.uk_glx_geodata_seamless_town",
                        "11": "geodata.uk_glx_geodata_seamless_town",
                        "12": "geodata.uk_glx_geodata_seamless_town",
                        "13": "geodata.uk_glx_geodata_seamless_town",
                        "14": null
                    },
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "field": "town_name",
                            "label": "Town name",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "shop_town",
                            "label": "Shop town",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "pop",
                            "label": "Population",
                            "type": "numeric",
                            "inline": true
                        },
                        {
                            "field": "figures",
                            "label": "Population year",
                            "type": "text",
                            "inline": true
                        }
                    ],
                    "style": {
                        "default": {
                            "strokeWidth": 1,
                            "strokeColor": "#4F7CAC",
                            "fillColor": "#ffffff",
                            "fillOpacity": 0.1
                        },
                        "highlight": {
                            "strokeColor": "#4F7CAC",
                            "strokeWidth": 3
                        }
                    }
                },
                "Shopper town": {
                    "group": "Towns",
                    "meta": "585 seamless shopper towns which are created by using true town centres.",
                    "format": "mvt",
                    "dbs": "MB",
                    "qID": "id",
                    "geom": "geom_3857",
                    "srid": "3857",
                    "mvt_cache": "xyz.x_mvts_uk_glx_geodata_seamless_shopper_town",
                    "tables": {
                        "10": "geodata.uk_glx_geodata_seamless_shopper_town"
                    },
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "field": "id",
                            "label": "Shopper Town ID",
                            "inline": true
                        },
                        {
                            "field": "shop_town",
                            "label": "Shop town",
                            "inline": true
                        },
                        {
                            "field": "pop",
                            "label": "Population",
                            "type": "numeric",
                            "inline": true
                        },
                        {
                            "field": "figures",
                            "label": "Population year",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "dom_rpid",
                            "label": "RP ID",
                            "inline": true
                        }
                    ],
                    "style": {
                        "default": {
                            "strokeWidth": 2,
                            "strokeColor": "#d84315",
                            "fillColor": "#ffffff",
                            "fillOpacity": 0.1
                        },
                        "highlight": {
                            "strokeColor": "#d84315",
                            "fillOpacity": 0.4,
                            "strokeWidth": 4
                        }
                    }
                },
                "Acorn Output Area": {
                    "format": "mvt",
                    "dbs": "MB",
                    "qID": "id",
                    "geom": "geom_3857",
                    "srid": "3857",
                    "mvt_cache": "xyz.x_mvts_uk_oa_acorn",
                    "tables": {
                        "13": null,
                        "14": "mb.output_area"
                    },
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "field": "id",
                            "label": "ID",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "acorn_cat_desc",
                            "label": "Category",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "acorn_group_desc",
                            "label": "Group",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_1",
                            "label": "Exclusive enclaves",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_2",
                            "label": "Metropolitan money",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_3",
                            "label": "Large house luxury",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_4",
                            "label": "Asset rich families",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_5",
                            "label": "Wealthy countryside commuters",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_6",
                            "label": "Financially comfortable families",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_7",
                            "label": "Affluent professionals",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_8",
                            "label": "Prosperous suburban families",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_9",
                            "label": "Well-off edge of towners",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_10",
                            "label": "Better-off villagers",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_11",
                            "label": "Settled suburbia",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_12",
                            "label": "Retired and empty nesters",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_13",
                            "label": "Upmarket downsizers",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_14",
                            "label": "Townhouse cosmopolitans",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_15",
                            "label": "Younger professionals in smaller flats",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_16",
                            "label": "Metropolitan professionals",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_17",
                            "label": "Socialising young renters",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_18",
                            "label": "Career driven young families",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_19",
                            "label": "First time buyers in small",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_20",
                            "label": "Mixed metropolitan areas",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_21",
                            "label": "Farms and cottages",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_22",
                            "label": "Larger families in rural areas",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_23",
                            "label": "Owner occupiers in small towns and villages",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_24",
                            "label": "Comfortably-off families in modern housing",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_25",
                            "label": "Larger family homes",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_26",
                            "label": "Semi-professional families",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_27",
                            "label": "Suburban semis",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_28",
                            "label": "Owner occupied terraces",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_29",
                            "label": "Established suburbs",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_30",
                            "label": "Older people",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_31",
                            "label": "Elderly singles in purpose-built accommodation",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_32",
                            "label": "Educated families in terraces",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_33",
                            "label": "Smaller houses and starter homes",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_34",
                            "label": "Student flats and halls of residence",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_35",
                            "label": "Term-time terraces",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_36",
                            "label": "Educated young people in flats and tenements",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_37",
                            "label": "Low cost flats in suburban areas",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_38",
                            "label": "Semi-skilled workers in traditional neighbourhoods",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_39",
                            "label": "Fading owner occupied terraces",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_40",
                            "label": "High occupancy terraces",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_41",
                            "label": "Labouring semi-rural estates",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_42",
                            "label": "Struggling young families in post-war terraces",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_43",
                            "label": "Families in right-to-buy estates",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_44",
                            "label": "Post-war estates",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_45",
                            "label": "Pensioners in social housing",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_46",
                            "label": "Elderly people in social rented flats",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_47",
                            "label": "Low income older people in smaller semis",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_48",
                            "label": "Pensioners and singles in social rented flats",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_49",
                            "label": "Young families in low cost private flats",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_50",
                            "label": "Struggling younger people in mixed tenure",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_51",
                            "label": "Young people in small",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_52",
                            "label": "Poorer families",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_53",
                            "label": "Low income terraces",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_54",
                            "label": "Multi-ethnic",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_55",
                            "label": "Deprived and ethnically diverse in flats",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_56",
                            "label": "Low income large families in social rented semis",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_57",
                            "label": "Social rented flats",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_58",
                            "label": "Singles and young families",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_59",
                            "label": "Deprived areas and high-rise flats",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_60",
                            "label": "Active communal population",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_61",
                            "label": "Inactive communal population",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "_62",
                            "label": "Business addresses without resident population",
                            "type": "text",
                            "inline": true
                        }
                    ],
                    "style": {
                        "default": {
                            "stroke": false,
                            "fill": true,
                            "fillColor": "#000",
                            "fillOpacity": 0.3
                        },
                        "themes": {
                            "Acorn Group": {
                                "type": "categorized",
                                "field": "acorn_group",
                                "label": "Acorn Group",
                                "other": true,
                                "cat": {
                                    "A": {
                                        "label": "Lavish Lifestyles",
                                        "style": {
                                            "stroke": false,
                                            "fillColor": "#304DEC"
                                        }
                                    },
                                    "B": {
                                        "label": "Executive Wealth",
                                        "style": {
                                            "fillColor": "#5970F0"
                                        }
                                    },
                                    "C": {
                                        "label": "Mature Money",
                                        "style": {
                                            "fillColor": "#8494F4"
                                        }
                                    },
                                    "D": {
                                        "label": "City Sophisticates",
                                        "style": {
                                            "fillColor": "#500CB6"
                                        }
                                    },
                                    "E": {
                                        "label": "Career Climbers",
                                        "style": {
                                            "fillColor": "#763CC6"
                                        }
                                    },
                                    "F": {
                                        "label": "Countryside Communities",
                                        "style": {
                                            "fillColor": "#4F9342"
                                        }
                                    },
                                    "G": {
                                        "label": "Successful Suburbs",
                                        "style": {
                                            "fillColor": "#73A45F"
                                        }
                                    },
                                    "H": {
                                        "label": "Steady Neighbourhoods",
                                        "style": {
                                            "fillColor": "#93B481"
                                        }
                                    },
                                    "I": {
                                        "label": "Comfortable Seniors",
                                        "style": {
                                            "fillColor": "#93B481"
                                        }
                                    },
                                    "J": {
                                        "label": "Starting Out",
                                        "style": {
                                            "fillColor": "#B4CAA5"
                                        }
                                    },
                                    "K": {
                                        "label": "Student Life",
                                        "style": {
                                            "fillColor": "#F47421"
                                        }
                                    },
                                    "L": {
                                        "label": "Modest Means",
                                        "style": {
                                            "fillColor": "#F8A46D"
                                        }
                                    },
                                    "M": {
                                        "label": "Striving Families",
                                        "style": {
                                            "fillColor": "#F9A770"
                                        }
                                    },
                                    "N": {
                                        "label": "Poorer Pensioners",
                                        "style": {
                                            "fillColor": "#FCC398"
                                        }
                                    },
                                    "O": {
                                        "label": "Young Hardship",
                                        "style": {
                                            "fillColor": "#00A1C5"
                                        }
                                    },
                                    "P": {
                                        "label": "Struggling Estates",
                                        "style": {
                                            "fillColor": "#58AECE"
                                        }
                                    },
                                    "Q": {
                                        "label": "Difficult Circumstances",
                                        "style": {
                                            "fillColor": "#85BFD9"
                                        }
                                    },
                                    "R": {
                                        "label": "Not Private Households",
                                        "style": {
                                            "fillColor": "#AB347D"
                                        }
                                    }
                                }
                            },
                            "Acorn Category": {
                                "type": "categorized",
                                "field": "acorn_cat_desc",
                                "label": "Acorn Category",
                                "other": true,
                                "cat": {
                                    "Affluent Achievers": {
                                        "label": "Affluent Achievers",
                                        "style": {
                                            "fillColor": "#0000e6"
                                        }
                                    },
                                    "Rising Prosperity": {
                                        "label": "Rising Prosperity",
                                        "style": {
                                            "fillColor": "#8600b3"
                                        }
                                    },
                                    "Comfortable Communities": {
                                        "label": "Comfortable Communities",
                                        "style": {
                                            "fillColor": "#2d8659"
                                        }
                                    },
                                    "Financially Stretched": {
                                        "label": "Financially Stretched",
                                        "style": {
                                            "fillColor": "#ff6600"
                                        }
                                    },
                                    "Urban Adversity": {
                                        "label": "Urban Adversity",
                                        "style": {
                                            "fillColor": "#29a3a3"
                                        }
                                    },
                                    "Not Private Households": {
                                        "label": "Not Private Households",
                                        "style": {
                                            "fillColor": "#ff1a75"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "Workers": {
                    "name": "Workers",
                    "meta": "2015 worker counts, densities and occupation splits on hybrid zone level.",
                    "format": "mvt",
                    "dbs": "MB",
                    "mvt_cache": "xyz.x_mvts_uk_glx_geodata_workers_hybrid_zone",
                    "tables": {
                        "13": null,
                        "14": "geodata.uk_glx_geodata_workers_hybrid_zone"
                    },
                    "qID": "id",
                    "geom": "geom_3857",
                    "srid": "3857",
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "field": "oa_code",
                            "label": "OA Code",
                            "inline": true
                        },
                        {
                            "field": "wz_code",
                            "label": "WZ Code",
                            "inline": true
                        },
                        {
                            "field": "workers_18",
                            "label": "Workers",
                            "type": "integer",
                            "inline": true
                        },
                        {
                            "field": "workerskm2",
                            "label": "Workers km2",
                            "type": "integer",
                            "inline": true
                        },
                        {
                            "label": "Occupation Splits",
                            "type": "group",
                            "chart": {
                                "active": true,
                                "x": "label x",
                                "y": "label y",
                                "type": "doughnut",
                                "backgroundColor": [
                                    "#a6cee3",
                                    "#1f78b4",
                                    "#b2df8a",
                                    "#33a02c",
                                    "#fb9a99",
                                    "#e31a1c",
                                    "#fdbf6f",
                                    "#ff7f00",
                                    "#cab2d6",
                                    "#6a3d9a",
                                    "#ffffff99",
                                    "#b15928",
                                    "#8dd3c7",
                                    "#ffffffb3",
                                    "#bebada",
                                    "#fb8072",
                                    "#80b1d3",
                                    "#fdb462",
                                    "#b3de69",
                                    "#fccde5",
                                    "#d9d9d9"
                                ],
                                "borderColor": [
                                    "#a6cee3",
                                    "#1f78b4",
                                    "#b2df8a",
                                    "#33a02c",
                                    "#fb9a99",
                                    "#e31a1c",
                                    "#fdbf6f",
                                    "#ff7f00",
                                    "#cab2d6",
                                    "#6a3d9a",
                                    "#ffffff99",
                                    "#b15928",
                                    "#8dd3c7",
                                    "#ffffffb3",
                                    "#bebada",
                                    "#fb8072",
                                    "#80b1d3",
                                    "#fdb462",
                                    "#b3de69",
                                    "#fccde5",
                                    "#d9d9d9"
                                ]
                            }
                        },
                        {
                            "group": "Occupation Splits",
                            "label": "Agriculture, forestry and fishing",
                            "field": "pct_ind_01",
                            "type": "integer",
                            "postfix": "%"
                        },
                        {
                            "group": "Occupation Splits",
                            "field": "pct_ind_02",
                            "label": "Mining and quarrying",
                            "type": "integer",
                            "postfix": "%"
                        },
                        {
                            "group": "Occupation Splits",
                            "field": "pct_ind_03",
                            "label": "Manufacturing",
                            "type": "integer",
                            "postfix": "%"
                        },
                        {
                            "group": "Occupation Splits",
                            "field": "pct_ind_04",
                            "label": "Electricity, gas, steam and air conditioning supply",
                            "type": "integer",
                            "postfix": "%"
                        },
                        {
                            "group": "Occupation Splits",
                            "field": "pct_ind_05",
                            "label": "Water supply; Sewerage, waste management and remediation activities",
                            "type": "integer",
                            "postfix": "%"
                        },
                        {
                            "group": "Occupation Splits",
                            "field": "pct_ind_06",
                            "label": "Construction",
                            "type": "integer",
                            "postfix": "%"
                        },
                        {
                            "group": "Occupation Splits",
                            "field": "pct_ind_07",
                            "label": "Wholesale and retail trade; Repair of motor vehicles and motorcycles",
                            "type": "integer",
                            "postfix": "%"
                        },
                        {
                            "group": "Occupation Splits",
                            "field": "pct_ind_08",
                            "label": "Transportation and storage",
                            "type": "integer",
                            "postfix": "%"
                        },
                        {
                            "group": "Occupation Splits",
                            "field": "pct_ind_09",
                            "label": "Accommodation and food service activities",
                            "type": "integer",
                            "postfix": "%"
                        },
                        {
                            "group": "Occupation Splits",
                            "label": "Information and communication",
                            "field": "pct_ind_10",
                            "type": "integer",
                            "postfix": "%"
                        },
                        {
                            "group": "Occupation Splits",
                            "field": "pct_ind_11",
                            "label": "Financial and insurance activities",
                            "type": "integer",
                            "postfix": "%"
                        },
                        {
                            "group": "Occupation Splits",
                            "field": "pct_ind_12",
                            "label": "Real estate activities",
                            "type": "integer",
                            "postfix": "%"
                        },
                        {
                            "group": "Occupation Splits",
                            "field": "pct_ind_13",
                            "label": "Professional, scientific and technical activities",
                            "type": "integer",
                            "postfix": "%"
                        },
                        {
                            "group": "Occupation Splits",
                            "field": "pct_ind_14",
                            "label": "Administrative and support service activities",
                            "type": "integer",
                            "postfix": "%"
                        },
                        {
                            "group": "Occupation Splits",
                            "field": "pct_ind_15",
                            "label": "Public administration and defence; Compulsory social security",
                            "type": "integer",
                            "postfix": "%"
                        },
                        {
                            "group": "Occupation Splits",
                            "field": "pct_ind_16",
                            "label": "Education",
                            "type": "integer",
                            "postfix": "%"
                        },
                        {
                            "group": "Occupation Splits",
                            "field": "pct_ind_17",
                            "label": "Human health and social work activities",
                            "type": "integer",
                            "postfix": "%"
                        },
                        {
                            "group": "Occupation Splits",
                            "field": "pct_ind_18",
                            "label": "Arts, entertainment and recreation",
                            "type": "integer",
                            "postfix": "%"
                        },
                        {
                            "group": "Occupation Splits",
                            "field": "pct_ind_19",
                            "label": "Other service activities",
                            "type": "integer",
                            "postfix": "%"
                        },
                        {
                            "group": "Occupation Splits",
                            "field": "pct_ind_20",
                            "label": "Activities of households as employers",
                            "type": "integer",
                            "postfix": "%"
                        },
                        {
                            "group": "Occupation Splits",
                            "field": "pct_ind_21",
                            "label": "Activities of extraterritorial organisations and bodies",
                            "type": "integer",
                            "postfix": "%"
                        }
                    ],
                    "style": {
                        "default": {
                            "strokeWidth": 1,
                            "strokeColor": "#5A9367",
                            "fill": true,
                            "fillColor": "#5A9367",
                            "fillOpacity": 0.3
                        },
                        "highlight": {
                            "strokeColor": "#5A9367",
                            "fill": true,
                            "fillOpacity": 0.6
                        },
                        "themes": {
                            "Workers km2": {
                                "type": "graduated",
                                "field": "workerskm2",
                                "cat_arr": [
                                    {
                                        "value": 100,
                                        "label": "100 or less per km2",
                                        "style": {
                                            "strokeColor": "#1e88e5",
                                            "fillColor": "#1e88e5"
                                        }
                                    },
                                    {
                                        "value": 1000,
                                        "label": "1,000 per km2",
                                        "style": {
                                            "strokeColor": "#00897b",
                                            "fillColor": "#00897b"
                                        }
                                    },
                                    {
                                        "value": 5000,
                                        "label": "5,000 per km2",
                                        "style": {
                                            "strokeColor": "#43a047",
                                            "fillColor": "#43a047"
                                        }
                                    },
                                    {
                                        "value": 10000,
                                        "label": "10,000 per km2",
                                        "style": {
                                            "strokeColor": "#c0ca33",
                                            "fillColor": "#c0ca33"
                                        }
                                    },
                                    {
                                        "value": 20000,
                                        "label": "20,000 per km2",
                                        "style": {
                                            "strokeColor": "#fdd835",
                                            "fillColor": "#fdd835"
                                        }
                                    },
                                    {
                                        "value": 50000,
                                        "label": "50,000 per km2",
                                        "style": {
                                            "strokeColor": "#fb8c00",
                                            "fillColor": "#fb8c00"
                                        }
                                    },
                                    {
                                        "value": 100000,
                                        "label": "over 100,000 per km2",
                                        "style": {
                                            "strokeColor": "#f4511e",
                                            "fillColor": "#f4511e"
                                        }
                                    }
                                ]
                            }
                        }
                    }
                },
                "Points of Interest": {
                    "meta": "A subset of collection of points of interest across the UK including healthcare locations, law and order sites along with sport & leisure facilities, car parks, cinemas and service areas.",
                    "format": "cluster",
                    "dbs": "MB",
                    "table": "geodata.uk_glx_geodata_custom_poi",
                    "qID": "id",
                    "geom": "geom_p_4326",
                    "cluster_label": "poi_name",
                    "cluster_resolution": 0.2,
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "field": "poi_type",
                            "label": "Category",
                            "inline": true
                        },
                        {
                            "field": "poi_name",
                            "label": "Name",
                            "inline": true
                        },
                        {
                            "field": "brand",
                            "label": "Brand",
                            "inline": true
                        },
                        {
                            "field": "flag",
                            "label": "Type",
                            "inline": true
                        },
                        {
                            "field": "add_one",
                            "label": "Address",
                            "inline": true
                        },
                        {
                            "field": "postcode",
                            "label": "Postcode",
                            "inline": true
                        },
                        {
                            "field": "town",
                            "label": "Town",
                            "inline": true
                        },
                        {
                            "field": "locality",
                            "label": "locality",
                            "inline": true
                        },
                        {
                            "type": "streetview"
                        }
                    ],
                    "style": {
                        "marker": {
                            "type": "target",
                            "fillColor": "#C2095A"
                        },
                        "markerMulti": {
                            "type": "target",
                            "fillColor": "#C2095A"
                        },
                        "anchor": [
                            0.5,
                            1
                        ],
                        "themes": {
                            "POI Type": {
                                "field": "poi_type",
                                "type": "categorized",
                                "other": true,
                                "cat": {
                                    "Airport": {
                                        "label": "Airport",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pin_filled/poi_transport_airport.svg"
                                    },
                                    "Cinema": {
                                        "label": "Cinema",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pin_filled/poi_entertainment_cinema.svg"
                                    },
                                    "Hospital": {
                                        "label": "Hospital",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pin_filled/poi_health_hospital.svg"
                                    },
                                    "Pharmacy": {
                                        "label": "Pharmacy",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pin_filled/poi_health_pharmacy.svg"
                                    },
                                    "Sport and Leisure": {
                                        "label": "Sport and Leisure",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pin_filled/poi_sports_leisure_sports_centre.svg"
                                    },
                                    "Stadium": {
                                        "label": "Stadium",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pin_filled/poi_entertainment_stadium.svg"
                                    }
                                }
                            }
                        }
                    }
                },
                "Traffic": {
                    "meta": "Department for transport count points.",
                    "format": "cluster",
                    "dbs": "MB",
                    "qID": "id",
                    "table": "geodata.uk_glx_geodata_road_volume_trafficcount",
                    "geom": "geom_p_4326",
                    "cluster_label": "road_num",
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "field": "cp_type",
                            "label": "Type",
                            "type": "text",
                            "filter": {
                                "in": [
                                    "Major",
                                    "Minor"
                                ]
                            },
                            "inline": true
                        },
                        {
                            "field": "road_num",
                            "label": "Road Number",
                            "type": "text",
                            "filter": "like",
                            "inline": true
                        },
                        {
                            "field": "start_junc",
                            "label": "from junction",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "end_junc",
                            "label": "to junction",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "len_mi",
                            "label": "Segment (miles)",
                            "type": "numeric",
                            "inline": true
                        },
                        {
                            "field": "road_class",
                            "label": "Road Class",
                            "type": "text",
                            "filter": "match",
                            "inline": true
                        },
                        {
                            "field": "area_cat",
                            "label": "Area Category",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "all_mv_15",
                            "label": "Annual traffic count 2015",
                            "type": "integer",
                            "filter": "numeric",
                            "inline": true
                        },
                        {
                            "field": "all_mv_16",
                            "label": "Annual traffic count 2016",
                            "type": "integer",
                            "filter": "numeric",
                            "inline": true
                        },
                        {
                            "field": "all_mv_17",
                            "label": "Annual traffic count 2017",
                            "type": "integer",
                            "filter": "numeric",
                            "inline": true
                        },
                        {
                            "field": "all_mv_18",
                            "label": "Annual traffic count 2018",
                            "type": "integer",
                            "filter": "numeric",
                            "inline": true
                        }
                    ],
                    "style": {
                        "themes": {
                            "Motor vehicles 2018 (000's)": {
                                "type": "graduated",
                                "field": "all_mv_18",
                                "cat_arr": [
                                    {
                                        "value": 1000,
                                        "label": "1",
                                        "style": {
                                            "fillColor": "#fde725"
                                        }
                                    },
                                    {
                                        "value": 10000,
                                        "label": "10",
                                        "style": {
                                            "fillColor": "#8fd744"
                                        }
                                    },
                                    {
                                        "value": 25000,
                                        "label": "25",
                                        "style": {
                                            "fillColor": "#35b779"
                                        }
                                    },
                                    {
                                        "value": 50000,
                                        "label": "50",
                                        "style": {
                                            "fillColor": "#20908d"
                                        }
                                    },
                                    {
                                        "value": 75000,
                                        "label": "75",
                                        "style": {
                                            "fillColor": "#31688e"
                                        }
                                    },
                                    {
                                        "value": 100000,
                                        "label": "100",
                                        "style": {
                                            "fillColor": "#443a83"
                                        }
                                    },
                                    {
                                        "value": 150000,
                                        "label": "150",
                                        "style": {
                                            "fillColor": "#440154"
                                        }
                                    }
                                ]
                            }
                        }
                    }
                },
                "pubs": {
                    "display": true,
                    "name": "Mitchells & Butlers Pubs",
                    "format": "cluster",
                    "dbs": "MB",
                    "table": "mb.house_list",
                    "geom": "geom_4326",
                    "srid": "4326",
                    "cluster_label": "short_name",
                    "cluster_kmeans": 0.04,
                    "cluster_dbscan": 0.04,
                    "dataview": {
                        "mb_pubs": {
                            "title": "Mitchells & Butlers Pubs",
                            "type": "table",
                            "from": "mb.house_list",
                            "columns": [
                                {
                                    "field": "buncode",
                                    "title": "Bun Code"
                                },
                                {
                                    "field": "short_name",
                                    "title": "Name"
                                },
                                {
                                    "field": "address",
                                    "title": "Address"
                                },
                                {
                                    "field": "postcode",
                                    "title": "Post Code"
                                },
                                {
                                    "field": "location_type",
                                    "title": "Location Type"
                                }
                            ]
                        }
                    },
                    "edit": {
                        "properties": true
                    },
                    "hover": {
                        "field": "short_name"
                    },
                    "qID": "buncode",
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "field": "buncode",
                            "label": "Bun Code"
                        },
                        {
                            "field": "short_name",
                            "label": "Name"
                        },
                        {
                            "field": "brand_name",
                            "label": "Brand"
                        },
                        {
                            "field": "address",
                            "label": "Address"
                        },
                        {
                            "field": "postcode",
                            "label": "Post Code"
                        },
                        {
                            "label": "Premise Details",
                            "type": "group"
                        },
                        {
                            "field": "location_type",
                            "group": "Premise Details",
                            "inline": true,
                            "label": "Location Type"
                        },
                        {
                            "field": "building_total_car_parking_spac",
                            "group": "Premise Details",
                            "inline": true,
                            "label": "Car Park Spaces"
                        },
                        {
                            "field": "building_total_external_eda",
                            "group": "Premise Details",
                            "inline": true,
                            "label": "External EDA"
                        },
                        {
                            "field": "building_total_external_covers",
                            "group": "Premise Details",
                            "inline": true,
                            "label": "External Number of Covers"
                        },
                        {
                            "field": "building_total_internal_eda",
                            "group": "Premise Details",
                            "inline": true,
                            "label": "Internal EDA"
                        },
                        {
                            "label": "Financial Details",
                            "type": "group"
                        },
                        {
                            "field": "dry_perc",
                            "group": "Financial Details",
                            "postfix": "%",
                            "inline": true,
                            "type": "integer",
                            "label": "Dry %"
                        },
                        {
                            "field": "wet_perc",
                            "group": "Financial Details",
                            "postfix": "%",
                            "inline": true,
                            "type": "integer",
                            "label": "Wet %"
                        },
                        {
                            "field": "aws",
                            "group": "Financial Details",
                            "type": "integer",
                            "inline": true,
                            "label": "Average Weekly Sales"
                        },
                        {
                            "field": "aws_period_end",
                            "group": "Financial Details",
                            "type": "date",
                            "inline": true,
                            "label": "Sales period end date"
                        },
                        {
                            "label": "Total Sales Figures",
                            "type": "group",
                            "chart": {
                                "x": "Days of the Week",
                                "y": "%",
                                "backgroundColor": [
                                    "#ffb300",
                                    "#d81b60",
                                    "#8e24aa",
                                    "#5e35b1",
                                    "#3949ab",
                                    "#1e88e5",
                                    "#23E051"
                                ],
                                "borderColor": [
                                    "#ffb300",
                                    "#d81b60",
                                    "#8e24aa",
                                    "#5e35b1",
                                    "#3949ab",
                                    "#1e88e5",
                                    "#23E051"
                                ],
                                "active": true,
                                "height": 200,
                                "type": "pie",
                                "legend": true
                            }
                        },
                        {
                            "field": "monday_perc",
                            "type": "numeric",
                            "group": "Total Sales Figures",
                            "level": 2,
                            "inline": true,
                            "postfix": " %",
                            "label": "M"
                        },
                        {
                            "field": "tuesday_perc",
                            "type": "numeric",
                            "group": "Total Sales Figures",
                            "level": 2,
                            "inline": true,
                            "postfix": " %",
                            "label": "T"
                        },
                        {
                            "field": "wednesday_perc",
                            "type": "numeric",
                            "group": "Total Sales Figures",
                            "level": 2,
                            "inline": true,
                            "postfix": " %",
                            "label": "W"
                        },
                        {
                            "field": "thursday_perc",
                            "type": "numeric",
                            "group": "Total Sales Figures",
                            "level": 2,
                            "inline": true,
                            "postfix": " %",
                            "label": "T"
                        },
                        {
                            "field": "friday_perc",
                            "type": "numeric",
                            "group": "Total Sales Figures",
                            "level": 2,
                            "inline": true,
                            "postfix": " %",
                            "label": "F"
                        },
                        {
                            "field": "saturday_perc",
                            "type": "numeric",
                            "group": "Total Sales Figures",
                            "level": 2,
                            "inline": true,
                            "postfix": " %",
                            "label": "S"
                        },
                        {
                            "field": "sunday_perc",
                            "type": "numeric",
                            "group": "Total Sales Figures",
                            "level": 2,
                            "inline": true,
                            "postfix": " %",
                            "label": "SU"
                        },
                        {
                            "label": "Drivetimes",
                            "type": "label"
                        },
                        {
                            "name": "HERE Catchment 5min",
                            "field": "isoline_5min",
                            "fieldfx": "ST_asGeoJson(isoline_5min)",
                            "type": "geometry",
                            "edit": {
                                "isoline_here": {
                                    "minutes": 5
                                }
                            },
                            "style": {
                                "strokeColor": "#BB0A21",
                                "fillColor": "#BB0A21",
                                "strokeWidth": 2,
                                "fillOpacity": 0.2
                            }
                        },
                        {
                            "label": "Population within 5min",
                            "type": "group",
                            "beginAtZero": true,
                            "chart": {
                                "active": true,
                                "type": "bar",
                                "unit": "k",
                                "backgroundColor": [
                                    "#E6A5AE",
                                    "#E08F9A",
                                    "#D97985",
                                    "#D36371",
                                    "#CD4C5D",
                                    "#C73649",
                                    "#C12035",
                                    "#BB0A21"
                                ],
                                "borderColor": [
                                    "#E6A5AE",
                                    "#E08F9A",
                                    "#D97985",
                                    "#D36371",
                                    "#CD4C5D",
                                    "#C73649",
                                    "#C12035",
                                    "#BB0A21"
                                ]
                            }
                        },
                        {
                            "group": "Population within 5min",
                            "label": "2011",
                            "field": "_pop__11_5min",
                            "fieldfx": "SUM(b.pop__11)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_5min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 5min",
                            "label": "2012",
                            "field": "_pop__12_5min",
                            "fieldfx": "SUM(b.pop__12)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_5min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 5min",
                            "label": "2013",
                            "field": "_pop__13_5min",
                            "fieldfx": "SUM(b.pop__13)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_5min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 5min",
                            "label": "2014",
                            "field": "_pop__14_5min",
                            "fieldfx": "SUM(b.pop__14)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_5min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 5min",
                            "label": "2015",
                            "field": "_pop__15_5min",
                            "fieldfx": "SUM(b.pop__15)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_5min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 5min",
                            "label": "2016",
                            "field": "_pop__16_5min",
                            "fieldfx": "SUM(b.pop__16)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_5min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 5min",
                            "label": "2017",
                            "field": "_pop__17_5min",
                            "fieldfx": "SUM(b.pop__17)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_5min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "name": "HERE Catchment 10min",
                            "field": "isoline_10min",
                            "fieldfx": "ST_asGeoJson(isoline_10min)",
                            "type": "geometry",
                            "edit": {
                                "isoline_here": {
                                    "minutes": 10
                                }
                            },
                            "style": {
                                "strokeColor": "#F9C991",
                                "fillColor": "#F9C991",
                                "strokeWidth": 2
                            }
                        },
                        {
                            "label": "Population within 10min",
                            "type": "group",
                            "chart": {
                                "active": true,
                                "type": "bar",
                                "beginAtZero": true,
                                "unit": "k",
                                "backgroundColor": [
                                    "#FBDBB6",
                                    "#FAD2A4",
                                    "#F9C991",
                                    "#F8C07F",
                                    "#F7B76D",
                                    "#F6AE5B",
                                    "#F5A549",
                                    "#F49D37"
                                ],
                                "borderColor": [
                                    "#FBDBB6",
                                    "#FAD2A4",
                                    "#F9C991",
                                    "#F8C07F",
                                    "#F7B76D",
                                    "#F6AE5B",
                                    "#F5A549",
                                    "#F49D37"
                                ]
                            }
                        },
                        {
                            "group": "Population within 10min",
                            "label": "2011",
                            "field": "_pop__11_10min",
                            "fieldfx": "SUM(b.pop__11)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_10min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 10min",
                            "label": "2012",
                            "field": "_pop__12_10min",
                            "fieldfx": "SUM(b.pop__12)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_10min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 10min",
                            "label": "2013",
                            "field": "_pop__13_10min",
                            "fieldfx": "SUM(b.pop__13)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_10min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 10min",
                            "label": "2014",
                            "field": "_pop__14_10min",
                            "fieldfx": "SUM(b.pop__14)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_10min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 10min",
                            "label": "2015",
                            "field": "_pop__15_10min",
                            "fieldfx": "SUM(b.pop__15)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_10min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 10min",
                            "label": "2016",
                            "field": "_pop__16_10min",
                            "fieldfx": "SUM(b.pop__16)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_10min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 10min",
                            "label": "2017",
                            "field": "_pop__17_10min",
                            "fieldfx": "SUM(b.pop__17)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_10min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "name": "HERE Catchment 15min",
                            "field": "isoline_15min",
                            "fieldfx": "ST_asGeoJson(isoline_15min)",
                            "type": "geometry",
                            "edit": {
                                "isoline_here": {
                                    "minutes": 15
                                }
                            },
                            "style": {
                                "strokeColor": "#FFF05A",
                                "fillColor": "#FFF05A",
                                "strokeWidth": 2,
                                "fillOpacity": 0.2
                            }
                        },
                        {
                            "label": "Population within 15min",
                            "type": "group",
                            "chart": {
                                "active": true,
                                "type": "bar",
                                "beginAtZero": true,
                                "unit": "k",
                                "backgroundColor": [
                                    "#FFF9C3",
                                    "#FFF8B4",
                                    "#FFF6A5",
                                    "#FFF596",
                                    "#FFF487",
                                    "#FFF278",
                                    "#FFF169",
                                    "#FFF05A"
                                ],
                                "borderColor": [
                                    "#FFF9C3",
                                    "#FFF8B4",
                                    "#FFF6A5",
                                    "#FFF596",
                                    "#FFF487",
                                    "#FFF278",
                                    "#FFF169",
                                    "#FFF05A"
                                ]
                            }
                        },
                        {
                            "group": "Population within 15min",
                            "label": "2011",
                            "field": "_pop__11_15min",
                            "fieldfx": "SUM(b.pop__11)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_15min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 15min",
                            "label": "2012",
                            "field": "_pop__12_15min",
                            "fieldfx": "SUM(b.pop__12)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_15min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 15min",
                            "label": "2013",
                            "field": "_pop__13_15min",
                            "fieldfx": "SUM(b.pop__13)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_15min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 15min",
                            "label": "2014",
                            "field": "_pop__14_15min",
                            "fieldfx": "SUM(b.pop__14)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_15min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 15min",
                            "label": "2015",
                            "field": "_pop__15_15min",
                            "fieldfx": "SUM(b.pop__15)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_15min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 15min",
                            "label": "2016",
                            "field": "_pop__16_15min",
                            "fieldfx": "SUM(b.pop__16)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_15min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 15min",
                            "label": "2017",
                            "field": "_pop__17_15min",
                            "fieldfx": "SUM(b.pop__17)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_15min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "label": "Customer Catchments",
                            "type": "label",
                            "title": "Customer catchment based on % of bookings - primary 50%, secondary 80%"
                        },
                        {
                            "name": "Primary Catchment",
                            "field": "primary_catchment",
                            "fieldfx": "ST_asGeoJson(primary_catchment)",
                            "type": "geometry",
                            "style": {
                                "strokeWidth": 2,
                                "fillOpacity": 0.8
                            }
                        },
                        {
                            "name": "Secondary Catchment",
                            "field": "secondary_catchment",
                            "fieldfx": "ST_asGeoJson(secondary_catchment)",
                            "type": "geometry",
                            "style": {
                                "strokeWidth": 1,
                                "fillOpacity": 0.2
                            }
                        },
                        {
                            "label": "Available tableviews",
                            "type": "label"
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Population Summary",
                            "display": true,
                            "target_id": "xyz_table1",
                            "columns": [
                                {
                                    "type": "integer",
                                    "title": "0-5 mins",
                                    "field": "min5",
                                    "lookup": {
                                        "table_a": "mb.house_list",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_5min",
                                        "geom_b": "geom_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "0-10 mins",
                                    "field": "min10",
                                    "lookup": {
                                        "table_a": "mb.house_list",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_10min",
                                        "geom_b": "geom_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "0-15 mins",
                                    "field": "min15",
                                    "lookup": {
                                        "table_a": "mb.house_list",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geom_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                }
                            ],
                            "rows": [
                                {
                                    "field": "pop__17",
                                    "fieldfx": "SUM(b.pop__17)",
                                    "title": "Current Population"
                                },
                                {
                                    "field": "pop__11",
                                    "fieldfx": "SUM(b.pop__11)",
                                    "title": "Population 2011"
                                },
                                {
                                    "field": "pop_growth",
                                    "fieldfx": "SUM(b.pop__17 - b.pop__11) * 100 / SUM(b.pop__11)",
                                    "title": "Population Growth"
                                },
                                {
                                    "field": "students",
                                    "fieldfx": "SUM(eac_student__11) + SUM(ein_student__11)",
                                    "title": "Students"
                                },
                                {
                                    "field": "non_white",
                                    "fieldfx": "100*(SUM(pop__11) - SUM(ret_white_tot__11))/SUM(pop__11)",
                                    "title": "% Non-White"
                                },
                                {
                                    "field": "own_home",
                                    "fieldfx": "100*SUM(own)/SUM(own+rent+social)",
                                    "title": "Own Home"
                                },
                                {
                                    "field": "private_rented",
                                    "fieldfx": "100*SUM(rent)/SUM(own+rent+social)",
                                    "title": "Private Rented"
                                },
                                {
                                    "field": "social_rented",
                                    "fieldfx": "100*SUM(social)/SUM(own+rent+social)",
                                    "title": "Social Rented"
                                },
                                {
                                    "field": "single_hhds",
                                    "fieldfx": "100*SUM(pers1hhd)/SUM(pers1hhd+pers2hhd+pers2plushhd)",
                                    "title": "Single Hhds"
                                },
                                {
                                    "field": "hhds_two_ppl",
                                    "fieldfx": "100*SUM(pers2hhd)/SUM(pers1hhd+pers2hhd+pers2plushhd)",
                                    "title": "2 Person Hhds"
                                },
                                {
                                    "field": "hhds_3plus",
                                    "fieldfx": "100*SUM(pers2plushhd)/SUM(pers1hhd+pers2hhd+pers2plushhd)",
                                    "title": "3+ Hhds"
                                }
                            ]
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Worker Summary",
                            "display": true,
                            "target_id": "xyz_table8",
                            "columns": [
                                {
                                    "type": "integer",
                                    "title": "Total Workers",
                                    "field": "workers",
                                    "lookup": {
                                        "table_a": "mb.house_list",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geom_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                }
                            ],
                            "rows": [
                                {
                                    "field": "workers_250",
                                    "fieldfx": "SUM(case when ST_distance(ST_Transform(a.geom_4326,27700),ST_transform(b.geom_p_4326,27700))<=250 then b.workers else 0 end)",
                                    "title": "Workers 250m"
                                },
                                {
                                    "field": "workers_500",
                                    "fieldfx": "SUM(case when ST_distance(ST_Transform(a.geom_4326,27700),ST_transform(b.geom_p_4326,27700))<=500 then b.workers else 0 end)",
                                    "title": "Workers 500m"
                                }
                            ]
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Age Profile",
                            "display": true,
                            "target_id": "xyz_table2",
                            "columns": [
                                {
                                    "type": "integer",
                                    "title": "0-5 mins",
                                    "field": "min5",
                                    "lookup": {
                                        "table_a": "mb.house_list",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_5min",
                                        "geom_b": "geom_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "0-10 mins",
                                    "field": "min10",
                                    "lookup": {
                                        "table_a": "mb.house_list",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_10min",
                                        "geom_b": "geom_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "title": "0-15 mins",
                                    "field": "min15",
                                    "lookup": {
                                        "table_a": "mb.house_list",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geom_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "field": "uk",
                                    "aspatial": "age_under_18_uk, age_18to24_uk, age_25to29_uk, age_30to44_uk, age_45to59_uk, age_60plus_uk, age_total_uk FROM geodata.uk_glx_geodata_demog_national_totals"
                                }
                            ],
                            "rows": [
                                {
                                    "field": "age_under_18",
                                    "title": "< 18",
                                    "fieldfx": "round(SUM(pop__11 - age_18to19__11 - age_20to24__11 - age_25to29__11 - age_30to44__11 - age_45to59__11 - age60plus))"
                                },
                                {
                                    "field": "age_18to24",
                                    "fieldfx": "round(SUM(age_18to19__11 + age_20to24__11))",
                                    "title": "18 to 24"
                                },
                                {
                                    "field": "age_25to29",
                                    "fieldfx": "round(SUM(age_25to29__11))",
                                    "title": "25 to 29"
                                },
                                {
                                    "field": "age_30to44",
                                    "fieldfx": "round(SUM(age_30to44__11))",
                                    "title": "30 to 44"
                                },
                                {
                                    "field": "age_45to59",
                                    "fieldfx": "round(SUM(age_45to59__11))",
                                    "title": "45 to 59"
                                },
                                {
                                    "field": "age_60plus",
                                    "fieldfx": "round(SUM(age60plus))",
                                    "title": "60+"
                                },
                                {
                                    "field": "age_profile_total",
                                    "fieldfx": "round(SUM(pop__11))",
                                    "title": "Total"
                                }
                            ],
                            "agg": {
                                "share15": {
                                    "title": "% with 15 min",
                                    "type": "integer",
                                    "rows": [
                                        "100*min15.age_under_18/min15.age_profile_total",
                                        "100*min15.age_18to24/min15.age_profile_total",
                                        "100*min15.age_25to29/min15.age_profile_total",
                                        "100*min15.age_30to44/min15.age_profile_total",
                                        "100*min15.age_45to59/min15.age_profile_total",
                                        "100*min15.age_60plus/min15.age_profile_total",
                                        "100*min15.age_profile_total/min15.age_profile_total"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                "age_uk_total": {
                                    "title": "UK %",
                                    "type": "integer",
                                    "rows": [
                                        "uk.age_under_18_uk*100/uk.age_total_uk",
                                        "uk.age_18to24_uk*100/uk.age_total_uk",
                                        "uk.age_25to29_uk*100/uk.age_total_uk",
                                        "uk.age_30to44_uk*100/uk.age_total_uk",
                                        "uk.age_45to59_uk*100/uk.age_total_uk",
                                        "uk.age_60plus_uk*100/uk.age_total_uk",
                                        "uk.age_total_uk*100/uk.age_total_uk"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                "age_index": {
                                    "title": "Age Profile Index",
                                    "type": "integer",
                                    "align": "right",
                                    "formatter": "progress",
                                    "formatterParams": {
                                        "strokeColor": [
                                            "rgba(211, 47, 47, 0.7)",
                                            "rgba(56, 142, 60, 0.7)"
                                        ],
                                        "legend": true,
                                        "legendAlign": "right",
                                        "max": 200
                                    },
                                    "width": 200,
                                    "sorter": "number",
                                    "rows": [
                                        "uk.age_total_uk*(100*min15.age_under_18/min15.age_profile_total)/uk.age_under_18_uk",
                                        "uk.age_total_uk*(100*min15.age_18to24/min15.age_profile_total)/uk.age_18to24_uk",
                                        "uk.age_total_uk*(100*min15.age_25to29/min15.age_profile_total)/uk.age_25to29_uk",
                                        "uk.age_total_uk*(100*min15.age_30to44/min15.age_profile_total)/uk.age_30to44_uk",
                                        "uk.age_total_uk*(100*min15.age_45to59/min15.age_profile_total)/uk.age_45to59_uk",
                                        "uk.age_total_uk*(100*min15.age_60plus/min15.age_profile_total)/uk.age_60plus_uk",
                                        "uk.age_total_uk*(100*min15.age_profile_total/min15.age_profile_total)/uk.age_total_uk"
                                    ]
                                }
                            }
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Acorn Catchment Profile",
                            "target_id": "xyz_acorn",
                            "class": "hidden_in_report",
                            "display": true,
                            "columns": [
                                {
                                    "type": "numeric",
                                    "title": "0-5 mins",
                                    "field": "min5",
                                    "lookup": {
                                        "table_a": "mb.house_list",
                                        "table_b": "mb.output_area",
                                        "geom_a": "isoline_5min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "center",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "title": "0-10 mins",
                                    "field": "min10",
                                    "lookup": {
                                        "table_a": "mb.house_list",
                                        "table_b": "mb.output_area",
                                        "geom_a": "isoline_10min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "center",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "title": "0-15 mins",
                                    "field": "min15",
                                    "lookup": {
                                        "table_a": "mb.house_list",
                                        "table_b": "mb.output_area",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "center",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "field": "uk",
                                    "aspatial": "lavish_lifestyles, executive_wealth, mature_money, city_sophisticates, career_climbers, countryside_communities, successful_suburbs, steady_neighbourhoods, comfortable_seniors, starting_out, student_life, modest_means, striving_families, poorer_pensioners, young_hardship, struggling_estates, difficult_circumstances, not_private_households, total_pop FROM mb.uk_acorn_groups_regional where region = 'UK'"
                                }
                            ],
                            "rows": [
                                {
                                    "field": "lavish_lifestyles",
                                    "fieldfx": "SUM(COALESCE(b.lavish_lifestyles))",
                                    "title": "Lavish Lifestyles"
                                },
                                {
                                    "field": "executive_wealth",
                                    "fieldfx": "SUM(COALESCE(b.executive_wealth))",
                                    "title": "Executive Wealth"
                                },
                                {
                                    "field": "mature_money",
                                    "fieldfx": "SUM(COALESCE(b.mature_money))",
                                    "title": "Mature Money"
                                },
                                {
                                    "field": "city_sophisticates",
                                    "fieldfx": "SUM(COALESCE(b.city_sophisticates))",
                                    "title": "City Sophisticates"
                                },
                                {
                                    "field": "career_climbers",
                                    "fieldfx": "SUM(COALESCE(b.career_climbers))",
                                    "title": "Career Climbers"
                                },
                                {
                                    "field": "countryside_communities",
                                    "fieldfx": "SUM(COALESCE(b.countryside_communities))",
                                    "title": "Countryside Communities"
                                },
                                {
                                    "field": "successful_suburbs",
                                    "fieldfx": "SUM(COALESCE(b.successful_suburbs))",
                                    "title": "Successful Suburbs"
                                },
                                {
                                    "field": "steady_neighbourhoods",
                                    "fieldfx": "SUM(COALESCE(b.steady_neighbourhoods))",
                                    "title": "Steady Neighbourhoods"
                                },
                                {
                                    "field": "comfortable_seniors",
                                    "fieldfx": "SUM(COALESCE(b.comfortable_seniors))",
                                    "title": "Comfortable Seniors"
                                },
                                {
                                    "field": "starting_out",
                                    "fieldfx": "SUM(COALESCE(b.starting_out))",
                                    "title": "Starting Out"
                                },
                                {
                                    "field": "student_life",
                                    "fieldfx": "SUM(COALESCE(b.student_life))",
                                    "title": "Student Life"
                                },
                                {
                                    "field": "modest_means",
                                    "fieldfx": "SUM(COALESCE(b.modest_means))",
                                    "title": "Modest Means"
                                },
                                {
                                    "field": "striving_families",
                                    "fieldfx": "SUM(COALESCE(b.striving_families))",
                                    "title": "Striving Families"
                                },
                                {
                                    "field": "poorer_pensioners",
                                    "fieldfx": "SUM(COALESCE(b.poorer_pensioners))",
                                    "title": "Poorer Pensioners"
                                },
                                {
                                    "field": "young_hardship",
                                    "fieldfx": "SUM(COALESCE(b.young_hardship))",
                                    "title": "Young Hardship"
                                },
                                {
                                    "field": "struggling_estates",
                                    "fieldfx": "SUM(COALESCE(b.struggling_estates))",
                                    "title": "Struggling Estates"
                                },
                                {
                                    "field": "difficult_circumstances",
                                    "fieldfx": "SUM(COALESCE(b.difficult_circumstances))",
                                    "title": "Difficult Circumstances"
                                },
                                {
                                    "field": "not_private_households",
                                    "fieldfx": "SUM(COALESCE(b.not_private_households))",
                                    "title": "Not Private Households"
                                },
                                {
                                    "field": "total_pop",
                                    "fieldfx": "SUM(COALESCE(b.total_pop))",
                                    "title": "ACORN Total"
                                }
                            ],
                            "agg": {
                                "share15": {
                                    "title": "% with 15 min",
                                    "rows": [
                                        "100*min15.lavish_lifestyles/min15.total_pop",
                                        "100*min15.executive_wealth/min15.total_pop",
                                        "100*min15.mature_money/min15.total_pop",
                                        "100*min15.city_sophisticates/min15.total_pop",
                                        "100*min15.career_climbers/min15.total_pop",
                                        "100*min15.countryside_communities/min15.total_pop",
                                        "100*min15.successful_suburbs/min15.total_pop",
                                        "100*min15.steady_neighbourhoods/min15.total_pop",
                                        "100*min15.comfortable_seniors/min15.total_pop",
                                        "100*min15.starting_out/min15.total_pop",
                                        "100*min15.student_life/min15.total_pop",
                                        "100*min15.modest_means/min15.total_pop",
                                        "100*min15.striving_families/min15.total_pop",
                                        "100*min15.poorer_pensioners/min15.total_pop",
                                        "100*min15.young_hardship/min15.total_pop",
                                        "100*min15.struggling_estates/min15.total_pop",
                                        "100*min15.difficult_circumstances/min15.total_pop",
                                        "100*min15.not_private_households/min15.total_pop"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 1
                                    }
                                },
                                "uk_perc": {
                                    "title": "UK %",
                                    "rows": [
                                        "100*uk.lavish_lifestyles/uk.total_pop",
                                        "100*uk.executive_wealth/uk.total_pop",
                                        "100*uk.mature_money/uk.total_pop",
                                        "100*uk.city_sophisticates/uk.total_pop",
                                        "100*uk.career_climbers/uk.total_pop",
                                        "100*uk.countryside_communities/uk.total_pop",
                                        "100*uk.successful_suburbs/uk.total_pop",
                                        "100*uk.steady_neighbourhoods/uk.total_pop",
                                        "100*uk.comfortable_seniors/uk.total_pop",
                                        "100*uk.starting_out/uk.total_pop",
                                        "100*uk.student_life/uk.total_pop",
                                        "100*uk.modest_means/uk.total_pop",
                                        "100*uk.striving_families/uk.total_pop",
                                        "100*uk.poorer_pensioners/uk.total_pop",
                                        "100*uk.young_hardship/uk.total_pop",
                                        "100*uk.struggling_estates/uk.total_pop",
                                        "100*uk.difficult_circumstances/uk.total_pop",
                                        "100*uk.not_private_households/uk.total_pop"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 1
                                    }
                                },
                                "acorn_index": {
                                    "title": "ACORN Index",
                                    "type": "integer",
                                    "formatter": "progress",
                                    "formatterParams": {
                                        "strokeColor": [
                                            "rgba(211, 47, 47, 0.7)",
                                            "rgba(56, 142, 60, 0.7)"
                                        ],
                                        "max": 200,
                                        "legend": true,
                                        "legendAlign": "right"
                                    },
                                    "width": 200,
                                    "sorter": "number",
                                    "rows": [
                                        "uk.total_pop*(100*min15.lavish_lifestyles/min15.total_pop)/uk.lavish_lifestyles",
                                        "uk.total_pop*(100*min15.executive_wealth/min15.total_pop)/uk.executive_wealth",
                                        "uk.total_pop*(100*min15.mature_money/min15.total_pop)/uk.mature_money",
                                        "uk.total_pop*(100*min15.city_sophisticates/min15.total_pop)/uk.city_sophisticates",
                                        "uk.total_pop*(100*min15.career_climbers/min15.total_pop)/uk.career_climbers",
                                        "uk.total_pop*(100*min15.countryside_communities/min15.total_pop)/uk.countryside_communities",
                                        "uk.total_pop*(100*min15.successful_suburbs/min15.total_pop)/uk.successful_suburbs",
                                        "uk.total_pop*(100*min15.steady_neighbourhoods/min15.total_pop)/uk.steady_neighbourhoods",
                                        "uk.total_pop*(100*min15.comfortable_seniors/min15.total_pop)/uk.comfortable_seniors",
                                        "uk.total_pop*(100*min15.starting_out/min15.total_pop)/uk.starting_out",
                                        "uk.total_pop*(100*min15.student_life/min15.total_pop)/uk.student_life",
                                        "uk.total_pop*(100*min15.modest_means/min15.total_pop)/uk.modest_means",
                                        "uk.total_pop*(100*min15.striving_families/min15.total_pop)/uk.striving_families",
                                        "uk.total_pop*(100*min15.poorer_pensioners/min15.total_pop)/uk.poorer_pensioners",
                                        "uk.total_pop*(100*min15.young_hardship/min15.total_pop)/uk.young_hardship",
                                        "uk.total_pop*(100*min15.struggling_estates/min15.total_pop)/uk.struggling_estates",
                                        "uk.total_pop*(100*min15.difficult_circumstances/min15.total_pop)/uk.difficult_circumstances",
                                        "uk.total_pop*(100*min15.not_private_households/min15.total_pop)/uk.not_private_households"
                                    ]
                                }
                            }
                        },
                        {
                            "type": "orderedList",
                            "title": "Investment History",
                            "display": true,
                            "from": "mb.uk_mb_restrict_investment_history",
                            "where": "buncode = $1",
                            "orderby": "inv_spend DESC",
                            "columns": [
                                {
                                    "title": "Name",
                                    "field": "name"
                                },
                                {
                                    "title": "Project Type",
                                    "field": "project_type"
                                },
                                {
                                    "title": "Proposed Brand",
                                    "field": "Proposed_brand"
                                },
                                {
                                    "title": "Date of Investment",
                                    "field": "date_of_inv",
                                    "align": "center"
                                },
                                {
                                    "title": "Investment Spent",
                                    "field": "inv_spend",
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0,
                                        "symbol": "£"
                                    }
                                }
                            ]
                        },
                        {
                            "type": "streetview"
                        },
                        {
                            "type": "orderedList",
                            "title": "Nearest competitors",
                            "display": true,
                            "from": "mb.house_list a, mb.competition b",
                            "where": "a.buncode = $1",
                            "orderby": "ST_DistanceSphere(a.geom_4326, b.geom_4326)",
                            "limit": 20,
                            "columns": [
                                {
                                    "title": "CGA ID",
                                    "field": "cga_identifier",
                                    "fieldfx": "b.cga_identifier",
                                    "align": "right"
                                },
                                {
                                    "title": "Site name",
                                    "field": "site_name",
                                    "fieldfx": "b.site_name"
                                },
                                {
                                    "title": "Brand",
                                    "field": "brand_name",
                                    "fieldfx": "b.brand_name"
                                },
                                {
                                    "title": "Owner Name",
                                    "field": "owner_name",
                                    "fieldfx": "b.owner_name"
                                },
                                {
                                    "title": "Owner Group",
                                    "field": "owner_group",
                                    "fieldfx": "b.owner_group"
                                },
                                {
                                    "title": "Licence",
                                    "field": "site_licence_name",
                                    "fieldfx": "b.site_licence_name"
                                },
                                {
                                    "title": "Type",
                                    "field": "main_comp_display",
                                    "fieldfx": "b.main_comp_display"
                                },
                                {
                                    "title": "Postcode",
                                    "field": "postcode",
                                    "fieldfx": "b.postcode"
                                },
                                {
                                    "title": "Distance (km)",
                                    "field": "dist",
                                    "fieldfx": "ST_DistanceSphere(a.geom_4326, b.geom_4326) / 1000",
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 1
                                    }
                                }
                            ]
                        },
                        {
                            "type": "orderedList",
                            "title": "Nearest MB Pubs",
                            "display": true,
                            "from": "mb.house_list a, mb.house_list b",
                            "where": "a.buncode = $1 and a.buncode <> b.buncode",
                            "orderby": "ST_DistanceSphere(a.geom_4326, b.geom_4326)",
                            "limit": "20",
                            "columns": [
                                {
                                    "field": "short_name",
                                    "fieldfx": "b.short_name",
                                    "title": "Name"
                                },
                                {
                                    "field": "brand_name",
                                    "fieldfx": "b.brand_name",
                                    "title": "Brand"
                                },
                                {
                                    "field": "postcode",
                                    "fieldfx": "b.postcode",
                                    "title": "Post Code"
                                },
                                {
                                    "field": "location_type",
                                    "fieldfx": "b.location_type",
                                    "title": "Location Type"
                                },
                                {
                                    "title": "Distance (km)",
                                    "field": "dist",
                                    "fieldfx": "ST_DistanceSphere(a.geom_4326, b.geom_4326) / 1000",
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 1
                                    }
                                }
                            ]
                        }
                    ],
                    "style": {
                        "label": {
                            "field": "short_name",
                            "display": false,
                            "declutter": true,
                            "strokeColor": "#adebad",
                            "strokeWidth": 3,
                            "fillColor": "#006699"
                        },
                        "marker": {
                            "type": "target",
                            "fillColor": "#BFC9CA"
                        },
                        "markerMulti": {
                            "type": "target",
                            "fillColor": "#BFC9CA"
                        },
                        "highlight": {},
                        "themes": {
                            "Brand": {
                                "label": "Brand",
                                "type": "categorized",
                                "field": "crmbrandname",
                                "other": true,
                                "cat": {
                                    "All Bar One": {
                                        "label": "All Bar One",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/all_bar_one.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Browns": {
                                        "label": "Browns",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/browns.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Castle": {
                                        "label": "Castle",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/castle.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Ember": {
                                        "label": "Ember",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/ember.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Harvester": {
                                        "label": "Harvester",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/harvester.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Miller and Carter": {
                                        "label": "Miller & Carter",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/miller_carter.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Nicholsons": {
                                        "label": "Nicholsons",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/nicholsons.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Oak Tree - High Street": {
                                        "label": "Oak Tree",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/oaktree.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Oak Tree - Suburb": {
                                        "label": "Oak Tree",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/oaktree.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "O Neills": {
                                        "label": "O'Neill's",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/oneills.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Premium Country Pubs": {
                                        "label": "Premium Country Pubs",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/premium_country.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Sizzling Pubs": {
                                        "label": "Sizzling Pubs",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/sizzling.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Toby Carvery": {
                                        "label": "Toby Carvery",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/toby.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Vintage Inns": {
                                        "label": "Vintage Inns",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/vintage.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Stonehouse Pizza and Carvery": {
                                        "label": "Stonehouse Pizza & Carvery",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/stonehouse.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    }
                                }
                            },
                            "Brand (simple)": {
                                "label": "Brand (simple)",
                                "type": "categorized",
                                "field": "crmbrandname",
                                "other": true,
                                "cat": {
                                    "All Bar One": {
                                        "label": "All Bar One",
                                        "style": {
                                            "fillColor": "#8E774D"
                                        }
                                    },
                                    "Browns": {
                                        "label": "Browns",
                                        "style": {
                                            "fillColor": "#728184"
                                        }
                                    },
                                    "Castle": {
                                        "label": "Castle",
                                        "style": {
                                            "fillColor": "#9FB2B9"
                                        }
                                    },
                                    "Ember": {
                                        "label": "Ember",
                                        "style": {
                                            "fillColor": "#333333"
                                        }
                                    },
                                    "Franchise": {
                                        "label": "Franchise",
                                        "style": {
                                            "fillColor": "#F4C000"
                                        }
                                    },
                                    "Harvester": {
                                        "label": "Harvester",
                                        "style": {
                                            "fillColor": "#327C61"
                                        }
                                    },
                                    "Miller and Carter": {
                                        "label": "Miller & Carter",
                                        "style": {
                                            "fillColor": "#BC8F4B",
                                            "layers": {
                                                "0.50": "#000"
                                            }
                                        }
                                    },
                                    "Nicholsons": {
                                        "label": "Nicholsons",
                                        "style": {
                                            "fillColor": "#60291c",
                                            "layers": {
                                                "0.50": "#E5DED1"
                                            }
                                        }
                                    },
                                    "Oak Tree - High Street": {
                                        "label": "Oak Tree",
                                        "style": {
                                            "fillColor": "#ABA444"
                                        }
                                    },
                                    "Oak Tree - Suburban": {
                                        "label": "Oak Tree",
                                        "style": {
                                            "fillColor": "#ABA444"
                                        }
                                    },
                                    "O Neills": {
                                        "label": "O'Neill's",
                                        "style": {
                                            "fillColor": "#706B5D"
                                        }
                                    },
                                    "Premium Country Pubs": {
                                        "label": "Premium Country Pubs",
                                        "style": {
                                            "fillColor": "#ADD199"
                                        }
                                    },
                                    "Sizzling Pubs": {
                                        "label": "Sizzling Pubs",
                                        "style": {
                                            "fillColor": "#2EA1BE"
                                        }
                                    },
                                    "Toby Carvery": {
                                        "label": "Toby Carvery",
                                        "style": {
                                            "fillColor": "#7E1C33"
                                        }
                                    },
                                    "Vintage Inns": {
                                        "label": "Vintage Inns",
                                        "style": {
                                            "fillColor": "#5A2D4C"
                                        }
                                    },
                                    "Stonehouse Pizza and Carvery": {
                                        "label": "Stonehouse Pizza & Carvery",
                                        "style": {
                                            "fillColor": "#239CBA"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "pubs_lite": {
                    "display": true,
                    "name": "Mitchells & Butlers Pubs",
                    "format": "cluster",
                    "dbs": "MB",
                    "table": "mb.house_list",
                    "geom": "geom_4326",
                    "srid": "4326",
                    "cluster_label": "short_name",
                    "cluster_kmeans": 0.04,
                    "cluster_dbscan": 0.04,
                    "dataview": {
                        "mb_pubs": {
                            "title": "Mitchells & Butlers Pubs",
                            "type": "table",
                            "from": "mb.house_list",
                            "columns": [
                                {
                                    "field": "buncode",
                                    "title": "Bun Code"
                                },
                                {
                                    "field": "short_name",
                                    "title": "Name"
                                },
                                {
                                    "field": "address",
                                    "title": "Address"
                                },
                                {
                                    "field": "postcode",
                                    "title": "Post Code"
                                },
                                {
                                    "field": "location_type",
                                    "title": "Location Type"
                                }
                            ]
                        }
                    },
                    "edit": {
                        "properties": true
                    },
                    "hover": {
                        "field": "short_name"
                    },
                    "qID": "buncode",
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "field": "buncode",
                            "label": "Bun Code"
                        },
                        {
                            "field": "short_name",
                            "label": "Name"
                        },
                        {
                            "field": "brand_name",
                            "label": "Brand"
                        },
                        {
                            "field": "address",
                            "label": "Address"
                        },
                        {
                            "field": "postcode",
                            "label": "Post Code"
                        },
                        {
                            "type": "group",
                            "label": "Premise Details"
                        },
                        {
                            "field": "location_type",
                            "group": "Premise Details",
                            "inline": true,
                            "label": "Location Type"
                        },
                        {
                            "field": "building_total_car_parking_spac",
                            "group": "Premise Details",
                            "inline": true,
                            "label": "Car Park Spaces"
                        },
                        {
                            "field": "building_total_external_eda",
                            "group": "Premise Details",
                            "inline": true,
                            "label": "External EDA"
                        },
                        {
                            "field": "building_total_external_covers",
                            "group": "Premise Details",
                            "inline": true,
                            "label": "External Number of Covers"
                        },
                        {
                            "field": "building_total_internal_eda",
                            "group": "Premise Details",
                            "inline": true,
                            "label": "Internal EDA"
                        },
                        {
                            "label": "Total Sales Figures",
                            "type": "group",
                            "chart": {
                                "x": "Days of the Week",
                                "y": "%",
                                "backgroundColor": [
                                    "#ffb300",
                                    "#d81b60",
                                    "#8e24aa",
                                    "#5e35b1",
                                    "#3949ab",
                                    "#1e88e5",
                                    "#23E051"
                                ],
                                "borderColor": [
                                    "#ffb300",
                                    "#d81b60",
                                    "#8e24aa",
                                    "#5e35b1",
                                    "#3949ab",
                                    "#1e88e5",
                                    "#23E051"
                                ],
                                "active": true,
                                "height": 200,
                                "type": "pie",
                                "legend": true
                            }
                        },
                        {
                            "field": "monday_perc",
                            "type": "numeric",
                            "group": "Total Sales Figures",
                            "level": 2,
                            "inline": true,
                            "postfix": " %",
                            "label": "M"
                        },
                        {
                            "field": "tuesday_perc",
                            "type": "numeric",
                            "group": "Total Sales Figures",
                            "level": 2,
                            "inline": true,
                            "postfix": " %",
                            "label": "T"
                        },
                        {
                            "field": "wednesday_perc",
                            "type": "numeric",
                            "group": "Total Sales Figures",
                            "level": 2,
                            "inline": true,
                            "postfix": " %",
                            "label": "W"
                        },
                        {
                            "field": "thursday_perc",
                            "type": "numeric",
                            "group": "Total Sales Figures",
                            "level": 2,
                            "inline": true,
                            "postfix": " %",
                            "label": "T"
                        },
                        {
                            "field": "friday_perc",
                            "type": "numeric",
                            "group": "Total Sales Figures",
                            "level": 2,
                            "inline": true,
                            "postfix": " %",
                            "label": "F"
                        },
                        {
                            "field": "saturday_perc",
                            "type": "numeric",
                            "group": "Total Sales Figures",
                            "level": 2,
                            "inline": true,
                            "postfix": " %",
                            "label": "S"
                        },
                        {
                            "field": "sunday_perc",
                            "type": "numeric",
                            "group": "Total Sales Figures",
                            "level": 2,
                            "inline": true,
                            "postfix": " %",
                            "label": "SU"
                        },
                        {
                            "label": "Drivetimes",
                            "type": "label"
                        },
                        {
                            "name": "HERE Catchment 5min",
                            "field": "isoline_5min",
                            "fieldfx": "ST_asGeoJson(isoline_5min)",
                            "type": "geometry",
                            "edit": {
                                "isoline_here": {
                                    "minutes": 5
                                }
                            },
                            "style": {
                                "strokeColor": "#BB0A21",
                                "fillColor": "#BB0A21",
                                "strokeWidth": 2,
                                "fillOpacity": 0.2
                            }
                        },
                        {
                            "label": "Population within 5min",
                            "type": "group",
                            "chart": {
                                "active": true,
                                "type": "bar",
                                "beginAtZero": true,
                                "unit": "k",
                                "backgroundColor": [
                                    "#E6A5AE",
                                    "#E08F9A",
                                    "#D97985",
                                    "#D36371",
                                    "#CD4C5D",
                                    "#C73649",
                                    "#C12035",
                                    "#BB0A21"
                                ],
                                "borderColor": [
                                    "#E6A5AE",
                                    "#E08F9A",
                                    "#D97985",
                                    "#D36371",
                                    "#CD4C5D",
                                    "#C73649",
                                    "#C12035",
                                    "#BB0A21"
                                ]
                            }
                        },
                        {
                            "group": "Population within 5min",
                            "label": "2011",
                            "field": "_pop__11_5min",
                            "fieldfx": "SUM(b.pop__11)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_5min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 5min",
                            "label": "2012",
                            "field": "_pop__12_5min",
                            "fieldfx": "SUM(b.pop__12)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_5min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 5min",
                            "label": "2013",
                            "field": "_pop__13_5min",
                            "fieldfx": "SUM(b.pop__13)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_5min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 5min",
                            "label": "2014",
                            "field": "_pop__14_5min",
                            "fieldfx": "SUM(b.pop__14)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_5min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 5min",
                            "label": "2015",
                            "field": "_pop__15_5min",
                            "fieldfx": "SUM(b.pop__15)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_5min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 5min",
                            "label": "2016",
                            "field": "_pop__16_5min",
                            "fieldfx": "SUM(b.pop__16)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_5min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 5min",
                            "label": "2017",
                            "field": "_pop__17_5min",
                            "fieldfx": "SUM(b.pop__17)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_5min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "name": "HERE Catchment 10min",
                            "field": "isoline_10min",
                            "fieldfx": "ST_asGeoJson(isoline_10min)",
                            "type": "geometry",
                            "edit": {
                                "isoline_here": {
                                    "minutes": 10
                                }
                            },
                            "style": {
                                "strokeColor": "#F9C991",
                                "fillColor": "#F9C991",
                                "strokeWidth": 2
                            }
                        },
                        {
                            "label": "Population within 10min",
                            "type": "group",
                            "chart": {
                                "active": true,
                                "type": "bar",
                                "beginAtZero": true,
                                "unit": "k",
                                "backgroundColor": [
                                    "#FBDBB6",
                                    "#FAD2A4",
                                    "#F9C991",
                                    "#F8C07F",
                                    "#F7B76D",
                                    "#F6AE5B",
                                    "#F5A549",
                                    "#F49D37"
                                ],
                                "borderColor": [
                                    "#FBDBB6",
                                    "#FAD2A4",
                                    "#F9C991",
                                    "#F8C07F",
                                    "#F7B76D",
                                    "#F6AE5B",
                                    "#F5A549",
                                    "#F49D37"
                                ]
                            }
                        },
                        {
                            "group": "Population within 10min",
                            "label": "2011",
                            "field": "_pop__11_10min",
                            "fieldfx": "SUM(b.pop__11)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_10min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 10min",
                            "label": "2012",
                            "field": "_pop__12_10min",
                            "fieldfx": "SUM(b.pop__12)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_10min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 10min",
                            "label": "2013",
                            "field": "_pop__13_10min",
                            "fieldfx": "SUM(b.pop__13)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_10min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 10min",
                            "label": "2014",
                            "field": "_pop__14_10min",
                            "fieldfx": "SUM(b.pop__14)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_10min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 10min",
                            "label": "2015",
                            "field": "_pop__15_10min",
                            "fieldfx": "SUM(b.pop__15)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_10min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 10min",
                            "label": "2016",
                            "field": "_pop__16_10min",
                            "fieldfx": "SUM(b.pop__16)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_10min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 10min",
                            "label": "2017",
                            "field": "_pop__17_10min",
                            "fieldfx": "SUM(b.pop__17)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_10min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "name": "HERE Catchment 15min",
                            "field": "isoline_15min",
                            "fieldfx": "ST_asGeoJson(isoline_15min)",
                            "type": "geometry",
                            "edit": {
                                "isoline_here": {
                                    "minutes": 15
                                }
                            },
                            "style": {
                                "strokeColor": "#FFF05A",
                                "fillColor": "#FFF05A",
                                "strokeWidth": 2,
                                "fillOpacity": 0.2
                            }
                        },
                        {
                            "label": "Population within 15min",
                            "type": "group",
                            "chart": {
                                "active": true,
                                "type": "bar",
                                "beginAtZero": true,
                                "unit": "k",
                                "backgroundColor": [
                                    "#FFF9C3",
                                    "#FFF8B4",
                                    "#FFF6A5",
                                    "#FFF596",
                                    "#FFF487",
                                    "#FFF278",
                                    "#FFF169",
                                    "#FFF05A"
                                ],
                                "borderColor": [
                                    "#FFF9C3",
                                    "#FFF8B4",
                                    "#FFF6A5",
                                    "#FFF596",
                                    "#FFF487",
                                    "#FFF278",
                                    "#FFF169",
                                    "#FFF05A"
                                ]
                            }
                        },
                        {
                            "group": "Population within 15min",
                            "label": "2011",
                            "field": "_pop__11_15min",
                            "fieldfx": "SUM(b.pop__11)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_15min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 15min",
                            "label": "2012",
                            "field": "_pop__12_15min",
                            "fieldfx": "SUM(b.pop__12)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_15min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 15min",
                            "label": "2013",
                            "field": "_pop__13_15min",
                            "fieldfx": "SUM(b.pop__13)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_15min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 15min",
                            "label": "2014",
                            "field": "_pop__14_15min",
                            "fieldfx": "SUM(b.pop__14)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_15min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 15min",
                            "label": "2015",
                            "field": "_pop__15_15min",
                            "fieldfx": "SUM(b.pop__15)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_15min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 15min",
                            "label": "2016",
                            "field": "_pop__16_15min",
                            "fieldfx": "SUM(b.pop__16)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_15min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "group": "Population within 15min",
                            "label": "2017",
                            "field": "_pop__17_15min",
                            "fieldfx": "SUM(b.pop__17)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mb.house_list",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_15min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "label": "Customer Catchments",
                            "type": "label",
                            "title": "Customer catchment based on % of bookings - primary 50%, secondary 80%"
                        },
                        {
                            "name": "Primary Catchment",
                            "field": "primary_catchment",
                            "fieldfx": "ST_asGeoJson(primary_catchment)",
                            "type": "geometry",
                            "style": {
                                "strokeWidth": 2,
                                "fillOpacity": 0.8
                            }
                        },
                        {
                            "name": "Secondary Catchment",
                            "field": "secondary_catchment",
                            "fieldfx": "ST_asGeoJson(secondary_catchment)",
                            "type": "geometry",
                            "style": {
                                "strokeWidth": 1,
                                "fillOpacity": 0.2
                            }
                        },
                        {
                            "label": "Available tableviews",
                            "type": "label"
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Population Summary",
                            "display": true,
                            "target_id": "xyz_table1",
                            "columns": [
                                {
                                    "type": "integer",
                                    "title": "0-5 mins",
                                    "field": "min5",
                                    "lookup": {
                                        "table_a": "mb.house_list",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_5min",
                                        "geom_b": "geom_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "0-10 mins",
                                    "field": "min10",
                                    "lookup": {
                                        "table_a": "mb.house_list",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_10min",
                                        "geom_b": "geom_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "0-15 mins",
                                    "field": "min15",
                                    "lookup": {
                                        "table_a": "mb.house_list",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geom_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                }
                            ],
                            "rows": [
                                {
                                    "field": "pop__17",
                                    "fieldfx": "SUM(b.pop__17)",
                                    "title": "Current Population"
                                },
                                {
                                    "field": "pop__11",
                                    "fieldfx": "SUM(b.pop__11)",
                                    "title": "Population 2011"
                                },
                                {
                                    "field": "pop_growth",
                                    "fieldfx": "SUM(b.pop__17 - b.pop__11) * 100 / SUM(b.pop__11)",
                                    "title": "Population Growth"
                                },
                                {
                                    "field": "students",
                                    "fieldfx": "SUM(eac_student__11) + SUM(ein_student__11)",
                                    "title": "Students"
                                },
                                {
                                    "field": "non_white",
                                    "fieldfx": "100*(SUM(pop__11) - SUM(ret_white_tot__11))/SUM(pop__11)",
                                    "title": "% Non-White"
                                },
                                {
                                    "field": "own_home",
                                    "fieldfx": "100*SUM(own)/SUM(own+rent+social)",
                                    "title": "Own Home"
                                },
                                {
                                    "field": "private_rented",
                                    "fieldfx": "100*SUM(rent)/SUM(own+rent+social)",
                                    "title": "Private Rented"
                                },
                                {
                                    "field": "social_rented",
                                    "fieldfx": "100*SUM(social)/SUM(own+rent+social)",
                                    "title": "Social Rented"
                                },
                                {
                                    "field": "single_hhds",
                                    "fieldfx": "100*SUM(pers1hhd)/SUM(pers1hhd+pers2hhd+pers2plushhd)",
                                    "title": "Single Hhds"
                                },
                                {
                                    "field": "hhds_two_ppl",
                                    "fieldfx": "100*SUM(pers2hhd)/SUM(pers1hhd+pers2hhd+pers2plushhd)",
                                    "title": "2 Person Hhds"
                                },
                                {
                                    "field": "hhds_3plus",
                                    "fieldfx": "100*SUM(pers2plushhd)/SUM(pers1hhd+pers2hhd+pers2plushhd)",
                                    "title": "3+ Hhds"
                                }
                            ]
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Worker Summary",
                            "display": true,
                            "target_id": "xyz_table8",
                            "columns": [
                                {
                                    "type": "integer",
                                    "title": "Total Workers",
                                    "field": "workers",
                                    "lookup": {
                                        "table_a": "mb.house_list",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geom_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                }
                            ],
                            "rows": [
                                {
                                    "field": "workers_250",
                                    "fieldfx": "SUM(case when ST_distance(ST_Transform(a.geom_4326,27700),ST_transform(b.geom_p_4326,27700))<=250 then b.workers else 0 end)",
                                    "title": "Workers 250m"
                                },
                                {
                                    "field": "workers_500",
                                    "fieldfx": "SUM(case when ST_distance(ST_Transform(a.geom_4326,27700),ST_transform(b.geom_p_4326,27700))<=500 then b.workers else 0 end)",
                                    "title": "Workers 500m"
                                }
                            ]
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Age Profile",
                            "display": true,
                            "target_id": "xyz_table2",
                            "columns": [
                                {
                                    "type": "integer",
                                    "title": "0-5 mins",
                                    "field": "min5",
                                    "lookup": {
                                        "table_a": "mb.house_list",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_5min",
                                        "geom_b": "geom_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "0-10 mins",
                                    "field": "min10",
                                    "lookup": {
                                        "table_a": "mb.house_list",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_10min",
                                        "geom_b": "geom_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "title": "0-15 mins",
                                    "field": "min15",
                                    "lookup": {
                                        "table_a": "mb.house_list",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geom_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "field": "uk",
                                    "aspatial": "age_under_18_uk, age_18to24_uk, age_25to29_uk, age_30to44_uk, age_45to59_uk, age_60plus_uk, age_total_uk FROM geodata.uk_glx_geodata_demog_national_totals"
                                }
                            ],
                            "rows": [
                                {
                                    "field": "age_under_18",
                                    "title": "< 18",
                                    "fieldfx": "round(SUM(pop__11 - age_18to19__11 - age_20to24__11 - age_25to29__11 - age_30to44__11 - age_45to59__11 - age60plus))"
                                },
                                {
                                    "field": "age_18to24",
                                    "fieldfx": "round(SUM(age_18to19__11 + age_20to24__11))",
                                    "title": "18 to 24"
                                },
                                {
                                    "field": "age_25to29",
                                    "fieldfx": "round(SUM(age_25to29__11))",
                                    "title": "25 to 29"
                                },
                                {
                                    "field": "age_30to44",
                                    "fieldfx": "round(SUM(age_30to44__11))",
                                    "title": "30 to 44"
                                },
                                {
                                    "field": "age_45to59",
                                    "fieldfx": "round(SUM(age_45to59__11))",
                                    "title": "45 to 59"
                                },
                                {
                                    "field": "age_60plus",
                                    "fieldfx": "round(SUM(age60plus))",
                                    "title": "60+"
                                },
                                {
                                    "field": "age_profile_total",
                                    "fieldfx": "round(SUM(pop__11))",
                                    "title": "Total"
                                }
                            ],
                            "agg": {
                                "share15": {
                                    "title": "% with 15 min",
                                    "type": "integer",
                                    "rows": [
                                        "100*min15.age_under_18/min15.age_profile_total",
                                        "100*min15.age_18to24/min15.age_profile_total",
                                        "100*min15.age_25to29/min15.age_profile_total",
                                        "100*min15.age_30to44/min15.age_profile_total",
                                        "100*min15.age_45to59/min15.age_profile_total",
                                        "100*min15.age_60plus/min15.age_profile_total",
                                        "100*min15.age_profile_total/min15.age_profile_total"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                "age_uk_total": {
                                    "title": "UK %",
                                    "type": "integer",
                                    "rows": [
                                        "uk.age_under_18_uk*100/uk.age_total_uk",
                                        "uk.age_18to24_uk*100/uk.age_total_uk",
                                        "uk.age_25to29_uk*100/uk.age_total_uk",
                                        "uk.age_30to44_uk*100/uk.age_total_uk",
                                        "uk.age_45to59_uk*100/uk.age_total_uk",
                                        "uk.age_60plus_uk*100/uk.age_total_uk",
                                        "uk.age_total_uk*100/uk.age_total_uk"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                "age_index": {
                                    "title": "Age Profile Index",
                                    "type": "integer",
                                    "align": "right",
                                    "formatter": "progress",
                                    "formatterParams": {
                                        "strokeColor": [
                                            "rgba(211, 47, 47, 0.7)",
                                            "rgba(56, 142, 60, 0.7)"
                                        ],
                                        "legend": true,
                                        "legendAlign": "right",
                                        "max": 200
                                    },
                                    "width": 200,
                                    "sorter": "number",
                                    "rows": [
                                        "uk.age_total_uk*(100*min15.age_under_18/min15.age_profile_total)/uk.age_under_18_uk",
                                        "uk.age_total_uk*(100*min15.age_18to24/min15.age_profile_total)/uk.age_18to24_uk",
                                        "uk.age_total_uk*(100*min15.age_25to29/min15.age_profile_total)/uk.age_25to29_uk",
                                        "uk.age_total_uk*(100*min15.age_30to44/min15.age_profile_total)/uk.age_30to44_uk",
                                        "uk.age_total_uk*(100*min15.age_45to59/min15.age_profile_total)/uk.age_45to59_uk",
                                        "uk.age_total_uk*(100*min15.age_60plus/min15.age_profile_total)/uk.age_60plus_uk",
                                        "uk.age_total_uk*(100*min15.age_profile_total/min15.age_profile_total)/uk.age_total_uk"
                                    ]
                                }
                            }
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Acorn Catchment Profile",
                            "target_id": "xyz_acorn",
                            "class": "hidden_in_report",
                            "display": true,
                            "columns": [
                                {
                                    "type": "numeric",
                                    "title": "0-5 mins",
                                    "field": "min5",
                                    "lookup": {
                                        "table_a": "mb.house_list",
                                        "table_b": "mb.output_area",
                                        "geom_a": "isoline_5min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "center",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "title": "0-10 mins",
                                    "field": "min10",
                                    "lookup": {
                                        "table_a": "mb.house_list",
                                        "table_b": "mb.output_area",
                                        "geom_a": "isoline_10min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "center",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "title": "0-15 mins",
                                    "field": "min15",
                                    "lookup": {
                                        "table_a": "mb.house_list",
                                        "table_b": "mb.output_area",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "center",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "field": "uk",
                                    "aspatial": "lavish_lifestyles, executive_wealth, mature_money, city_sophisticates, career_climbers, countryside_communities, successful_suburbs, steady_neighbourhoods, comfortable_seniors, starting_out, student_life, modest_means, striving_families, poorer_pensioners, young_hardship, struggling_estates, difficult_circumstances, not_private_households, total_pop FROM mb.uk_acorn_groups_regional where region = 'UK'"
                                }
                            ],
                            "rows": [
                                {
                                    "field": "lavish_lifestyles",
                                    "fieldfx": "SUM(COALESCE(b.lavish_lifestyles))",
                                    "title": "Lavish Lifestyles"
                                },
                                {
                                    "field": "executive_wealth",
                                    "fieldfx": "SUM(COALESCE(b.executive_wealth))",
                                    "title": "Executive Wealth"
                                },
                                {
                                    "field": "mature_money",
                                    "fieldfx": "SUM(COALESCE(b.mature_money))",
                                    "title": "Mature Money"
                                },
                                {
                                    "field": "city_sophisticates",
                                    "fieldfx": "SUM(COALESCE(b.city_sophisticates))",
                                    "title": "City Sophisticates"
                                },
                                {
                                    "field": "career_climbers",
                                    "fieldfx": "SUM(COALESCE(b.career_climbers))",
                                    "title": "Career Climbers"
                                },
                                {
                                    "field": "countryside_communities",
                                    "fieldfx": "SUM(COALESCE(b.countryside_communities))",
                                    "title": "Countryside Communities"
                                },
                                {
                                    "field": "successful_suburbs",
                                    "fieldfx": "SUM(COALESCE(b.successful_suburbs))",
                                    "title": "Successful Suburbs"
                                },
                                {
                                    "field": "steady_neighbourhoods",
                                    "fieldfx": "SUM(COALESCE(b.steady_neighbourhoods))",
                                    "title": "Steady Neighbourhoods"
                                },
                                {
                                    "field": "comfortable_seniors",
                                    "fieldfx": "SUM(COALESCE(b.comfortable_seniors))",
                                    "title": "Comfortable Seniors"
                                },
                                {
                                    "field": "starting_out",
                                    "fieldfx": "SUM(COALESCE(b.starting_out))",
                                    "title": "Starting Out"
                                },
                                {
                                    "field": "student_life",
                                    "fieldfx": "SUM(COALESCE(b.student_life))",
                                    "title": "Student Life"
                                },
                                {
                                    "field": "modest_means",
                                    "fieldfx": "SUM(COALESCE(b.modest_means))",
                                    "title": "Modest Means"
                                },
                                {
                                    "field": "striving_families",
                                    "fieldfx": "SUM(COALESCE(b.striving_families))",
                                    "title": "Striving Families"
                                },
                                {
                                    "field": "poorer_pensioners",
                                    "fieldfx": "SUM(COALESCE(b.poorer_pensioners))",
                                    "title": "Poorer Pensioners"
                                },
                                {
                                    "field": "young_hardship",
                                    "fieldfx": "SUM(COALESCE(b.young_hardship))",
                                    "title": "Young Hardship"
                                },
                                {
                                    "field": "struggling_estates",
                                    "fieldfx": "SUM(COALESCE(b.struggling_estates))",
                                    "title": "Struggling Estates"
                                },
                                {
                                    "field": "difficult_circumstances",
                                    "fieldfx": "SUM(COALESCE(b.difficult_circumstances))",
                                    "title": "Difficult Circumstances"
                                },
                                {
                                    "field": "not_private_households",
                                    "fieldfx": "SUM(COALESCE(b.not_private_households))",
                                    "title": "Not Private Households"
                                },
                                {
                                    "field": "total_pop",
                                    "fieldfx": "SUM(COALESCE(b.total_pop))",
                                    "title": "ACORN Total"
                                }
                            ],
                            "agg": {
                                "share15": {
                                    "title": "% with 15 min",
                                    "rows": [
                                        "100*min15.lavish_lifestyles/min15.total_pop",
                                        "100*min15.executive_wealth/min15.total_pop",
                                        "100*min15.mature_money/min15.total_pop",
                                        "100*min15.city_sophisticates/min15.total_pop",
                                        "100*min15.career_climbers/min15.total_pop",
                                        "100*min15.countryside_communities/min15.total_pop",
                                        "100*min15.successful_suburbs/min15.total_pop",
                                        "100*min15.steady_neighbourhoods/min15.total_pop",
                                        "100*min15.comfortable_seniors/min15.total_pop",
                                        "100*min15.starting_out/min15.total_pop",
                                        "100*min15.student_life/min15.total_pop",
                                        "100*min15.modest_means/min15.total_pop",
                                        "100*min15.striving_families/min15.total_pop",
                                        "100*min15.poorer_pensioners/min15.total_pop",
                                        "100*min15.young_hardship/min15.total_pop",
                                        "100*min15.struggling_estates/min15.total_pop",
                                        "100*min15.difficult_circumstances/min15.total_pop",
                                        "100*min15.not_private_households/min15.total_pop"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 1
                                    }
                                },
                                "uk_perc": {
                                    "title": "UK %",
                                    "rows": [
                                        "100*uk.lavish_lifestyles/uk.total_pop",
                                        "100*uk.executive_wealth/uk.total_pop",
                                        "100*uk.mature_money/uk.total_pop",
                                        "100*uk.city_sophisticates/uk.total_pop",
                                        "100*uk.career_climbers/uk.total_pop",
                                        "100*uk.countryside_communities/uk.total_pop",
                                        "100*uk.successful_suburbs/uk.total_pop",
                                        "100*uk.steady_neighbourhoods/uk.total_pop",
                                        "100*uk.comfortable_seniors/uk.total_pop",
                                        "100*uk.starting_out/uk.total_pop",
                                        "100*uk.student_life/uk.total_pop",
                                        "100*uk.modest_means/uk.total_pop",
                                        "100*uk.striving_families/uk.total_pop",
                                        "100*uk.poorer_pensioners/uk.total_pop",
                                        "100*uk.young_hardship/uk.total_pop",
                                        "100*uk.struggling_estates/uk.total_pop",
                                        "100*uk.difficult_circumstances/uk.total_pop",
                                        "100*uk.not_private_households/uk.total_pop"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 1
                                    }
                                },
                                "acorn_index": {
                                    "title": "ACORN Index",
                                    "type": "integer",
                                    "formatter": "progress",
                                    "formatterParams": {
                                        "strokeColor": [
                                            "rgba(211, 47, 47, 0.7)",
                                            "rgba(56, 142, 60, 0.7)"
                                        ],
                                        "max": 200,
                                        "legend": true,
                                        "legendAlign": "right"
                                    },
                                    "width": 200,
                                    "sorter": "number",
                                    "rows": [
                                        "uk.total_pop*(100*min15.lavish_lifestyles/min15.total_pop)/uk.lavish_lifestyles",
                                        "uk.total_pop*(100*min15.executive_wealth/min15.total_pop)/uk.executive_wealth",
                                        "uk.total_pop*(100*min15.mature_money/min15.total_pop)/uk.mature_money",
                                        "uk.total_pop*(100*min15.city_sophisticates/min15.total_pop)/uk.city_sophisticates",
                                        "uk.total_pop*(100*min15.career_climbers/min15.total_pop)/uk.career_climbers",
                                        "uk.total_pop*(100*min15.countryside_communities/min15.total_pop)/uk.countryside_communities",
                                        "uk.total_pop*(100*min15.successful_suburbs/min15.total_pop)/uk.successful_suburbs",
                                        "uk.total_pop*(100*min15.steady_neighbourhoods/min15.total_pop)/uk.steady_neighbourhoods",
                                        "uk.total_pop*(100*min15.comfortable_seniors/min15.total_pop)/uk.comfortable_seniors",
                                        "uk.total_pop*(100*min15.starting_out/min15.total_pop)/uk.starting_out",
                                        "uk.total_pop*(100*min15.student_life/min15.total_pop)/uk.student_life",
                                        "uk.total_pop*(100*min15.modest_means/min15.total_pop)/uk.modest_means",
                                        "uk.total_pop*(100*min15.striving_families/min15.total_pop)/uk.striving_families",
                                        "uk.total_pop*(100*min15.poorer_pensioners/min15.total_pop)/uk.poorer_pensioners",
                                        "uk.total_pop*(100*min15.young_hardship/min15.total_pop)/uk.young_hardship",
                                        "uk.total_pop*(100*min15.struggling_estates/min15.total_pop)/uk.struggling_estates",
                                        "uk.total_pop*(100*min15.difficult_circumstances/min15.total_pop)/uk.difficult_circumstances",
                                        "uk.total_pop*(100*min15.not_private_households/min15.total_pop)/uk.not_private_households"
                                    ]
                                }
                            }
                        },
                        {
                            "type": "streetview"
                        },
                        {
                            "type": "orderedList",
                            "title": "Nearest competitors",
                            "display": true,
                            "from": "mb.house_list a, mb.competition b",
                            "where": "a.buncode = $1",
                            "orderby": "ST_DistanceSphere(a.geom_4326, b.geom_4326)",
                            "limit": 20,
                            "columns": [
                                {
                                    "title": "CGA ID",
                                    "field": "cga_identifier",
                                    "fieldfx": "b.cga_identifier",
                                    "align": "right"
                                },
                                {
                                    "title": "Site name",
                                    "field": "site_name",
                                    "fieldfx": "b.site_name"
                                },
                                {
                                    "title": "Brand",
                                    "field": "brand_name",
                                    "fieldfx": "b.brand_name"
                                },
                                {
                                    "title": "Owner Name",
                                    "field": "owner_name",
                                    "fieldfx": "b.owner_name"
                                },
                                {
                                    "title": "Owner Group",
                                    "field": "owner_group",
                                    "fieldfx": "b.owner_group"
                                },
                                {
                                    "title": "Licence",
                                    "field": "site_licence_name",
                                    "fieldfx": "b.site_licence_name"
                                },
                                {
                                    "title": "Type",
                                    "field": "main_comp_display",
                                    "fieldfx": "b.main_comp_display"
                                },
                                {
                                    "title": "Postcode",
                                    "field": "postcode",
                                    "fieldfx": "b.postcode"
                                },
                                {
                                    "title": "Distance (km)",
                                    "field": "dist",
                                    "fieldfx": "ST_DistanceSphere(a.geom_4326, b.geom_4326) / 1000",
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 1
                                    }
                                }
                            ]
                        },
                        {
                            "type": "orderedList",
                            "title": "Nearest MB Pubs",
                            "display": true,
                            "from": "mb.house_list a, mb.house_list b",
                            "where": "a.buncode = $1 AND a.buncode <> b.buncode",
                            "orderby": "ST_DistanceSphere(a.geom_4326, b.geom_4326)",
                            "limit": 20,
                            "columns": [
                                {
                                    "field": "short_name",
                                    "fieldfx": "b.short_name",
                                    "title": "Name"
                                },
                                {
                                    "field": "brand_name",
                                    "fieldfx": "b.brand_name",
                                    "title": "Brand"
                                },
                                {
                                    "field": "postcode",
                                    "fieldfx": "b.postcode",
                                    "title": "Post Code"
                                },
                                {
                                    "field": "location_type",
                                    "fieldfx": "b.location_type",
                                    "title": "Location Type"
                                },
                                {
                                    "title": "Distance (km)",
                                    "field": "dist",
                                    "fieldfx": "ST_DistanceSphere(a.geom_4326, b.geom_4326) / 1000",
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 1
                                    }
                                }
                            ]
                        }
                    ],
                    "style": {
                        "label": {
                            "field": "short_name",
                            "display": false,
                            "declutter": true,
                            "strokeColor": "#fff",
                            "strokeWidth": 3
                        },
                        "marker": {
                            "type": "target",
                            "fillColor": "#BFC9CA"
                        },
                        "markerMulti": {
                            "type": "target",
                            "fillColor": "#BFC9CA"
                        },
                        "highlight": {
                            "type": "target",
                            "fillColor": "#9c27b0",
                            "svg": null,
                            "anchor": [
                                0.5,
                                0.5
                            ],
                            "scale": 0.05
                        },
                        "themes": {
                            "Brand": {
                                "label": "Brand",
                                "type": "categorized",
                                "field": "crmbrandname",
                                "other": true,
                                "cat": {
                                    "All Bar One": {
                                        "label": "All Bar One",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/all_bar_one.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Browns": {
                                        "label": "Browns",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/browns.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Castle": {
                                        "label": "Castle",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/castle.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Ember": {
                                        "label": "Ember",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/ember.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Harvester": {
                                        "label": "Harvester",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/harvester.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Miller and Carter": {
                                        "label": "Miller & Carter",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/miller_carter.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Nicholsons": {
                                        "label": "Nicholsons",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/nicholsons.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Oak Tree - High Street": {
                                        "label": "Oak Tree",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/oaktree.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Oak Tree - Suburban": {
                                        "label": "Oak Tree",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/oaktree.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "O Neills": {
                                        "label": "O'Neill's",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/oneills.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Premium Country Pubs": {
                                        "label": "Premium Country Pubs",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/premium_country.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Sizzling Pubs": {
                                        "label": "Sizzling Pubs",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/sizzling.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Toby Carvery": {
                                        "label": "Toby Carvery",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/toby.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Vintage Inns": {
                                        "label": "Vintage Inns",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/vintage.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    },
                                    "Stonehouse Pizza and Carvery": {
                                        "label": "Stonehouse Pizza & Carvery",
                                        "svg": "https://cdn.jsdelivr.net/gh/GEOLYTIX/MapIcons/poi_pubs/stonehouse.svg",
                                        "scale": 0.2,
                                        "anchor": [
                                            0.5,
                                            0.95
                                        ]
                                    }
                                }
                            },
                            "Brand (simple)": {
                                "label": "Brand (simple)",
                                "type": "categorized",
                                "field": "crmbrandname",
                                "other": true,
                                "cat": {
                                    "All Bar One": {
                                        "label": "All Bar One",
                                        "style": {
                                            "fillColor": "#8E774D"
                                        }
                                    },
                                    "Browns": {
                                        "label": "Browns",
                                        "style": {
                                            "fillColor": "#728184"
                                        }
                                    },
                                    "Castle": {
                                        "label": "Castle",
                                        "style": {
                                            "fillColor": "#9FB2B9"
                                        }
                                    },
                                    "Ember": {
                                        "label": "Ember",
                                        "style": {
                                            "fillColor": "#333333"
                                        }
                                    },
                                    "Franchise": {
                                        "label": "Franchise",
                                        "style": {
                                            "fillColor": "#F4C000"
                                        }
                                    },
                                    "Harvester": {
                                        "label": "Harvester",
                                        "style": {
                                            "fillColor": "#327C61"
                                        }
                                    },
                                    "Miller and Carter": {
                                        "label": "Miller & Carter",
                                        "style": {
                                            "fillColor": "#BC8F4B",
                                            "layers": {
                                                "0.50": "#000"
                                            }
                                        }
                                    },
                                    "Nicholsons": {
                                        "label": "Nicholsons",
                                        "style": {
                                            "fillColor": "#60291c",
                                            "layers": {
                                                "0.50": "#E5DED1"
                                            }
                                        }
                                    },
                                    "Oak Tree - High Street": {
                                        "label": "Oak Tree",
                                        "style": {
                                            "fillColor": "#ABA444"
                                        }
                                    },
                                    "Oak Tree - Suburban": {
                                        "label": "Oak Tree",
                                        "style": {
                                            "fillColor": "#ABA444"
                                        }
                                    },
                                    "O Neills": {
                                        "label": "O'Neill's",
                                        "style": {
                                            "fillColor": "#706B5D"
                                        }
                                    },
                                    "Premium Country Pubs": {
                                        "label": "Premium Country Pubs",
                                        "style": {
                                            "fillColor": "#ADD199"
                                        }
                                    },
                                    "Sizzling Pubs": {
                                        "label": "Sizzling Pubs",
                                        "style": {
                                            "fillColor": "#2EA1BE"
                                        }
                                    },
                                    "Toby Carvery": {
                                        "label": "Toby Carvery",
                                        "style": {
                                            "fillColor": "#7E1C33"
                                        }
                                    },
                                    "Vintage Inns": {
                                        "label": "Vintage Inns",
                                        "style": {
                                            "fillColor": "#5A2D4C"
                                        }
                                    },
                                    "Stonehouse Pizza and Carvery": {
                                        "label": "Stonehouse Pizza & Carvery",
                                        "style": {
                                            "fillColor": "#239CBA"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "roles": {
                        "lite": null
                    }
                },
                "Competitors": {
                    "format": "cluster",
                    "dbs": "MB",
                    "edit": {
                        "properties": true
                    },
                    "table": "mb.competition",
                    "geom": "geom_4326",
                    "srid": "4326",
                    "qID": "cga_identifier",
                    "cluster_label": "site_name",
                    "cluster_kmeans": 0.01,
                    "hover": {
                        "field": "site_name"
                    },
                    "dataview": {
                        "Competitors": {
                            "display": true,
                            "from": "mb.competition",
                            "toolbars": {},
                            "columns": [
                                {
                                    "title": "CGA ID",
                                    "field": "cga_identifier",
                                    "align": "right"
                                },
                                {
                                    "title": "Site name",
                                    "field": "site_name"
                                },
                                {
                                    "title": "Brand",
                                    "field": "brand_name"
                                },
                                {
                                    "title": "Owner Name",
                                    "field": "owner_name"
                                },
                                {
                                    "title": "Owner Group",
                                    "field": "owner_group"
                                },
                                {
                                    "title": "Licence",
                                    "field": "site_licence_name"
                                },
                                {
                                    "title": "Type",
                                    "field": "main_comp_display"
                                },
                                {
                                    "title": "Postcode",
                                    "field": "postcode"
                                }
                            ]
                        }
                    },
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "field": "main_comp_display",
                            "label": "Competitor Type",
                            "type": "text",
                            "filter": {
                                "in": [
                                    "Pub",
                                    "Restaurant",
                                    "Food Pub",
                                    "Nightclub",
                                    "Unknown"
                                ]
                            }
                        },
                        {
                            "field": "cga_edition",
                            "label": "CGA Edition",
                            "type": "text"
                        },
                        {
                            "field": "cga_identifier",
                            "label": "CGA Identifier",
                            "type": "text"
                        },
                        {
                            "field": "site_name",
                            "label": "Site Name",
                            "type": "text"
                        },
                        {
                            "field": "address",
                            "label": "Address",
                            "type": "text"
                        },
                        {
                            "field": "postcode",
                            "label": "Post Code",
                            "type": "text"
                        },
                        {
                            "field": "site_licence_name",
                            "label": "Site Licence Name",
                            "type": "text"
                        },
                        {
                            "field": "owner_name",
                            "label": "Owner Name",
                            "type": "text",
                            "filter": "like"
                        },
                        {
                            "field": "owner_group",
                            "label": "Owner Group",
                            "type": "text",
                            "filter": "like"
                        },
                        {
                            "field": "tenure_name",
                            "label": "Tenure Name",
                            "type": "text"
                        },
                        {
                            "field": "drinks_places_name",
                            "label": "Drink Places Name",
                            "type": "text"
                        },
                        {
                            "field": "brand_name",
                            "label": "Brand/Fascia Name",
                            "type": "text",
                            "filter": "like"
                        },
                        {
                            "type": "streetview"
                        }
                    ],
                    "style": {
                        "label": {
                            "field": "site_name",
                            "display": false,
                            "declutter": true,
                            "strokeColor": "#ffffff",
                            "strokeWidth": 3
                        },
                        "marker": {
                            "type": "target",
                            "fillColor": "#A2BCF4",
                            "layers": {
                                "0.50": "#ffffff"
                            }
                        },
                        "markerMulti": {
                            "type": "target",
                            "fillColor": "#A2BCF4"
                        },
                        "themes": {
                            "Competition Type": {
                                "label": "Competition Type",
                                "type": "categorized",
                                "field": "main_comp_display",
                                "other": true,
                                "cat": {
                                    "Restaurant": {
                                        "label": "Restaurant",
                                        "style": {
                                            "fillColor": "#70AD47",
                                            "layers": {
                                                "0.50": "#ffffff"
                                            }
                                        }
                                    },
                                    "Food Pub": {
                                        "label": "Food Pub",
                                        "style": {
                                            "fillColor": "#254E70",
                                            "layers": {
                                                "0.50": "#ffffff"
                                            }
                                        }
                                    },
                                    "Pub": {
                                        "label": "Pub",
                                        "style": {
                                            "fillColor": "#EE335D",
                                            "layers": {
                                                "0.50": "#ffffff"
                                            }
                                        }
                                    },
                                    "Nightclub": {
                                        "label": "Nightclub",
                                        "style": {
                                            "fillColor": "#ED7D31",
                                            "layers": {
                                                "0.50": "#ffffff"
                                            }
                                        }
                                    }
                                }
                            },
                            "Owner Group": {
                                "label": "Owner Group",
                                "type": "categorized",
                                "field": "owner_group",
                                "other": true,
                                "cat": {
                                    "Independent": {
                                        "label": "Independent",
                                        "style": {
                                            "fillColor": "#33EE74",
                                            "layers": {
                                                "0.50": "#EE33AD"
                                            }
                                        }
                                    },
                                    "Large Hotel Group": {
                                        "label": "Large Hotel Group",
                                        "style": {
                                            "fillColor": "#EE335D",
                                            "layers": {
                                                "0.50": "#33EEC4"
                                            }
                                        }
                                    },
                                    "Large Pub Group": {
                                        "label": "Large Pub Group",
                                        "style": {
                                            "fillColor": "#5DEE33",
                                            "layers": {
                                                "0.50": "#33EEC4"
                                            }
                                        }
                                    },
                                    "Large Restaurant Group": {
                                        "label": "Large Restaurant Group",
                                        "style": {
                                            "fillColor": "#335DEE",
                                            "layers": {
                                                "0.50": "#33EEC4"
                                            }
                                        }
                                    },
                                    "Medium Hotel Group": {
                                        "label": "Medium Hotel Group",
                                        "style": {
                                            "fillColor": "#EE335D",
                                            "layers": {
                                                "0.50": "#C433EE"
                                            }
                                        }
                                    },
                                    "Medium Pub Group": {
                                        "label": "Medium Pub Group",
                                        "style": {
                                            "fillColor": "#5DEE33",
                                            "layers": {
                                                "0.50": "#C433EE"
                                            }
                                        }
                                    },
                                    "Small Hotel Group": {
                                        "label": "Small Hotel Group",
                                        "style": {
                                            "fillColor": "#EE335D",
                                            "layers": {
                                                "0.50": "#EEC433"
                                            }
                                        }
                                    },
                                    "Small Pub Group": {
                                        "label": "Small Pub Group",
                                        "style": {
                                            "fillColor": "#5DEE33",
                                            "layers": {
                                                "0.50": "#EEC433"
                                            }
                                        }
                                    },
                                    "Small Restaurant Group": {
                                        "label": "Small Restaurant Group",
                                        "style": {
                                            "fillColor": "#335DEE",
                                            "layers": {
                                                "0.50": "#EEC433"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "Sites": {
                    "edit": {
                        "properties": true,
                        "point": true,
                        "delete": true
                    },
                    "format": "cluster",
                    "geom": "geom_4326",
                    "srid": "4326",
                    "dbs": "MB",
                    "qID": "id",
                    "table": "live.house_list_site",
                    "cluster_label": "short_name",
                    "infoj": [
                        {
                            "type": "key",
                            "class": "hidden_in_report"
                        },
                        {
                            "type": "report",
                            "class": "hidden_in_report",
                            "report": {
                                "name": "High Level Report",
                                "template": "https://api.github.com/repos/GEOLYTIX/xyz_resources/contents/mb/report_v2.html"
                            }
                        },
                        {
                            "field": "id",
                            "label": "ID",
                            "inline": true,
                            "class": "hidden_in_report"
                        },
                        {
                            "field": "short_name",
                            "label": "Site Name",
                            "edit": true,
                            "inline": true
                        },
                        {
                            "label": "Town",
                            "field": "intersecting_town",
                            "fieldfx": "SELECT b.town_name FROM live.house_list_site a, geodata.uk_glx_geodata_seamless_town b WHERE a.id = $1 AND ST_Contains(b.geom_4326, a.geom_4326) LIMIT 1",
                            "inline": true
                        },
                        {
                            "label": "Shoppertown",
                            "field": "intersecting_shoptown",
                            "fieldfx": "SELECT b.shop_town FROM live.house_list_site a, geodata.uk_glx_geodata_seamless_shopper_town b WHERE a.id = $1 AND ST_Contains(b.geom_4326, a.geom_4326) LIMIT 1",
                            "inline": true
                        },
                        {
                            "label": "Shoppertown population",
                            "field": "intersecting_shoptown_pop",
                            "fieldfx": "SELECT b.pop FROM live.house_list_site a, geodata.uk_glx_geodata_seamless_shopper_town b WHERE a.id = $1 AND ST_Contains(b.geom_4326, a.geom_4326) LIMIT 1",
                            "type": "integer",
                            "inline": true
                        },
                        {
                            "field": "postcode",
                            "label": "Postal Code",
                            "edit": true,
                            "inline": true
                        },
                        {
                            "field": "review_stage",
                            "label": "Review Stage",
                            "inline": true,
                            "edit": {
                                "options": [
                                    "Lead",
                                    "SEP Issued",
                                    "Endorsed by DD",
                                    "PDC Approved",
                                    "Open Trading",
                                    "Rejected",
                                    "other",
                                    ""
                                ]
                            }
                        },
                        {
                            "field": "surveyor_name",
                            "label": "Acquisition Manager",
                            "edit": true,
                            "inline": true
                        },
                        {
                            "label": "Model Drivers",
                            "type": "label"
                        },
                        {
                            "field": "crmbrandname",
                            "label": "Potential Brand",
                            "inline": true,
                            "edit": {
                                "options": [
                                    "All Bar One",
                                    "Browns",
                                    "Castle",
                                    "Ember",
                                    "Harvester",
                                    "Miller and Carter",
                                    "Nicholsons",
                                    "Oak Tree - Suburban",
                                    "Oak Tree - High Street",
                                    "O Neills",
                                    "Premium Country Pubs",
                                    "Sizzling Pubs",
                                    "Toby Carvery",
                                    "Vintage Inns",
                                    "Other",
                                    ""
                                ]
                            }
                        },
                        {
                            "field": "building_total_internal_eda",
                            "label": "Internal EDA",
                            "edit": true,
                            "type": "integer"
                        },
                        {
                            "field": "building_total_internal_covers",
                            "label": "Internal Covers",
                            "edit": true,
                            "type": "integer"
                        },
                        {
                            "field": "building_total_external_eda",
                            "label": "External EDA",
                            "edit": true,
                            "type": "integer"
                        },
                        {
                            "field": "building_total_external_covers",
                            "label": "External Covers",
                            "edit": true,
                            "type": "integer"
                        },
                        {
                            "field": "building_total_car_parking_spac",
                            "label": "Car Parking Spaces",
                            "edit": true,
                            "type": "integer"
                        },
                        {
                            "field": "model_sales",
                            "label": "Site Feasibility Forecast",
                            "type": "integer"
                        },
                        {
                            "field": "reason_rejection",
                            "label": "Reason of Rejection",
                            "type": "textarea",
                            "edit": true
                        },
                        {
                            "label": "Drivetimes",
                            "type": "label"
                        },
                        {
                            "name": "5 min",
                            "field": "isoline_5min",
                            "fieldfx": "ST_asGeoJson(isoline_5min)",
                            "type": "geometry",
                            "display": true,
                            "level": 2,
                            "edit": {
                                "isoline_here": {
                                    "minutes": 5
                                }
                            },
                            "style": {
                                "strokeColor": "#BB0A21",
                                "fillColor": "#BB0A21",
                                "fill": true,
                                "fillOpacity": 0.2
                            }
                        },
                        {
                            "name": "10 min",
                            "field": "isoline_10min",
                            "fieldfx": "ST_asGeoJson(isoline_10min)",
                            "type": "geometry",
                            "display": true,
                            "level": 2,
                            "edit": {
                                "isoline_here": {
                                    "minutes": 10
                                }
                            },
                            "style": {
                                "strokeColor": "#F49D37",
                                "fillColor": "#F49D37",
                                "fillOpacity": 0.2,
                                "strokeWidth": 2
                            }
                        },
                        {
                            "name": "15 min",
                            "field": "isoline_15min",
                            "fieldfx": "ST_asGeoJson(isoline_15min)",
                            "type": "geometry",
                            "display": true,
                            "level": 2,
                            "edit": {
                                "isoline_here": {
                                    "minutes": 15
                                }
                            },
                            "style": {
                                "strokeColor": "#FFF05A",
                                "fillColor": "#FFF05A",
                                "strokeWidth": 2,
                                "fillOpacity": 0.2
                            }
                        },
                        {
                            "name": "30 min",
                            "field": "isoline_30min",
                            "fieldfx": "ST_asGeoJson(isoline_30min)",
                            "type": "geometry",
                            "display": true,
                            "level": 2,
                            "edit": {
                                "isoline_here": {
                                    "minutes": 30
                                }
                            },
                            "style": {
                                "strokeColor": "#26a69a",
                                "fillColor": "#26a69a",
                                "strokeWidth": 2,
                                "fillOpacity": 0.2
                            }
                        },
                        {
                            "label": "Available Dashboards",
                            "type": "label",
                            "class": "_report"
                        },
                        {
                            "type": "dashboard",
                            "title": "Sales Forecast Drivers",
                            "display": true,
                            "class": "_report"
                        },
                        {
                            "label": "Radar Chart",
                            "type": "group",
                            "dashboard": "Sales Forecast Drivers",
                            "class": "_report",
                            "chart": {
                                "width": 400,
                                "height": 400,
                                "title": true,
                                "legend": true,
                                "legendPosition": "bottom",
                                "type": "radar",
                                "backgroundColor": [
                                    "rgba(233, 30, 99, 0.3)",
                                    "rgba(3, 169, 244, 0.3)",
                                    "rgba(255, 255, 255, 0)"
                                ],
                                "fillOpacity": 0.3,
                                "borderColor": [
                                    "rgba(233, 30, 99, 0.7)",
                                    "rgba(3, 169, 244, 0.7)",
                                    "rgba(255, 255, 255, 0)"
                                ]
                            }
                        },
                        {
                            "group": "Radar Chart",
                            "field": "_model_brand_acorn_ratio_adjustment",
                            "fieldfx": "(model_brand_acorn_ratio_adjustment*100)+100",
                            "type": "integer",
                            "label": "ACORN ratio",
                            "dataset": "Model"
                        },
                        {
                            "group": "Radar Chart",
                            "field": "_model_brand_loctype_adjustment",
                            "fieldfx": "(model_brand_loctype_adjustment*100)+100",
                            "type": "integer",
                            "label": "Location",
                            "dataset": "Model"
                        },
                        {
                            "group": "Radar Chart",
                            "field": "_model_stown_cga_adjustment",
                            "fieldfx": "(model_stown_cga_adjustment*100)+100",
                            "type": "integer",
                            "label": "Competition",
                            "dataset": "Model"
                        },
                        {
                            "group": "Radar Chart",
                            "field": "_model_brand_region_adjustment",
                            "fieldfx": "(model_brand_region_adjustment*100)+100",
                            "type": "integer",
                            "label": "Region",
                            "dataset": "Model"
                        },
                        {
                            "group": "Radar Chart",
                            "field": "_model_brand_acorn_pop_adjustment",
                            "fieldfx": "(model_brand_acorn_pop_adjustment*100)+100",
                            "type": "integer",
                            "label": "ACORN Population",
                            "dataset": "Model"
                        },
                        {
                            "group": "Radar Chart",
                            "field": "av_model_brand_acorn_ratio_adjustment",
                            "fieldfx": "100",
                            "type": "integer",
                            "label": "ACORN ratio",
                            "dataset": "Baseline"
                        },
                        {
                            "group": "Radar Chart",
                            "field": "av_model_brand_loctype_adjustment",
                            "fieldfx": "100",
                            "type": "integer",
                            "label": "Location",
                            "dataset": "Baseline"
                        },
                        {
                            "group": "Radar Chart",
                            "field": "av_model_stown_cga_adjustment",
                            "fieldfx": "100",
                            "type": "integer",
                            "label": "Competition",
                            "dataset": "Baseline"
                        },
                        {
                            "group": "Radar Chart",
                            "field": "av_model_brand_region_adjustment",
                            "fieldfx": "100",
                            "type": "integer",
                            "label": "Region",
                            "dataset": "Baseline"
                        },
                        {
                            "group": "Radar Chart",
                            "field": "av_model_brand_acorn_pop_adjustment",
                            "fieldfx": "100",
                            "type": "integer",
                            "label": "ACORN Population",
                            "dataset": "Baseline"
                        },
                        {
                            "group": "Radar Chart",
                            "field": "b_model_brand_region_adjustment",
                            "fieldfx": "80",
                            "type": "integer",
                            "label": "Region",
                            "dataset": "."
                        },
                        {
                            "group": "Radar Chart",
                            "field": "b_model_brand_acorn_pop_adjustment",
                            "fieldfx": "120",
                            "type": "integer",
                            "label": "ACORN Population",
                            "dataset": "."
                        },
                        {
                            "label": "Demographic Summary",
                            "type": "label",
                            "class": "hidden_in_report"
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Population",
                            "target_id": "population_summary",
                            "class": "hidden_in_report",
                            "display": true,
                            "level": 2,
                            "columns": [
                                {
                                    "type": "integer",
                                    "title": "0-5 mins",
                                    "field": "min5",
                                    "lookup": {
                                        "table_a": "live.house_list_site",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_5min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "0-10 mins",
                                    "field": "min10",
                                    "lookup": {
                                        "table_a": "live.house_list_site",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_10min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "0-15 mins",
                                    "field": "min15",
                                    "lookup": {
                                        "table_a": "live.house_list_site",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                }
                            ],
                            "rows": [
                                {
                                    "field": "pop__17",
                                    "fieldfx": "SUM(b.pop__17)",
                                    "title": "Current Population"
                                },
                                {
                                    "field": "pop__11",
                                    "fieldfx": "SUM(b.pop__11)",
                                    "title": "Population 2011"
                                },
                                {
                                    "field": "pop_growth",
                                    "fieldfx": "SUM(b.pop__17 - b.pop__11) * 100 / SUM(b.pop__11)",
                                    "title": "Population Growth"
                                }
                            ]
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Age Profile",
                            "target_id": "age_profile",
                            "display": true,
                            "level": 2,
                            "class": "hidden_in_report",
                            "chart": {
                                "type": "horizontalBar",
                                "class": "hidden_in_report",
                                "active": true,
                                "field": "age_index"
                            },
                            "columns": [
                                {
                                    "type": "integer",
                                    "title": "0-5 mins",
                                    "field": "min5",
                                    "lookup": {
                                        "table_a": "live.house_list_site",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_5min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "0-10 mins",
                                    "field": "min10",
                                    "lookup": {
                                        "table_a": "live.house_list_site",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_10min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "title": "0-15 mins",
                                    "field": "min15",
                                    "lookup": {
                                        "table_a": "live.house_list_site",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "field": "uk",
                                    "aspatial": "age_under_18_uk, age_18to24_uk, age_25to29_uk, age_30to44_uk, age_45to59_uk, age_60plus_uk, age_total_uk FROM geodata.uk_glx_geodata_demog_national_totals"
                                }
                            ],
                            "rows": [
                                {
                                    "field": "age_under_18",
                                    "title": "< 18",
                                    "fieldfx": "round(SUM(pop__11 - age_18to19__11 - age_20to24__11 - age_25to29__11 - age_30to44__11 - age_45to59__11 - age60plus))"
                                },
                                {
                                    "field": "age_18to24",
                                    "fieldfx": "round(SUM(age_18to19__11 + age_20to24__11))",
                                    "title": "18 to 24"
                                },
                                {
                                    "field": "age_25to29",
                                    "fieldfx": "round(SUM(age_25to29__11))",
                                    "title": "25 to 29"
                                },
                                {
                                    "field": "age_30to44",
                                    "fieldfx": "round(SUM(age_30to44__11))",
                                    "title": "30 to 44"
                                },
                                {
                                    "field": "age_45to59",
                                    "fieldfx": "round(SUM(age_45to59__11))",
                                    "title": "45 to 59"
                                },
                                {
                                    "field": "age_60plus",
                                    "fieldfx": "round(SUM(age60plus))",
                                    "title": "60+"
                                },
                                {
                                    "field": "age_profile_total",
                                    "fieldfx": "round(SUM(pop__11))",
                                    "title": "Total"
                                }
                            ],
                            "agg": {
                                "share15": {
                                    "title": "% with 15 min",
                                    "type": "integer",
                                    "rows": [
                                        "100*min15.age_under_18/min15.age_profile_total",
                                        "100*min15.age_18to24/min15.age_profile_total",
                                        "100*min15.age_25to29/min15.age_profile_total",
                                        "100*min15.age_30to44/min15.age_profile_total",
                                        "100*min15.age_45to59/min15.age_profile_total",
                                        "100*min15.age_60plus/min15.age_profile_total",
                                        "100*min15.age_profile_total/min15.age_profile_total"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                "age_uk_total": {
                                    "title": "UK %",
                                    "type": "integer",
                                    "rows": [
                                        "uk.age_under_18_uk*100/uk.age_total_uk",
                                        "uk.age_18to24_uk*100/uk.age_total_uk",
                                        "uk.age_25to29_uk*100/uk.age_total_uk",
                                        "uk.age_30to44_uk*100/uk.age_total_uk",
                                        "uk.age_45to59_uk*100/uk.age_total_uk",
                                        "uk.age_60plus_uk*100/uk.age_total_uk",
                                        "uk.age_total_uk*100/uk.age_total_uk"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                "age_index": {
                                    "title": "Age Profile Index",
                                    "type": "integer",
                                    "formatter": "progress",
                                    "formatterParams": {
                                        "strokeColor": [
                                            "rgba(211, 47, 47, 0.7)",
                                            "rgba(56, 142, 60, 0.7)"
                                        ],
                                        "legend": true,
                                        "legendAlign": "right",
                                        "max": 200
                                    },
                                    "width": 200,
                                    "sorter": "number",
                                    "rows": [
                                        "uk.age_total_uk*(100*min15.age_under_18/min15.age_profile_total)/uk.age_under_18_uk",
                                        "uk.age_total_uk*(100*min15.age_18to24/min15.age_profile_total)/uk.age_18to24_uk",
                                        "uk.age_total_uk*(100*min15.age_25to29/min15.age_profile_total)/uk.age_25to29_uk",
                                        "uk.age_total_uk*(100*min15.age_30to44/min15.age_profile_total)/uk.age_30to44_uk",
                                        "uk.age_total_uk*(100*min15.age_45to59/min15.age_profile_total)/uk.age_45to59_uk",
                                        "uk.age_total_uk*(100*min15.age_60plus/min15.age_profile_total)/uk.age_60plus_uk",
                                        "uk.age_total_uk*(100*min15.age_profile_total/min15.age_profile_total)/uk.age_total_uk"
                                    ]
                                }
                            }
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Social Grade",
                            "target_id": "social_grade",
                            "level": 2,
                            "display": true,
                            "class": "hidden_in_report",
                            "chart": {
                                "class": "hidden_in_report",
                                "type": "horizontalBar",
                                "active": true,
                                "field": "sg_index",
                                "backgroundColor": [
                                    "#8e24aa",
                                    "#1e88e5",
                                    "#00897b",
                                    "#ff8a65",
                                    "#a1887f",
                                    "#78909c"
                                ]
                            },
                            "columns": [
                                {
                                    "type": "integer",
                                    "title": "0-5 mins",
                                    "field": "min5",
                                    "lookup": {
                                        "table_a": "live.house_list_site",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_5min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "0-10 mins",
                                    "field": "min10",
                                    "lookup": {
                                        "table_a": "live.house_list_site",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_10min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "title": "0-15 mins",
                                    "field": "min15",
                                    "lookup": {
                                        "table_a": "live.house_list_site",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "field": "uk",
                                    "aspatial": "social_grade_ab_uk, social_grade_c1_uk, social_grade_c2_uk, social_grade_de_uk, social_grade_total_uk FROM geodata.uk_glx_geodata_demog_national_totals"
                                }
                            ],
                            "rows": [
                                {
                                    "field": "sg_ab",
                                    "fieldfx": "round(SUM(ski_ab__11))",
                                    "title": "AB"
                                },
                                {
                                    "field": "sg_c1",
                                    "fieldfx": "round(SUM(ski_c1__11))",
                                    "title": "C1"
                                },
                                {
                                    "field": "sg_c2",
                                    "fieldfx": "round(SUM(ski_c2__11))",
                                    "title": "C2"
                                },
                                {
                                    "field": "sg_de",
                                    "fieldfx": "round(SUM(ski_de__11))",
                                    "title": "DE"
                                },
                                {
                                    "field": "sg_total",
                                    "fieldfx": "round(SUM(ski_hrp_base__11))",
                                    "title": "Total"
                                }
                            ],
                            "agg": {
                                "share15": {
                                    "title": "% with 15 min",
                                    "type": "integer",
                                    "rows": [
                                        "100*min15.sg_ab/min15.sg_total",
                                        "100*min15.sg_c1/min15.sg_total",
                                        "100*min15.sg_c2/min15.sg_total",
                                        "100*min15.sg_de/min15.sg_total",
                                        "100*min15.sg_total/min15.sg_total"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                "sg_uk_total": {
                                    "title": "UK %",
                                    "type": "integer",
                                    "rows": [
                                        "uk.social_grade_ab_uk*100/uk.social_grade_total_uk",
                                        "uk.social_grade_c1_uk*100/uk.social_grade_total_uk",
                                        "uk.social_grade_c2_uk*100/uk.social_grade_total_uk",
                                        "uk.social_grade_de_uk*100/uk.social_grade_total_uk",
                                        "uk.social_grade_total_uk*100/uk.social_grade_total_uk"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                "sg_index": {
                                    "title": "Social Grade Index",
                                    "type": "integer",
                                    "formatter": "progress",
                                    "formatterParams": {
                                        "strokeColor": [
                                            "rgba(211, 47, 47, 0.7)",
                                            "rgba(56, 142, 60, 0.7)"
                                        ],
                                        "max": 200,
                                        "legend": true,
                                        "legendAlign": "right"
                                    },
                                    "width": 200,
                                    "sorter": "number",
                                    "rows": [
                                        "uk.social_grade_total_uk*(100*min15.sg_ab/min15.sg_total)/uk.social_grade_ab_uk",
                                        "uk.social_grade_total_uk*(100*min15.sg_c1/min15.sg_total)/uk.social_grade_c1_uk",
                                        "uk.social_grade_total_uk*(100*min15.sg_c2/min15.sg_total)/uk.social_grade_c2_uk",
                                        "uk.social_grade_total_uk*(100*min15.sg_de/min15.sg_total)/uk.social_grade_de_uk",
                                        "uk.social_grade_total_uk*(100*min15.sg_total/min15.sg_total)/uk.social_grade_total_uk"
                                    ]
                                }
                            }
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Acorn Catchment Profile",
                            "target_id": "xyz_acorn",
                            "class": "hidden_in_report",
                            "display": true,
                            "columns": [
                                {
                                    "type": "numeric",
                                    "title": "0-5 mins",
                                    "field": "min5",
                                    "lookup": {
                                        "table_a": "live.house_list_site",
                                        "table_b": "mb.output_area",
                                        "geom_a": "isoline_5min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "center",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "title": "0-10 mins",
                                    "field": "min10",
                                    "lookup": {
                                        "table_a": "live.house_list_site",
                                        "table_b": "mb.output_area",
                                        "geom_a": "isoline_10min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "center",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "title": "0-15 mins",
                                    "field": "min15",
                                    "lookup": {
                                        "table_a": "live.house_list_site",
                                        "table_b": "mb.output_area",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "center",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "field": "uk",
                                    "aspatial": "lavish_lifestyles, executive_wealth, mature_money, city_sophisticates, career_climbers, countryside_communities, successful_suburbs, steady_neighbourhoods, comfortable_seniors, starting_out, student_life, modest_means, striving_families, poorer_pensioners, young_hardship, struggling_estates, difficult_circumstances, not_private_households, total_pop FROM mb.uk_acorn_groups_regional where region = 'UK'"
                                }
                            ],
                            "rows": [
                                {
                                    "field": "lavish_lifestyles",
                                    "fieldfx": "SUM(COALESCE(b.lavish_lifestyles))",
                                    "title": "Lavish Lifestyles"
                                },
                                {
                                    "field": "executive_wealth",
                                    "fieldfx": "SUM(COALESCE(b.executive_wealth))",
                                    "title": "Executive Wealth"
                                },
                                {
                                    "field": "mature_money",
                                    "fieldfx": "SUM(COALESCE(b.mature_money))",
                                    "title": "Mature Money"
                                },
                                {
                                    "field": "city_sophisticates",
                                    "fieldfx": "SUM(COALESCE(b.city_sophisticates))",
                                    "title": "City Sophisticates"
                                },
                                {
                                    "field": "career_climbers",
                                    "fieldfx": "SUM(COALESCE(b.career_climbers))",
                                    "title": "Career Climbers"
                                },
                                {
                                    "field": "countryside_communities",
                                    "fieldfx": "SUM(COALESCE(b.countryside_communities))",
                                    "title": "Countryside Communities"
                                },
                                {
                                    "field": "successful_suburbs",
                                    "fieldfx": "SUM(COALESCE(b.successful_suburbs))",
                                    "title": "Successful Suburbs"
                                },
                                {
                                    "field": "steady_neighbourhoods",
                                    "fieldfx": "SUM(COALESCE(b.steady_neighbourhoods))",
                                    "title": "Steady Neighbourhoods"
                                },
                                {
                                    "field": "comfortable_seniors",
                                    "fieldfx": "SUM(COALESCE(b.comfortable_seniors))",
                                    "title": "Comfortable Seniors"
                                },
                                {
                                    "field": "starting_out",
                                    "fieldfx": "SUM(COALESCE(b.starting_out))",
                                    "title": "Starting Out"
                                },
                                {
                                    "field": "student_life",
                                    "fieldfx": "SUM(COALESCE(b.student_life))",
                                    "title": "Student Life"
                                },
                                {
                                    "field": "modest_means",
                                    "fieldfx": "SUM(COALESCE(b.modest_means))",
                                    "title": "Modest Means"
                                },
                                {
                                    "field": "striving_families",
                                    "fieldfx": "SUM(COALESCE(b.striving_families))",
                                    "title": "Striving Families"
                                },
                                {
                                    "field": "poorer_pensioners",
                                    "fieldfx": "SUM(COALESCE(b.poorer_pensioners))",
                                    "title": "Poorer Pensioners"
                                },
                                {
                                    "field": "young_hardship",
                                    "fieldfx": "SUM(COALESCE(b.young_hardship))",
                                    "title": "Young Hardship"
                                },
                                {
                                    "field": "struggling_estates",
                                    "fieldfx": "SUM(COALESCE(b.struggling_estates))",
                                    "title": "Struggling Estates"
                                },
                                {
                                    "field": "difficult_circumstances",
                                    "fieldfx": "SUM(COALESCE(b.difficult_circumstances))",
                                    "title": "Difficult Circumstances"
                                },
                                {
                                    "field": "not_private_households",
                                    "fieldfx": "SUM(COALESCE(b.not_private_households))",
                                    "title": "Not Private Households"
                                },
                                {
                                    "field": "total_pop",
                                    "fieldfx": "SUM(COALESCE(b.total_pop))",
                                    "title": "ACORN Total"
                                }
                            ],
                            "agg": {
                                "share15": {
                                    "title": "% with 15 min",
                                    "rows": [
                                        "100*min15.lavish_lifestyles/min15.total_pop",
                                        "100*min15.executive_wealth/min15.total_pop",
                                        "100*min15.mature_money/min15.total_pop",
                                        "100*min15.city_sophisticates/min15.total_pop",
                                        "100*min15.career_climbers/min15.total_pop",
                                        "100*min15.countryside_communities/min15.total_pop",
                                        "100*min15.successful_suburbs/min15.total_pop",
                                        "100*min15.steady_neighbourhoods/min15.total_pop",
                                        "100*min15.comfortable_seniors/min15.total_pop",
                                        "100*min15.starting_out/min15.total_pop",
                                        "100*min15.student_life/min15.total_pop",
                                        "100*min15.modest_means/min15.total_pop",
                                        "100*min15.striving_families/min15.total_pop",
                                        "100*min15.poorer_pensioners/min15.total_pop",
                                        "100*min15.young_hardship/min15.total_pop",
                                        "100*min15.struggling_estates/min15.total_pop",
                                        "100*min15.difficult_circumstances/min15.total_pop",
                                        "100*min15.not_private_households/min15.total_pop"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 1
                                    }
                                },
                                "uk_perc": {
                                    "title": "UK %",
                                    "rows": [
                                        "100*uk.lavish_lifestyles/uk.total_pop",
                                        "100*uk.executive_wealth/uk.total_pop",
                                        "100*uk.mature_money/uk.total_pop",
                                        "100*uk.city_sophisticates/uk.total_pop",
                                        "100*uk.career_climbers/uk.total_pop",
                                        "100*uk.countryside_communities/uk.total_pop",
                                        "100*uk.successful_suburbs/uk.total_pop",
                                        "100*uk.steady_neighbourhoods/uk.total_pop",
                                        "100*uk.comfortable_seniors/uk.total_pop",
                                        "100*uk.starting_out/uk.total_pop",
                                        "100*uk.student_life/uk.total_pop",
                                        "100*uk.modest_means/uk.total_pop",
                                        "100*uk.striving_families/uk.total_pop",
                                        "100*uk.poorer_pensioners/uk.total_pop",
                                        "100*uk.young_hardship/uk.total_pop",
                                        "100*uk.struggling_estates/uk.total_pop",
                                        "100*uk.difficult_circumstances/uk.total_pop",
                                        "100*uk.not_private_households/uk.total_pop"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 1
                                    }
                                },
                                "acorn_index": {
                                    "title": "ACORN Index",
                                    "type": "integer",
                                    "formatter": "progress",
                                    "formatterParams": {
                                        "strokeColor": [
                                            "rgba(211, 47, 47, 0.7)",
                                            "rgba(56, 142, 60, 0.7)"
                                        ],
                                        "max": 200,
                                        "legend": true,
                                        "legendAlign": "right"
                                    },
                                    "width": 200,
                                    "sorter": "number",
                                    "rows": [
                                        "uk.total_pop*(100*min15.lavish_lifestyles/min15.total_pop)/uk.lavish_lifestyles",
                                        "uk.total_pop*(100*min15.executive_wealth/min15.total_pop)/uk.executive_wealth",
                                        "uk.total_pop*(100*min15.mature_money/min15.total_pop)/uk.mature_money",
                                        "uk.total_pop*(100*min15.city_sophisticates/min15.total_pop)/uk.city_sophisticates",
                                        "uk.total_pop*(100*min15.career_climbers/min15.total_pop)/uk.career_climbers",
                                        "uk.total_pop*(100*min15.countryside_communities/min15.total_pop)/uk.countryside_communities",
                                        "uk.total_pop*(100*min15.successful_suburbs/min15.total_pop)/uk.successful_suburbs",
                                        "uk.total_pop*(100*min15.steady_neighbourhoods/min15.total_pop)/uk.steady_neighbourhoods",
                                        "uk.total_pop*(100*min15.comfortable_seniors/min15.total_pop)/uk.comfortable_seniors",
                                        "uk.total_pop*(100*min15.starting_out/min15.total_pop)/uk.starting_out",
                                        "uk.total_pop*(100*min15.student_life/min15.total_pop)/uk.student_life",
                                        "uk.total_pop*(100*min15.modest_means/min15.total_pop)/uk.modest_means",
                                        "uk.total_pop*(100*min15.striving_families/min15.total_pop)/uk.striving_families",
                                        "uk.total_pop*(100*min15.poorer_pensioners/min15.total_pop)/uk.poorer_pensioners",
                                        "uk.total_pop*(100*min15.young_hardship/min15.total_pop)/uk.young_hardship",
                                        "uk.total_pop*(100*min15.struggling_estates/min15.total_pop)/uk.struggling_estates",
                                        "uk.total_pop*(100*min15.difficult_circumstances/min15.total_pop)/uk.difficult_circumstances",
                                        "uk.total_pop*(100*min15.not_private_households/min15.total_pop)/uk.not_private_households"
                                    ]
                                }
                            }
                        },
                        {
                            "label": "Nearest M&B",
                            "type": "label",
                            "class": "hidden_in_report"
                        },
                        {
                            "type": "orderedList",
                            "title": "Existing",
                            "target_id": "xyz_existing",
                            "display": true,
                            "level": 2,
                            "class": "hidden_in_report",
                            "from": "live.house_list_site a, mb.house_list b",
                            "where": "a.id = $1",
                            "orderby": "ST_DistanceSphere(a.geom_4326, b.geom_4326)",
                            "limit": 10,
                            "columns": [
                                {
                                    "title": "Buncode",
                                    "field": "buncode",
                                    "fieldfx": "b.buncode",
                                    "align": "right"
                                },
                                {
                                    "title": "Name",
                                    "field": "short_name",
                                    "fieldfx": "b.short_name"
                                },
                                {
                                    "title": "Postcode",
                                    "field": "postcode",
                                    "fieldfx": "b.postcode"
                                },
                                {
                                    "title": "AWT",
                                    "headerTooltip": "Average weekly takings",
                                    "field": "aws",
                                    "fieldfx": "b.aws",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0,
                                        "symbol": "£"
                                    }
                                },
                                {
                                    "title": "Distance (km)",
                                    "field": "dist",
                                    "fieldfx": "ST_DistanceSphere(a.geom_4326, b.geom_4326) / 1000",
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 1
                                    }
                                }
                            ]
                        },
                        {
                            "type": "orderedList",
                            "title": "Acquisition",
                            "target_id": "xyz_acquisition",
                            "level": 2,
                            "display": true,
                            "class": "hidden_in_report",
                            "from": "live.house_list_site a, live.house_list_site b",
                            "where": "a.id = $1 AND a.id <> b.id",
                            "orderby": "ST_DistanceSphere(a.geom_4326, b.geom_4326)",
                            "limit": 3,
                            "columns": [
                                {
                                    "title": "Buncode",
                                    "field": "buncode",
                                    "fieldfx": "b.buncode",
                                    "align": "right"
                                },
                                {
                                    "title": "Site name",
                                    "field": "short_name",
                                    "fieldfx": "b.short_name"
                                },
                                {
                                    "title": "Postcode",
                                    "field": "postcode",
                                    "fieldfx": "b.postcode"
                                },
                                {
                                    "title": "Distance (km)",
                                    "field": "dist",
                                    "fieldfx": "ST_DistanceSphere(a.geom_4326, b.geom_4326) / 1000",
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 1
                                    }
                                }
                            ]
                        },
                        {
                            "type": "orderedList",
                            "title": "Nearest competitors",
                            "target_id": "xyz_competition",
                            "level": 2,
                            "display": true,
                            "class": "hidden_in_report",
                            "from": "live.house_list_site a, mb.competition b",
                            "where": "a.id = $1",
                            "orderby": "ST_DistanceSphere(a.geom_4326, b.geom_4326)",
                            "limit": 17,
                            "columns": [
                                {
                                    "title": "CGA ID",
                                    "field": "cga_identifier",
                                    "fieldfx": "b.cga_identifier",
                                    "align": "right"
                                },
                                {
                                    "title": "Site name",
                                    "field": "site_name",
                                    "fieldfx": "b.site_name"
                                },
                                {
                                    "title": "Brand",
                                    "field": "brand_name",
                                    "fieldfx": "b.brand_name"
                                },
                                {
                                    "title": "Owner Name",
                                    "field": "owner_name",
                                    "fieldfx": "b.owner_name"
                                },
                                {
                                    "title": "Owner Group",
                                    "field": "owner_group",
                                    "fieldfx": "b.owner_group"
                                },
                                {
                                    "title": "Licence",
                                    "field": "site_licence_name",
                                    "fieldfx": "b.site_licence_name"
                                },
                                {
                                    "title": "Type",
                                    "field": "main_comp_display",
                                    "fieldfx": "b.main_comp_display"
                                },
                                {
                                    "title": "Postcode",
                                    "field": "postcode",
                                    "fieldfx": "b.postcode"
                                },
                                {
                                    "title": "Distance (km)",
                                    "field": "dist",
                                    "fieldfx": "ST_DistanceSphere(a.geom_4326, b.geom_4326) / 1000",
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 1
                                    }
                                }
                            ]
                        },
                        {
                            "type": "dashboard",
                            "title": "Propensity Index",
                            "level": 2,
                            "display": true,
                            "target_id": "xyz_propensity_index",
                            "class": "hidden_in_report"
                        },
                        {
                            "type": "pgFunction",
                            "dashboard": "Propensity Index",
                            "pgFunction": "model.get_propensity_index_site",
                            "chart": {
                                "title": {
                                    "display": true,
                                    "position": "bottom",
                                    "text": "The MAB propensity score is a measure to indicate what brand is most aligned to the catchment based on population and distance-decay.",
                                    "fontSize": 11,
                                    "fontStyle": "normal"
                                },
                                "layout": {
                                    "padding": {
                                        "left": 50,
                                        "right": 50
                                    }
                                },
                                "hideTicksX": true,
                                "negativeBackgroundColor": "rgba(211, 47, 47, 0.7)",
                                "negativeBorderColor": "#d32f2f",
                                "backgroundColor": "rgba(56, 142, 60, 0.7)",
                                "borderColor": "#388e3c",
                                "offsetX": -100,
                                "datalabels": {
                                    "align": "right",
                                    "anchor": "end"
                                },
                                "width": 800,
                                "height": 500,
                                "type": "horizontalBar",
                                "label": "crmbrandid",
                                "x": "brand",
                                "y": "propensity_index"
                            }
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Market Overview",
                            "level": 2,
                            "display": true,
                            "class": "hidden_in_report",
                            "target_id": "xyz_market_overview",
                            "columns": [
                                {
                                    "type": "integer",
                                    "title": "Competition",
                                    "field": "shoppertown_comp",
                                    "lookup": {
                                        "table_a": "live.house_list_site",
                                        "table_b": "mb.competition",
                                        "geom_a": "geom_4326",
                                        "geom_b": "geom_4326",
                                        "where_a": {
                                            "spatial": {
                                                "table": "geodata.uk_glx_geodata_seamless_shopper_town",
                                                "geom": "geom_4326"
                                            }
                                        }
                                    },
                                    "sorter": false,
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "M & B",
                                    "field": "shoppertown_mb",
                                    "lookup": {
                                        "table_a": "live.house_list_site",
                                        "table_b": "mb.competition",
                                        "geom_a": "geom_4326",
                                        "geom_b": "geom_4326",
                                        "where_a": {
                                            "spatial": {
                                                "table": "geodata.uk_glx_geodata_seamless_shopper_town",
                                                "geom": "geom_4326"
                                            }
                                        }
                                    },
                                    "sorter": false,
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "Total",
                                    "field": "shoppertown_total",
                                    "lookup": {
                                        "table_a": "live.house_list_site",
                                        "table_b": "mb.competition",
                                        "geom_a": "geom_4326",
                                        "geom_b": "geom_4326",
                                        "where_a": {
                                            "spatial": {
                                                "table": "geodata.uk_glx_geodata_seamless_shopper_town",
                                                "geom": "geom_4326"
                                            }
                                        }
                                    },
                                    "sorter": false,
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                }
                            ],
                            "rows": [
                                {
                                    "field": "large_pub_group",
                                    "fieldfx": "(SUM(CASE WHEN b.owner_group = 'Large Pub Group' THEN 1 ELSE 0 END))",
                                    "title": "Large Pub Group"
                                },
                                {
                                    "field": "medium_pub_group",
                                    "fieldfx": "(SUM(CASE WHEN b.owner_group = 'Medium Pub Group' THEN 1 ELSE 0 END))",
                                    "title": "Medium Pub Group"
                                },
                                {
                                    "field": "large_restaurant_group",
                                    "fieldfx": "(SUM(CASE WHEN b.owner_group = 'Large Restaurant Group' THEN 1 ELSE 0 END))",
                                    "title": "Large Restaurant Group"
                                },
                                {
                                    "field": "small_restaurant_group",
                                    "fieldfx": "(SUM(CASE WHEN b.owner_group = 'Small Restaurant Group' THEN 1 ELSE 0 END))",
                                    "title": "Small Restaurant Group"
                                },
                                {
                                    "field": "independent",
                                    "fieldfx": "(SUM(CASE WHEN b.owner_group = 'Independent' THEN 1 ELSE 0 END))",
                                    "title": "Independent"
                                },
                                {
                                    "field": "total",
                                    "fieldfx": "(SUM(CASE WHEN b.owner_group in ('Large Pub Group', 'Medium Pub Group', 'Large Restaurant Group', 'Small Restaurant Group', 'Independent') THEN 1 ELSE 0 END))",
                                    "title": "Total"
                                }
                            ]
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Saturation",
                            "pgFunction": "model.get_saturation_index_site",
                            "target_id": "xyz_saturation",
                            "class": "hidden_in_report",
                            "level": 2,
                            "display": true,
                            "columns": [
                                {
                                    "field": "shoptown_pop_per_pub",
                                    "title": "Population per pub",
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "field": "uk_pop_per_pub",
                                    "title": "UK Population per pub",
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "decimal": ".",
                                        "thousand": ",",
                                        "precision": 0
                                    }
                                },
                                {
                                    "field": "saturation_index",
                                    "title": "Headroom Index",
                                    "align": "right",
                                    "type": "integer",
                                    "formatter": "progress",
                                    "formatterParams": {
                                        "strokeColor": [
                                            "rgba(211, 47, 47, 0.7)",
                                            "rgba(56, 142, 60, 0.7)"
                                        ],
                                        "legend": true,
                                        "legendAlign": "right",
                                        "max": 200
                                    }
                                }
                            ]
                        },
                        {
                            "field": "edited",
                            "label": "Created on",
                            "type": "datetime",
                            "class": "hidden_in_report"
                        },
                        {
                            "label": "Images",
                            "field": "images",
                            "type": "images",
                            "edit": true,
                            "class": "hidden_in_report"
                        },
                        {
                            "type": "streetview",
                            "class": "hidden_in_report"
                        }
                    ],
                    "style": {
                        "hidden": true,
                        "marker": {
                            "type": "target",
                            "fillColor": "#775FA3",
                            "layers": {
                                "0.75": "#EEE",
                                "0.50": "#775FA3"
                            }
                        },
                        "markerMulti": {
                            "type": "target",
                            "fillColor": "#775FA3",
                            "layers": {
                                "0.75": "#EEE",
                                "0.50": "#775FA3"
                            }
                        }
                    },
                    "roles": {
                        "Super": null,
                        "Standard": null
                    }
                },
                "Acquisitions Pipeline": {
                    "meta": "Added on 15 August 2019.",
                    "format": "cluster",
                    "geom": "geom_4326",
                    "srid": "4326",
                    "dbs": "MB",
                    "qID": "id",
                    "table": "live.house_list_pipeline",
                    "cluster_label": "short_name",
                    "infoj": [
                        {
                            "type": "key",
                            "class": "hidden_in_report"
                        },
                        {
                            "type": "report",
                            "class": "hidden_in_report",
                            "report": {
                                "name": "High Level Report",
                                "template": "https://api.github.com/repos/GEOLYTIX/xyz_resources/contents/mb/report_v2.html"
                            }
                        },
                        {
                            "field": "id",
                            "label": "Key reference",
                            "inline": true,
                            "class": "hidden_in_report"
                        },
                        {
                            "label": "Town",
                            "field": "intersecting_town",
                            "fieldfx": "SELECT b.town_name FROM live.house_list_pipeline a, geodata.uk_glx_geodata_seamless_town b WHERE a.id = $1 AND ST_Contains(b.geom_4326, a.geom_4326) LIMIT 1",
                            "inline": true
                        },
                        {
                            "label": "Shoppertown",
                            "field": "intersecting_shoptown",
                            "fieldfx": "SELECT b.shop_town FROM live.house_list_pipeline a, geodata.uk_glx_geodata_seamless_shopper_town b WHERE a.id = $1 AND ST_Contains(b.geom_4326, a.geom_4326) LIMIT 1",
                            "inline": true
                        },
                        {
                            "label": "Population",
                            "field": "intersecting_shoptown_pop",
                            "fieldfx": "SELECT b.pop FROM live.house_list_pipeline a, geodata.uk_glx_geodata_seamless_shopper_town b WHERE a.id = $1 AND ST_Contains(b.geom_4326, a.geom_4326) LIMIT 1",
                            "type": "integer",
                            "inline": true
                        },
                        {
                            "field": "short_name",
                            "label": "Site Name"
                        },
                        {
                            "field": "key_ref",
                            "label": "Old Key reference",
                            "inline": true,
                            "class": "hidden_in_report"
                        },
                        {
                            "field": "buncode",
                            "label": "Bun Code",
                            "inline": true,
                            "class": "hidden_in_report"
                        },
                        {
                            "label": "Address",
                            "type": "label"
                        },
                        {
                            "field": "street",
                            "label": "Street",
                            "level": 1
                        },
                        {
                            "field": "town",
                            "label": "Town",
                            "inline": true,
                            "level": 1
                        },
                        {
                            "field": "postcode",
                            "label": "Postcode",
                            "inline": true,
                            "level": 1
                        },
                        {
                            "field": "crmbrandid",
                            "label": "Potential Brand",
                            "inline": true
                        },
                        {
                            "field": "potential_2nd_brand_name",
                            "label": "Potential 2nd Brand",
                            "inline": true
                        },
                        {
                            "field": "site_type",
                            "label": "Site type",
                            "inline": true
                        },
                        {
                            "field": "review_stage",
                            "label": "Review Stage",
                            "inline": true
                        },
                        {
                            "field": "model_sales",
                            "label": "Site Feasibility Forecast",
                            "type": "integer"
                        },
                        {
                            "field": "source_group",
                            "label": "Source group",
                            "inline": true
                        },
                        {
                            "field": "contract_stage",
                            "label": "Contract stage",
                            "inline": true
                        },
                        {
                            "field": "reason_rejection",
                            "label": "Reason for rejection",
                            "type": "textarea"
                        },
                        {
                            "field": "rejection_notes",
                            "label": "Rejection notes",
                            "type": "textarea"
                        },
                        {
                            "field": "comments",
                            "label": "Comments",
                            "type": "textarea"
                        },
                        {
                            "label": "Drivetimes",
                            "type": "label",
                            "class": "hidden_in_report"
                        },
                        {
                            "name": "5 min",
                            "field": "isoline_5min",
                            "fieldfx": "ST_asGeoJson(isoline_5min)",
                            "type": "geometry",
                            "class": "hidden_in_report",
                            "display": true,
                            "level": 2,
                            "edit": {
                                "isoline_here": {
                                    "minutes": 5
                                }
                            },
                            "style": {
                                "strokeColor": "#BB0A21",
                                "fillColor": "#BB0A21",
                                "strokeWidth": 2,
                                "fillOpacity": 0.2
                            }
                        },
                        {
                            "name": "10 min",
                            "field": "isoline_10min",
                            "fieldfx": "ST_asGeoJson(isoline_10min)",
                            "type": "geometry",
                            "class": "hidden_in_report",
                            "display": true,
                            "level": 2,
                            "edit": {
                                "isoline_here": {
                                    "minutes": 10
                                }
                            },
                            "style": {
                                "strokeColor": "#F49D37",
                                "fillColor": "#F49D37",
                                "fillOpacity": 0.2,
                                "strokeWidth": 2
                            }
                        },
                        {
                            "name": "15 min",
                            "field": "isoline_15min",
                            "fieldfx": "ST_asGeoJson(isoline_15min)",
                            "type": "geometry",
                            "class": "hidden_in_report",
                            "display": true,
                            "level": 2,
                            "edit": {
                                "isoline_here": {
                                    "minutes": 15
                                }
                            },
                            "style": {
                                "strokeColor": "#FFF05A",
                                "fillColor": "#FFF05A",
                                "strokeWidth": 2,
                                "fillOpacity": 0.2
                            }
                        },
                        {
                            "name": "30 min",
                            "field": "isoline_30min",
                            "fieldfx": "ST_asGeoJson(isoline_30min)",
                            "type": "geometry",
                            "class": "hidden_in_report",
                            "display": true,
                            "level": 2,
                            "style": {
                                "strokeColor": "#26a69a",
                                "fillColor": "#26a69a",
                                "strokeWidth": 2,
                                "fillOpacity": 0.2
                            }
                        },
                        {
                            "label": "Demographic Summary",
                            "type": "label",
                            "class": "hidden_in_report"
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Population",
                            "target_id": "population_summary",
                            "class": "hidden_in_report",
                            "level": 2,
                            "display": true,
                            "columns": [
                                {
                                    "type": "integer",
                                    "title": "0-5 mins",
                                    "field": "min5",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_5min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "0-10 mins",
                                    "field": "min10",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_10min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "0-15 mins",
                                    "field": "min15",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                }
                            ],
                            "rows": [
                                {
                                    "field": "pop__17",
                                    "fieldfx": "SUM(b.pop__17)",
                                    "title": "Current Population"
                                },
                                {
                                    "field": "pop__11",
                                    "fieldfx": "SUM(b.pop__11)",
                                    "title": "Population 2011"
                                },
                                {
                                    "field": "pop_growth",
                                    "fieldfx": "SUM(b.pop__17 - b.pop__11) * 100 / SUM(b.pop__11)",
                                    "title": "Population Growth"
                                }
                            ]
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Age Profile",
                            "target_id": "age_profile",
                            "level": 2,
                            "display": true,
                            "class": "hidden_in_report",
                            "chart": {
                                "type": "horizontalBar",
                                "class": "hidden_in_report",
                                "active": true,
                                "field": "age_index"
                            },
                            "columns": [
                                {
                                    "type": "integer",
                                    "title": "0-5 mins",
                                    "field": "min5",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_5min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "0-10 mins",
                                    "field": "min10",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_10min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "title": "0-15 mins",
                                    "field": "min15",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "field": "uk",
                                    "aspatial": "age_under_18_uk, age_18to24_uk, age_25to29_uk, age_30to44_uk, age_45to59_uk, age_60plus_uk, age_total_uk FROM geodata.uk_glx_geodata_demog_national_totals"
                                }
                            ],
                            "rows": [
                                {
                                    "field": "age_under_18",
                                    "title": "< 18",
                                    "fieldfx": "round(SUM(pop__11 - age_18to19__11 - age_20to24__11 - age_25to29__11 - age_30to44__11 - age_45to59__11 - age60plus))"
                                },
                                {
                                    "field": "age_18to24",
                                    "fieldfx": "round(SUM(age_18to19__11 + age_20to24__11))",
                                    "title": "18 to 24"
                                },
                                {
                                    "field": "age_25to29",
                                    "fieldfx": "round(SUM(age_25to29__11))",
                                    "title": "25 to 29"
                                },
                                {
                                    "field": "age_30to44",
                                    "fieldfx": "round(SUM(age_30to44__11))",
                                    "title": "30 to 44"
                                },
                                {
                                    "field": "age_45to59",
                                    "fieldfx": "round(SUM(age_45to59__11))",
                                    "title": "45 to 59"
                                },
                                {
                                    "field": "age_60plus",
                                    "fieldfx": "round(SUM(age60plus))",
                                    "title": "60+"
                                },
                                {
                                    "field": "age_profile_total",
                                    "fieldfx": "round(SUM(pop__11))",
                                    "title": "Total"
                                }
                            ],
                            "agg": {
                                "share15": {
                                    "title": "% with 15 min",
                                    "type": "integer",
                                    "rows": [
                                        "100*min15.age_under_18/min15.age_profile_total",
                                        "100*min15.age_18to24/min15.age_profile_total",
                                        "100*min15.age_25to29/min15.age_profile_total",
                                        "100*min15.age_30to44/min15.age_profile_total",
                                        "100*min15.age_45to59/min15.age_profile_total",
                                        "100*min15.age_60plus/min15.age_profile_total",
                                        "100*min15.age_profile_total/min15.age_profile_total"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                "age_uk_total": {
                                    "title": "UK %",
                                    "type": "integer",
                                    "rows": [
                                        "uk.age_under_18_uk*100/uk.age_total_uk",
                                        "uk.age_18to24_uk*100/uk.age_total_uk",
                                        "uk.age_25to29_uk*100/uk.age_total_uk",
                                        "uk.age_30to44_uk*100/uk.age_total_uk",
                                        "uk.age_45to59_uk*100/uk.age_total_uk",
                                        "uk.age_60plus_uk*100/uk.age_total_uk",
                                        "uk.age_total_uk*100/uk.age_total_uk"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                "age_index": {
                                    "title": "Age Profile Index",
                                    "type": "integer",
                                    "formatter": "progress",
                                    "formatterParams": {
                                        "strokeColor": [
                                            "rgba(211, 47, 47, 0.7)",
                                            "rgba(56, 142, 60, 0.7)"
                                        ],
                                        "legend": true,
                                        "legendAlign": "right",
                                        "max": 200
                                    },
                                    "width": 200,
                                    "sorter": "number",
                                    "rows": [
                                        "uk.age_total_uk*(100*min15.age_under_18/min15.age_profile_total)/uk.age_under_18_uk",
                                        "uk.age_total_uk*(100*min15.age_18to24/min15.age_profile_total)/uk.age_18to24_uk",
                                        "uk.age_total_uk*(100*min15.age_25to29/min15.age_profile_total)/uk.age_25to29_uk",
                                        "uk.age_total_uk*(100*min15.age_30to44/min15.age_profile_total)/uk.age_30to44_uk",
                                        "uk.age_total_uk*(100*min15.age_45to59/min15.age_profile_total)/uk.age_45to59_uk",
                                        "uk.age_total_uk*(100*min15.age_60plus/min15.age_profile_total)/uk.age_60plus_uk",
                                        "uk.age_total_uk*(100*min15.age_profile_total/min15.age_profile_total)/uk.age_total_uk"
                                    ]
                                }
                            }
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Social Grade",
                            "target_id": "social_grade",
                            "level": 2,
                            "display": true,
                            "class": "hidden_in_report",
                            "chart": {
                                "class": "hidden_in_report",
                                "type": "horizontalBar",
                                "active": true,
                                "field": "sg_index",
                                "backgroundColor": [
                                    "#8e24aa",
                                    "#1e88e5",
                                    "#00897b",
                                    "#ff8a65",
                                    "#a1887f",
                                    "#78909c"
                                ]
                            },
                            "columns": [
                                {
                                    "type": "integer",
                                    "title": "0-5 mins",
                                    "field": "min5",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_5min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "0-10 mins",
                                    "field": "min10",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_10min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "title": "0-15 mins",
                                    "field": "min15",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "field": "uk",
                                    "aspatial": "social_grade_ab_uk, social_grade_c1_uk, social_grade_c2_uk, social_grade_de_uk, social_grade_total_uk FROM geodata.uk_glx_geodata_demog_national_totals"
                                }
                            ],
                            "rows": [
                                {
                                    "field": "sg_ab",
                                    "fieldfx": "round(SUM(ski_ab__11))",
                                    "title": "AB"
                                },
                                {
                                    "field": "sg_c1",
                                    "fieldfx": "round(SUM(ski_c1__11))",
                                    "title": "C1"
                                },
                                {
                                    "field": "sg_c2",
                                    "fieldfx": "round(SUM(ski_c2__11))",
                                    "title": "C2"
                                },
                                {
                                    "field": "sg_de",
                                    "fieldfx": "round(SUM(ski_de__11))",
                                    "title": "DE"
                                },
                                {
                                    "field": "sg_total",
                                    "fieldfx": "round(SUM(ski_hrp_base__11))",
                                    "title": "Total"
                                }
                            ],
                            "agg": {
                                "share15": {
                                    "title": "% with 15 min",
                                    "type": "integer",
                                    "rows": [
                                        "100*min15.sg_ab/min15.sg_total",
                                        "100*min15.sg_c1/min15.sg_total",
                                        "100*min15.sg_c2/min15.sg_total",
                                        "100*min15.sg_de/min15.sg_total",
                                        "100*min15.sg_total/min15.sg_total"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                "sg_uk_total": {
                                    "title": "UK %",
                                    "type": "integer",
                                    "rows": [
                                        "uk.social_grade_ab_uk*100/uk.social_grade_total_uk",
                                        "uk.social_grade_c1_uk*100/uk.social_grade_total_uk",
                                        "uk.social_grade_c2_uk*100/uk.social_grade_total_uk",
                                        "uk.social_grade_de_uk*100/uk.social_grade_total_uk",
                                        "uk.social_grade_total_uk*100/uk.social_grade_total_uk"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                "sg_index": {
                                    "title": "Social Grade Index",
                                    "type": "integer",
                                    "formatter": "progress",
                                    "formatterParams": {
                                        "strokeColor": [
                                            "rgba(211, 47, 47, 0.7)",
                                            "rgba(56, 142, 60, 0.7)"
                                        ],
                                        "max": 200,
                                        "legend": true,
                                        "legendAlign": "right"
                                    },
                                    "width": 200,
                                    "sorter": "number",
                                    "rows": [
                                        "uk.social_grade_total_uk*(100*min15.sg_ab/min15.sg_total)/uk.social_grade_ab_uk",
                                        "uk.social_grade_total_uk*(100*min15.sg_c1/min15.sg_total)/uk.social_grade_c1_uk",
                                        "uk.social_grade_total_uk*(100*min15.sg_c2/min15.sg_total)/uk.social_grade_c2_uk",
                                        "uk.social_grade_total_uk*(100*min15.sg_de/min15.sg_total)/uk.social_grade_de_uk",
                                        "uk.social_grade_total_uk*(100*min15.sg_total/min15.sg_total)/uk.social_grade_total_uk"
                                    ]
                                }
                            }
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Acorn Catchment Profile",
                            "target_id": "xyz_acorn",
                            "class": "hidden_in_report",
                            "display": true,
                            "columns": [
                                {
                                    "type": "numeric",
                                    "title": "0-5 mins",
                                    "field": "min5",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "mb.output_area",
                                        "geom_a": "isoline_5min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "center",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "title": "0-10 mins",
                                    "field": "min10",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "mb.output_area",
                                        "geom_a": "isoline_10min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "center",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "title": "0-15 mins",
                                    "field": "min15",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "mb.output_area",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "center",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "field": "uk",
                                    "aspatial": "lavish_lifestyles, executive_wealth, mature_money, city_sophisticates, career_climbers, countryside_communities, successful_suburbs, steady_neighbourhoods, comfortable_seniors, starting_out, student_life, modest_means, striving_families, poorer_pensioners, young_hardship, struggling_estates, difficult_circumstances, not_private_households, total_pop FROM mb.uk_acorn_groups_regional where region = 'UK'"
                                }
                            ],
                            "rows": [
                                {
                                    "field": "lavish_lifestyles",
                                    "fieldfx": "SUM(COALESCE(b.lavish_lifestyles))",
                                    "title": "Lavish Lifestyles"
                                },
                                {
                                    "field": "executive_wealth",
                                    "fieldfx": "SUM(COALESCE(b.executive_wealth))",
                                    "title": "Executive Wealth"
                                },
                                {
                                    "field": "mature_money",
                                    "fieldfx": "SUM(COALESCE(b.mature_money))",
                                    "title": "Mature Money"
                                },
                                {
                                    "field": "city_sophisticates",
                                    "fieldfx": "SUM(COALESCE(b.city_sophisticates))",
                                    "title": "City Sophisticates"
                                },
                                {
                                    "field": "career_climbers",
                                    "fieldfx": "SUM(COALESCE(b.career_climbers))",
                                    "title": "Career Climbers"
                                },
                                {
                                    "field": "countryside_communities",
                                    "fieldfx": "SUM(COALESCE(b.countryside_communities))",
                                    "title": "Countryside Communities"
                                },
                                {
                                    "field": "successful_suburbs",
                                    "fieldfx": "SUM(COALESCE(b.successful_suburbs))",
                                    "title": "Successful Suburbs"
                                },
                                {
                                    "field": "steady_neighbourhoods",
                                    "fieldfx": "SUM(COALESCE(b.steady_neighbourhoods))",
                                    "title": "Steady Neighbourhoods"
                                },
                                {
                                    "field": "comfortable_seniors",
                                    "fieldfx": "SUM(COALESCE(b.comfortable_seniors))",
                                    "title": "Comfortable Seniors"
                                },
                                {
                                    "field": "starting_out",
                                    "fieldfx": "SUM(COALESCE(b.starting_out))",
                                    "title": "Starting Out"
                                },
                                {
                                    "field": "student_life",
                                    "fieldfx": "SUM(COALESCE(b.student_life))",
                                    "title": "Student Life"
                                },
                                {
                                    "field": "modest_means",
                                    "fieldfx": "SUM(COALESCE(b.modest_means))",
                                    "title": "Modest Means"
                                },
                                {
                                    "field": "striving_families",
                                    "fieldfx": "SUM(COALESCE(b.striving_families))",
                                    "title": "Striving Families"
                                },
                                {
                                    "field": "poorer_pensioners",
                                    "fieldfx": "SUM(COALESCE(b.poorer_pensioners))",
                                    "title": "Poorer Pensioners"
                                },
                                {
                                    "field": "young_hardship",
                                    "fieldfx": "SUM(COALESCE(b.young_hardship))",
                                    "title": "Young Hardship"
                                },
                                {
                                    "field": "struggling_estates",
                                    "fieldfx": "SUM(COALESCE(b.struggling_estates))",
                                    "title": "Struggling Estates"
                                },
                                {
                                    "field": "difficult_circumstances",
                                    "fieldfx": "SUM(COALESCE(b.difficult_circumstances))",
                                    "title": "Difficult Circumstances"
                                },
                                {
                                    "field": "not_private_households",
                                    "fieldfx": "SUM(COALESCE(b.not_private_households))",
                                    "title": "Not Private Households"
                                },
                                {
                                    "field": "total_pop",
                                    "fieldfx": "SUM(COALESCE(b.total_pop))",
                                    "title": "ACORN Total"
                                }
                            ],
                            "agg": {
                                "share15": {
                                    "title": "% with 15 min",
                                    "rows": [
                                        "100*min15.lavish_lifestyles/min15.total_pop",
                                        "100*min15.executive_wealth/min15.total_pop",
                                        "100*min15.mature_money/min15.total_pop",
                                        "100*min15.city_sophisticates/min15.total_pop",
                                        "100*min15.career_climbers/min15.total_pop",
                                        "100*min15.countryside_communities/min15.total_pop",
                                        "100*min15.successful_suburbs/min15.total_pop",
                                        "100*min15.steady_neighbourhoods/min15.total_pop",
                                        "100*min15.comfortable_seniors/min15.total_pop",
                                        "100*min15.starting_out/min15.total_pop",
                                        "100*min15.student_life/min15.total_pop",
                                        "100*min15.modest_means/min15.total_pop",
                                        "100*min15.striving_families/min15.total_pop",
                                        "100*min15.poorer_pensioners/min15.total_pop",
                                        "100*min15.young_hardship/min15.total_pop",
                                        "100*min15.struggling_estates/min15.total_pop",
                                        "100*min15.difficult_circumstances/min15.total_pop",
                                        "100*min15.not_private_households/min15.total_pop"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 1
                                    }
                                },
                                "uk_perc": {
                                    "title": "UK %",
                                    "rows": [
                                        "100*uk.lavish_lifestyles/uk.total_pop",
                                        "100*uk.executive_wealth/uk.total_pop",
                                        "100*uk.mature_money/uk.total_pop",
                                        "100*uk.city_sophisticates/uk.total_pop",
                                        "100*uk.career_climbers/uk.total_pop",
                                        "100*uk.countryside_communities/uk.total_pop",
                                        "100*uk.successful_suburbs/uk.total_pop",
                                        "100*uk.steady_neighbourhoods/uk.total_pop",
                                        "100*uk.comfortable_seniors/uk.total_pop",
                                        "100*uk.starting_out/uk.total_pop",
                                        "100*uk.student_life/uk.total_pop",
                                        "100*uk.modest_means/uk.total_pop",
                                        "100*uk.striving_families/uk.total_pop",
                                        "100*uk.poorer_pensioners/uk.total_pop",
                                        "100*uk.young_hardship/uk.total_pop",
                                        "100*uk.struggling_estates/uk.total_pop",
                                        "100*uk.difficult_circumstances/uk.total_pop",
                                        "100*uk.not_private_households/uk.total_pop"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 1
                                    }
                                },
                                "acorn_index": {
                                    "title": "ACORN Index",
                                    "type": "integer",
                                    "formatter": "progress",
                                    "formatterParams": {
                                        "strokeColor": [
                                            "rgba(211, 47, 47, 0.7)",
                                            "rgba(56, 142, 60, 0.7)"
                                        ],
                                        "max": 200,
                                        "legend": true,
                                        "legendAlign": "right"
                                    },
                                    "width": 200,
                                    "sorter": "number",
                                    "rows": [
                                        "uk.total_pop*(100*min15.lavish_lifestyles/min15.total_pop)/uk.lavish_lifestyles",
                                        "uk.total_pop*(100*min15.executive_wealth/min15.total_pop)/uk.executive_wealth",
                                        "uk.total_pop*(100*min15.mature_money/min15.total_pop)/uk.mature_money",
                                        "uk.total_pop*(100*min15.city_sophisticates/min15.total_pop)/uk.city_sophisticates",
                                        "uk.total_pop*(100*min15.career_climbers/min15.total_pop)/uk.career_climbers",
                                        "uk.total_pop*(100*min15.countryside_communities/min15.total_pop)/uk.countryside_communities",
                                        "uk.total_pop*(100*min15.successful_suburbs/min15.total_pop)/uk.successful_suburbs",
                                        "uk.total_pop*(100*min15.steady_neighbourhoods/min15.total_pop)/uk.steady_neighbourhoods",
                                        "uk.total_pop*(100*min15.comfortable_seniors/min15.total_pop)/uk.comfortable_seniors",
                                        "uk.total_pop*(100*min15.starting_out/min15.total_pop)/uk.starting_out",
                                        "uk.total_pop*(100*min15.student_life/min15.total_pop)/uk.student_life",
                                        "uk.total_pop*(100*min15.modest_means/min15.total_pop)/uk.modest_means",
                                        "uk.total_pop*(100*min15.striving_families/min15.total_pop)/uk.striving_families",
                                        "uk.total_pop*(100*min15.poorer_pensioners/min15.total_pop)/uk.poorer_pensioners",
                                        "uk.total_pop*(100*min15.young_hardship/min15.total_pop)/uk.young_hardship",
                                        "uk.total_pop*(100*min15.struggling_estates/min15.total_pop)/uk.struggling_estates",
                                        "uk.total_pop*(100*min15.difficult_circumstances/min15.total_pop)/uk.difficult_circumstances",
                                        "uk.total_pop*(100*min15.not_private_households/min15.total_pop)/uk.not_private_households"
                                    ]
                                }
                            }
                        },
                        {
                            "label": "Nearest M&B",
                            "type": "label",
                            "class": "hidden_in_report"
                        },
                        {
                            "type": "orderedList",
                            "title": "Existing",
                            "target_id": "xyz_existing",
                            "level": 2,
                            "display": true,
                            "class": "hidden_in_report",
                            "from": "live.house_list_pipeline a, mb.house_list b",
                            "where": "a.id = $1",
                            "orderby": "ST_DistanceSphere(a.geom_4326, b.geom_4326)",
                            "limit": 10,
                            "columns": [
                                {
                                    "title": "Buncode",
                                    "field": "buncode",
                                    "fieldfx": "b.buncode",
                                    "align": "right"
                                },
                                {
                                    "title": "Name",
                                    "field": "short_name",
                                    "fieldfx": "b.short_name"
                                },
                                {
                                    "title": "Postcode",
                                    "field": "postcode",
                                    "fieldfx": "b.postcode"
                                },
                                {
                                    "title": "AWT",
                                    "headerTooltip": "Average weekly takings",
                                    "field": "aws",
                                    "fieldfx": "b.aws",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "title": "Distance (km)",
                                    "field": "dist",
                                    "fieldfx": "ST_DistanceSphere(a.geom_4326, b.geom_4326) / 1000",
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 1
                                    }
                                }
                            ]
                        },
                        {
                            "type": "orderedList",
                            "title": "Acquisition",
                            "target_id": "xyz_acquisition",
                            "level": 2,
                            "display": true,
                            "class": "hidden_in_report",
                            "from": "live.house_list_pipeline a, live.house_list_pipeline b",
                            "where": "a.id = $1 AND a.id <> b.id",
                            "orderby": "ST_DistanceSphere(a.geom_4326, b.geom_4326)",
                            "limit": 3,
                            "columns": [
                                {
                                    "title": "ID",
                                    "field": "id",
                                    "fieldfx": "b.id",
                                    "align": "right"
                                },
                                {
                                    "title": "Buncode",
                                    "field": "buncode",
                                    "fieldfx": "b.buncode",
                                    "align": "right"
                                },
                                {
                                    "title": "Site name",
                                    "field": "short_name",
                                    "fieldfx": "b.short_name"
                                },
                                {
                                    "title": "Postcode",
                                    "field": "postcode",
                                    "fieldfx": "b.postcode"
                                },
                                {
                                    "title": "Distance (km)",
                                    "field": "dist",
                                    "fieldfx": "ST_DistanceSphere(a.geom_4326, b.geom_4326) / 1000",
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 1
                                    }
                                }
                            ]
                        },
                        {
                            "type": "orderedList",
                            "title": "Nearest competitors",
                            "target_id": "xyz_competition",
                            "level": 2,
                            "display": true,
                            "class": "hidden_in_report",
                            "from": "live.house_list_pipeline a, mb.competition b",
                            "where": "a.id = $1",
                            "orderby": "ST_DistanceSphere(a.geom_4326, b.geom_4326)",
                            "limit": 17,
                            "columns": [
                                {
                                    "title": "CGA ID",
                                    "field": "cga_identifier",
                                    "fieldfx": "b.cga_identifier",
                                    "align": "right"
                                },
                                {
                                    "title": "Site name",
                                    "field": "site_name",
                                    "fieldfx": "b.site_name"
                                },
                                {
                                    "title": "Brand",
                                    "field": "brand_name",
                                    "fieldfx": "b.brand_name"
                                },
                                {
                                    "title": "Owner Name",
                                    "field": "owner_name",
                                    "fieldfx": "b.owner_name"
                                },
                                {
                                    "title": "Owner Group",
                                    "field": "owner_group",
                                    "fieldfx": "b.owner_group"
                                },
                                {
                                    "title": "Licence",
                                    "field": "site_licence_name",
                                    "fieldfx": "b.site_licence_name"
                                },
                                {
                                    "title": "Type",
                                    "field": "main_comp_display",
                                    "fieldfx": "b.main_comp_display"
                                },
                                {
                                    "title": "Postcode",
                                    "field": "postcode",
                                    "fieldfx": "b.postcode"
                                },
                                {
                                    "title": "Distance (km)",
                                    "field": "dist",
                                    "fieldfx": "ST_DistanceSphere(a.geom_4326, b.geom_4326) / 1000",
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 1
                                    }
                                }
                            ]
                        },
                        {
                            "type": "dashboard",
                            "title": "Propensity Index",
                            "level": 2,
                            "display": true,
                            "target_id": "xyz_propensity_index",
                            "class": "hidden_in_report"
                        },
                        {
                            "type": "pgFunction",
                            "dashboard": "Propensity Index",
                            "pgFunction": "model.get_propensity_index_pipeline",
                            "chart": {
                                "title": {
                                    "display": true,
                                    "position": "bottom",
                                    "text": "The MAB propensity score is a measure to indicate what brand is most aligned to the catchment based on population and distance-decay.",
                                    "fontSize": 11,
                                    "fontStyle": "normal"
                                },
                                "layout": {
                                    "padding": {
                                        "left": 50,
                                        "right": 50
                                    }
                                },
                                "hideTicksX": true,
                                "negativeBackgroundColor": "rgba(211, 47, 47, 0.7)",
                                "negativeBorderColor": "#d32f2f",
                                "backgroundColor": "rgba(56, 142, 60, 0.7)",
                                "borderColor": "#388e3c",
                                "offsetX": -100,
                                "datalabels": {
                                    "align": "right",
                                    "anchor": "end"
                                },
                                "width": 800,
                                "height": 500,
                                "type": "horizontalBar",
                                "label": "crmbrandid",
                                "x": "brand",
                                "y": "propensity_index"
                            }
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Market Overview",
                            "level": 2,
                            "display": true,
                            "class": "hidden_in_report",
                            "target_id": "xyz_market_overview",
                            "columns": [
                                {
                                    "type": "integer",
                                    "title": "Competition",
                                    "field": "shoppertown_comp",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "mb.competition",
                                        "geom_a": "geom_4326",
                                        "geom_b": "geom_4326",
                                        "where_a": {
                                            "spatial": {
                                                "table": "geodata.uk_glx_geodata_seamless_shopper_town",
                                                "geom": "geom_4326"
                                            }
                                        }
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "M & B",
                                    "field": "shoppertown_mb",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "mb.competition",
                                        "geom_a": "geom_4326",
                                        "geom_b": "geom_4326",
                                        "where_a": {
                                            "spatial": {
                                                "table": "geodata.uk_glx_geodata_seamless_shopper_town",
                                                "geom": "geom_4326"
                                            }
                                        }
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "Total",
                                    "field": "shoppertown_total",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "mb.competition",
                                        "geom_a": "geom_4326",
                                        "geom_b": "geom_4326",
                                        "where_a": {
                                            "spatial": {
                                                "table": "geodata.uk_glx_geodata_seamless_shopper_town",
                                                "geom": "geom_4326"
                                            }
                                        }
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                }
                            ],
                            "rows": [
                                {
                                    "field": "large_pub_group",
                                    "fieldfx": "(SUM(CASE WHEN b.owner_group = 'Large Pub Group' THEN 1 ELSE 0 END))",
                                    "title": "Large Pub Group"
                                },
                                {
                                    "field": "medium_pub_group",
                                    "fieldfx": "(SUM(CASE WHEN b.owner_group = 'Medium Pub Group' THEN 1 ELSE 0 END))",
                                    "title": "Medium Pub Group"
                                },
                                {
                                    "field": "large_restaurant_group",
                                    "fieldfx": "(SUM(CASE WHEN b.owner_group = 'Large Restaurant Group' THEN 1 ELSE 0 END))",
                                    "title": "Large Restaurant Group"
                                },
                                {
                                    "field": "small_restaurant_group",
                                    "fieldfx": "(SUM(CASE WHEN b.owner_group = 'Small Restaurant Group' THEN 1 ELSE 0 END))",
                                    "title": "Small Restaurant Group"
                                },
                                {
                                    "field": "independent",
                                    "fieldfx": "(SUM(CASE WHEN b.owner_group = 'Independent' THEN 1 ELSE 0 END))",
                                    "title": "Independent"
                                },
                                {
                                    "field": "total",
                                    "fieldfx": "(SUM(CASE WHEN b.owner_group in ('Large Pub Group', 'Medium Pub Group', 'Large Restaurant Group', 'Small Restaurant Group', 'Independent') THEN 1 ELSE 0 END))",
                                    "title": "Total"
                                }
                            ]
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Saturation",
                            "pgFunction": "model.get_saturation_index_pipeline",
                            "target_id": "xyz_saturation",
                            "class": "hidden_in_report",
                            "level": 2,
                            "display": true,
                            "columns": [
                                {
                                    "field": "shoptown_pop_per_pub",
                                    "title": "Population per pub",
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "field": "uk_pop_per_pub",
                                    "title": "UK Population per pub",
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "decimal": ".",
                                        "thousand": ",",
                                        "precision": 0
                                    }
                                },
                                {
                                    "field": "saturation_index",
                                    "title": "Headroom Index",
                                    "align": "right",
                                    "type": "integer",
                                    "formatter": "progress",
                                    "formatterParams": {
                                        "strokeColor": [
                                            "rgba(211, 47, 47, 0.7)",
                                            "rgba(56, 142, 60, 0.7)"
                                        ],
                                        "legend": true,
                                        "legendAlign": "right",
                                        "max": 200
                                    }
                                }
                            ]
                        },
                        {
                            "field": "edited",
                            "label": "Created on",
                            "type": "datetime",
                            "class": "hidden_in_report"
                        },
                        {
                            "label": "Images",
                            "field": "images",
                            "type": "images",
                            "edit": true,
                            "class": "hidden_in_report"
                        },
                        {
                            "type": "streetview",
                            "class": "hidden_in_report"
                        }
                    ],
                    "style": {
                        "marker": {
                            "type": "target",
                            "fillColor": "#2364AA",
                            "layers": {
                                "0.75": "#EEE",
                                "0.50": "#2364AA"
                            }
                        },
                        "markerMulti": {
                            "type": "target",
                            "fillColor": "#2364AA",
                            "layers": {
                                "0.75": "#EEE",
                                "0.50": "#2364AA"
                            }
                        },
                        "themes": {
                            "Review Stage": {
                                "type": "categorized",
                                "field": "review_stage",
                                "cat": {
                                    "Lead": {
                                        "style": {
                                            "fillColor": "#3498DB",
                                            "layers": {
                                                "0.6": "#ffffff",
                                                "0.3": "#3498DB"
                                            }
                                        }
                                    },
                                    "Sep Issued": {
                                        "style": {
                                            "fillColor": "#1ABC9C",
                                            "layers": {
                                                "0.6": "#ffffff",
                                                "0.3": "#1ABC9C"
                                            }
                                        }
                                    },
                                    "Endorsed by DD": {
                                        "style": {
                                            "fillColor": "#AF7AC5",
                                            "layers": {
                                                "0.6": "#ffffff",
                                                "0.3": "#AF7AC5"
                                            }
                                        }
                                    },
                                    "PDC Approved": {
                                        "style": {
                                            "fillColor": "#BDC3C7",
                                            "layers": {
                                                "0.6": "#ffffff",
                                                "0.3": "#BDC3C7"
                                            }
                                        }
                                    },
                                    "Open Trading": {
                                        "style": {
                                            "fillColor": "#2ECC71",
                                            "layers": {
                                                "0.6": "#ffffff",
                                                "0.3": "#2ECC71"
                                            }
                                        }
                                    },
                                    "Rejected": {
                                        "style": {
                                            "fillColor": "#E74C3C",
                                            "layers": {
                                                "0.6": "#ffffff",
                                                "0.3": "#E74C3C"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "roles": {
                        "Standard": null
                    }
                },
                "Acquisitions Pipeline (edit)": {
                    "meta": "Added on 19 August 2019.",
                    "format": "cluster",
                    "geom": "geom_4326",
                    "srid": "4326",
                    "dbs": "MB",
                    "qID": "id",
                    "table": "live.house_list_pipeline",
                    "edit": {
                        "properties": true,
                        "point": true,
                        "delete": true
                    },
                    "cluster_label": "short_name",
                    "dataview": {
                        "mb_pubs": {
                            "title": "Acquisitions Pipeline (edit)",
                            "type": "table",
                            "display": true,
                            "toolbars": {},
                            "from": "live.house_list_pipeline",
                            "limit": 300,
                            "columns": [
                                {
                                    "field": "id",
                                    "title": "Key Ref"
                                },
                                {
                                    "field": "key_ref",
                                    "title": "Old Key Ref"
                                },
                                {
                                    "field": "buncode",
                                    "title": "Bun Number"
                                },
                                {
                                    "field": "short_name",
                                    "title": "Site Name"
                                },
                                {
                                    "field": "street",
                                    "title": "Street"
                                },
                                {
                                    "field": "town",
                                    "title": "Town"
                                },
                                {
                                    "field": "postcode",
                                    "title": "Postcode"
                                },
                                {
                                    "field": "review_stage",
                                    "title": "Review Stage"
                                },
                                {
                                    "field": "model_sales",
                                    "label": "Site Feasibility Forecast",
                                    "type": "integer"
                                },
                                {
                                    "field": "source_group",
                                    "title": "Source Group"
                                },
                                {
                                    "field": "contract_stage",
                                    "title": "Contract Stage"
                                },
                                {
                                    "field": "reason_rejection",
                                    "title": "Reason For Rejection"
                                },
                                {
                                    "field": "rejection_notes",
                                    "title": "Rejection Notes"
                                },
                                {
                                    "field": "comments",
                                    "title": "Comments"
                                },
                                {
                                    "field": "crmbrandname",
                                    "title": "Potential Brand"
                                },
                                {
                                    "field": "potential_2nd_brand_name",
                                    "title": "Potential Second Brand"
                                },
                                {
                                    "field": "site_type",
                                    "title": "Site Type"
                                },
                                {
                                    "field": "edited",
                                    "title": "Edited on",
                                    "type": "datetime"
                                }
                            ]
                        }
                    },
                    "infoj": [
                        {
                            "type": "key",
                            "class": "hidden_in_report"
                        },
                        {
                            "type": "report",
                            "class": "hidden_in_report",
                            "report": {
                                "name": "High Level Report",
                                "template": "https://api.github.com/repos/GEOLYTIX/xyz_resources/contents/mb/report_v2.html"
                            }
                        },
                        {
                            "field": "id",
                            "label": "Key Reference",
                            "inline": true,
                            "class": "hidden_in_report"
                        },
                        {
                            "label": "Town",
                            "field": "intersecting_town",
                            "fieldfx": "SELECT b.town_name FROM live.house_list_pipeline a, geodata.uk_glx_geodata_seamless_town b WHERE a.id = $1 AND ST_Contains(b.geom_4326, a.geom_4326) LIMIT 1",
                            "inline": true
                        },
                        {
                            "label": "Shoppertown",
                            "field": "intersecting_shoptown",
                            "fieldfx": "SELECT b.shop_town FROM live.house_list_pipeline a, geodata.uk_glx_geodata_seamless_shopper_town b WHERE a.id = $1 AND ST_Contains(b.geom_4326, a.geom_4326) LIMIT 1",
                            "inline": true
                        },
                        {
                            "label": "Population",
                            "field": "intersecting_shoptown_pop",
                            "fieldfx": "SELECT b.pop FROM live.house_list_pipeline a, geodata.uk_glx_geodata_seamless_shopper_town b WHERE a.id = $1 AND ST_Contains(b.geom_4326, a.geom_4326) LIMIT 1",
                            "type": "integer",
                            "inline": true
                        },
                        {
                            "field": "short_name",
                            "label": "Site Name",
                            "edit": true
                        },
                        {
                            "field": "key_ref",
                            "label": "Old Key reference",
                            "edit": true,
                            "inline": true,
                            "class": "hidden_in_report"
                        },
                        {
                            "field": "buncode",
                            "label": "Bun Code",
                            "edit": true,
                            "inline": true,
                            "class": "hidden_in_report"
                        },
                        {
                            "label": "Address",
                            "type": "label"
                        },
                        {
                            "field": "street",
                            "label": "Street",
                            "edit": true,
                            "level": 1
                        },
                        {
                            "field": "town",
                            "label": "Town",
                            "edit": true,
                            "inline": true,
                            "level": 1
                        },
                        {
                            "field": "postcode",
                            "label": "Postcode",
                            "edit": true,
                            "inline": true,
                            "level": 1
                        },
                        {
                            "type": "group",
                            "label": "Model Drivers",
                            "expanded": true
                        },
                        {
                            "field": "crmbrandname",
                            "group": "Model Drivers",
                            "label": "Potential Brand",
                            "inline": true,
                            "edit": {
                                "options": [
                                    "All Bar One",
                                    "Browns",
                                    "Castle",
                                    "Ember",
                                    "Harvester",
                                    "Miller and Carter",
                                    "Nicholsons",
                                    "Oak Tree - Suburban",
                                    "Oak Tree - High Street",
                                    "ONeill's",
                                    "Premium Country Pubs",
                                    "Sizzling Pubs",
                                    "Toby Carvery",
                                    "Vintage Inns",
                                    "Other",
                                    ""
                                ]
                            }
                        },
                        {
                            "field": "building_total_internal_eda",
                            "group": "Model Drivers",
                            "label": "Internal EDA",
                            "edit": true,
                            "type": "integer"
                        },
                        {
                            "field": "building_total_internal_covers",
                            "group": "Model Drivers",
                            "label": "Internal Covers",
                            "edit": true,
                            "type": "integer"
                        },
                        {
                            "field": "building_total_external_eda",
                            "group": "Model Drivers",
                            "label": "External EDA",
                            "edit": true,
                            "type": "integer"
                        },
                        {
                            "field": "building_total_external_covers",
                            "group": "Model Drivers",
                            "label": "External Covers",
                            "edit": true,
                            "type": "integer"
                        },
                        {
                            "field": "building_total_car_parking_spac",
                            "group": "Model Drivers",
                            "label": "Car Parking Spaces",
                            "edit": true,
                            "type": "integer"
                        },
                        {
                            "field": "model_sales",
                            "group": "Model Drivers",
                            "label": "Site Feasibility Forecast",
                            "type": "integer"
                        },
                        {
                            "field": "potential_2nd_brand_name",
                            "label": "Potential 2nd Brand",
                            "inline": true,
                            "edit": {
                                "options": [
                                    "All Bar One",
                                    "Browns",
                                    "Castle",
                                    "Ember",
                                    "Harvester",
                                    "Miller and Carter",
                                    "Nicholson's",
                                    "Oak Tree - Suburban",
                                    "Oak Tree - High Street",
                                    "O Neills",
                                    "Premium Country Pubs",
                                    "Sizzling Pubs",
                                    "Toby Carvery",
                                    "Vintage Inns",
                                    "Other",
                                    ""
                                ]
                            }
                        },
                        {
                            "field": "site_type",
                            "label": "Site type",
                            "inline": true,
                            "edit": {
                                "options": [
                                    "Existing",
                                    "Greenfield",
                                    "other",
                                    ""
                                ]
                            }
                        },
                        {
                            "field": "review_stage",
                            "label": "Review Stage",
                            "inline": true,
                            "edit": {
                                "options": [
                                    "Lead",
                                    "SEP Issued",
                                    "Endorsed by DD",
                                    "PDC Approved",
                                    "Open Trading",
                                    "Rejected",
                                    "other",
                                    ""
                                ]
                            }
                        },
                        {
                            "field": "source_group",
                            "label": "Source group",
                            "inline": true,
                            "edit": {
                                "options": [
                                    "Marstons",
                                    "Savills",
                                    "other",
                                    ""
                                ]
                            }
                        },
                        {
                            "field": "contract_stage",
                            "label": "Contract stage",
                            "inline": true,
                            "edit": {
                                "options": [
                                    "Contract Completed",
                                    "Negotiations",
                                    "other",
                                    ""
                                ]
                            }
                        },
                        {
                            "field": "reason_rejection",
                            "label": "Reason for rejection",
                            "type": "textarea",
                            "edit": true
                        },
                        {
                            "field": "rejection_notes",
                            "label": "Rejection notes",
                            "type": "textarea",
                            "edit": true
                        },
                        {
                            "field": "comments",
                            "label": "Comments",
                            "type": "textarea",
                            "edit": true
                        },
                        {
                            "label": "Drivetimes",
                            "type": "label",
                            "class": "hidden_in_report"
                        },
                        {
                            "name": "5 min",
                            "field": "isoline_5min",
                            "fieldfx": "ST_asGeoJson(isoline_5min)",
                            "type": "geometry",
                            "class": "hidden_in_report",
                            "display": true,
                            "level": 2,
                            "edit": {
                                "isoline_here": {
                                    "minutes": 5
                                }
                            },
                            "style": {
                                "strokeColor": "#BB0A21",
                                "fillColor": "#BB0A21",
                                "strokeWidth": 2,
                                "fillOpacity": 0.2
                            }
                        },
                        {
                            "name": "10 min",
                            "field": "isoline_10min",
                            "fieldfx": "ST_asGeoJson(isoline_10min)",
                            "type": "geometry",
                            "class": "hidden_in_report",
                            "display": true,
                            "level": 2,
                            "edit": {
                                "isoline_here": {
                                    "minutes": 10
                                }
                            },
                            "style": {
                                "strokeColor": "#F49D37",
                                "fillColor": "#F49D37",
                                "fillOpacity": 0.2,
                                "strokeWidth": 2
                            }
                        },
                        {
                            "name": "15 min",
                            "field": "isoline_15min",
                            "fieldfx": "ST_asGeoJson(isoline_15min)",
                            "type": "geometry",
                            "class": "hidden_in_report",
                            "display": true,
                            "level": 2,
                            "edit": {
                                "isoline_here": {
                                    "minutes": 15
                                }
                            },
                            "style": {
                                "strokeColor": "#FFF05A",
                                "fillColor": "#FFF05A",
                                "strokeWidth": 2,
                                "fillOpacity": 0.2
                            }
                        },
                        {
                            "name": "30 min",
                            "field": "isoline_30min",
                            "fieldfx": "ST_asGeoJson(isoline_30min)",
                            "type": "geometry",
                            "class": "hidden_in_report",
                            "display": true,
                            "level": 2,
                            "edit": {
                                "isoline_here": {
                                    "minutes": 30
                                }
                            },
                            "style": {
                                "strokeColor": "#26a69a",
                                "fillColor": "#26a69a",
                                "strokeWidth": 2,
                                "fillOpacity": 0.2
                            }
                        },
                        {
                            "label": "Demographic Summary",
                            "type": "label",
                            "class": "hidden_in_report"
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Population",
                            "target_id": "population_summary",
                            "class": "hidden_in_report",
                            "level": 2,
                            "display": true,
                            "columns": [
                                {
                                    "type": "integer",
                                    "title": "0-5 mins",
                                    "field": "min5",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_5min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "0-10 mins",
                                    "field": "min10",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_10min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "0-15 mins",
                                    "field": "min15",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                }
                            ],
                            "rows": [
                                {
                                    "field": "pop__17",
                                    "fieldfx": "SUM(b.pop__17)",
                                    "title": "Current Population"
                                },
                                {
                                    "field": "pop__11",
                                    "fieldfx": "SUM(b.pop__11)",
                                    "title": "Population 2011"
                                },
                                {
                                    "field": "pop_growth",
                                    "fieldfx": "SUM(b.pop__17 - b.pop__11) * 100 / SUM(b.pop__11)",
                                    "title": "Population Growth"
                                }
                            ]
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Age Profile",
                            "target_id": "age_profile",
                            "level": 2,
                            "display": true,
                            "class": "hidden_in_report",
                            "chart": {
                                "type": "horizontalBar",
                                "class": "hidden_in_report",
                                "active": true,
                                "field": "age_index"
                            },
                            "columns": [
                                {
                                    "type": "integer",
                                    "title": "0-5 mins",
                                    "field": "min5",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_5min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "0-10 mins",
                                    "field": "min10",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_10min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "title": "0-15 mins",
                                    "field": "min15",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "field": "uk",
                                    "aspatial": "age_under_18_uk, age_18to24_uk, age_25to29_uk, age_30to44_uk, age_45to59_uk, age_60plus_uk, age_total_uk FROM geodata.uk_glx_geodata_demog_national_totals"
                                }
                            ],
                            "rows": [
                                {
                                    "field": "age_under_18",
                                    "title": "< 18",
                                    "fieldfx": "round(SUM(pop__11 - age_18to19__11 - age_20to24__11 - age_25to29__11 - age_30to44__11 - age_45to59__11 - age60plus))"
                                },
                                {
                                    "field": "age_18to24",
                                    "fieldfx": "round(SUM(age_18to19__11 + age_20to24__11))",
                                    "title": "18 to 24"
                                },
                                {
                                    "field": "age_25to29",
                                    "fieldfx": "round(SUM(age_25to29__11))",
                                    "title": "25 to 29"
                                },
                                {
                                    "field": "age_30to44",
                                    "fieldfx": "round(SUM(age_30to44__11))",
                                    "title": "30 to 44"
                                },
                                {
                                    "field": "age_45to59",
                                    "fieldfx": "round(SUM(age_45to59__11))",
                                    "title": "45 to 59"
                                },
                                {
                                    "field": "age_60plus",
                                    "fieldfx": "round(SUM(age60plus))",
                                    "title": "60+"
                                },
                                {
                                    "field": "age_profile_total",
                                    "fieldfx": "round(SUM(pop__11))",
                                    "title": "Total"
                                }
                            ],
                            "agg": {
                                "share15": {
                                    "title": "% with 15 min",
                                    "type": "integer",
                                    "rows": [
                                        "100*min15.age_under_18/min15.age_profile_total",
                                        "100*min15.age_18to24/min15.age_profile_total",
                                        "100*min15.age_25to29/min15.age_profile_total",
                                        "100*min15.age_30to44/min15.age_profile_total",
                                        "100*min15.age_45to59/min15.age_profile_total",
                                        "100*min15.age_60plus/min15.age_profile_total",
                                        "100*min15.age_profile_total/min15.age_profile_total"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                "age_uk_total": {
                                    "title": "UK %",
                                    "type": "integer",
                                    "rows": [
                                        "uk.age_under_18_uk*100/uk.age_total_uk",
                                        "uk.age_18to24_uk*100/uk.age_total_uk",
                                        "uk.age_25to29_uk*100/uk.age_total_uk",
                                        "uk.age_30to44_uk*100/uk.age_total_uk",
                                        "uk.age_45to59_uk*100/uk.age_total_uk",
                                        "uk.age_60plus_uk*100/uk.age_total_uk",
                                        "uk.age_total_uk*100/uk.age_total_uk"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                "age_index": {
                                    "title": "Age Profile Index",
                                    "type": "integer",
                                    "formatter": "progress",
                                    "formatterParams": {
                                        "strokeColor": [
                                            "rgba(211, 47, 47, 0.7)",
                                            "rgba(56, 142, 60, 0.7)"
                                        ],
                                        "legend": true,
                                        "legendAlign": "right",
                                        "max": 200
                                    },
                                    "width": 200,
                                    "sorter": "number",
                                    "rows": [
                                        "uk.age_total_uk*(100*min15.age_under_18/min15.age_profile_total)/uk.age_under_18_uk",
                                        "uk.age_total_uk*(100*min15.age_18to24/min15.age_profile_total)/uk.age_18to24_uk",
                                        "uk.age_total_uk*(100*min15.age_25to29/min15.age_profile_total)/uk.age_25to29_uk",
                                        "uk.age_total_uk*(100*min15.age_30to44/min15.age_profile_total)/uk.age_30to44_uk",
                                        "uk.age_total_uk*(100*min15.age_45to59/min15.age_profile_total)/uk.age_45to59_uk",
                                        "uk.age_total_uk*(100*min15.age_60plus/min15.age_profile_total)/uk.age_60plus_uk",
                                        "uk.age_total_uk*(100*min15.age_profile_total/min15.age_profile_total)/uk.age_total_uk"
                                    ]
                                }
                            }
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Social Grade",
                            "target_id": "social_grade",
                            "level": 2,
                            "display": true,
                            "class": "hidden_in_report",
                            "chart": {
                                "class": "hidden_in_report",
                                "type": "horizontalBar",
                                "active": true,
                                "field": "sg_index",
                                "backgroundColor": [
                                    "#8e24aa",
                                    "#1e88e5",
                                    "#00897b",
                                    "#ff8a65",
                                    "#a1887f",
                                    "#78909c"
                                ]
                            },
                            "columns": [
                                {
                                    "type": "integer",
                                    "title": "0-5 mins",
                                    "field": "min5",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_5min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "0-10 mins",
                                    "field": "min10",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_10min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "title": "0-15 mins",
                                    "field": "min15",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "geodata.uk_glx_geodata_hex_1k",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "field": "uk",
                                    "aspatial": "social_grade_ab_uk, social_grade_c1_uk, social_grade_c2_uk, social_grade_de_uk, social_grade_total_uk FROM geodata.uk_glx_geodata_demog_national_totals"
                                }
                            ],
                            "rows": [
                                {
                                    "field": "sg_ab",
                                    "fieldfx": "round(SUM(ski_ab__11))",
                                    "title": "AB"
                                },
                                {
                                    "field": "sg_c1",
                                    "fieldfx": "round(SUM(ski_c1__11))",
                                    "title": "C1"
                                },
                                {
                                    "field": "sg_c2",
                                    "fieldfx": "round(SUM(ski_c2__11))",
                                    "title": "C2"
                                },
                                {
                                    "field": "sg_de",
                                    "fieldfx": "round(SUM(ski_de__11))",
                                    "title": "DE"
                                },
                                {
                                    "field": "sg_total",
                                    "fieldfx": "round(SUM(ski_hrp_base__11))",
                                    "title": "Total"
                                }
                            ],
                            "agg": {
                                "share15": {
                                    "title": "% with 15 min",
                                    "type": "integer",
                                    "rows": [
                                        "100*min15.sg_ab/min15.sg_total",
                                        "100*min15.sg_c1/min15.sg_total",
                                        "100*min15.sg_c2/min15.sg_total",
                                        "100*min15.sg_de/min15.sg_total",
                                        "100*min15.sg_total/min15.sg_total"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                "sg_uk_total": {
                                    "title": "UK %",
                                    "type": "integer",
                                    "rows": [
                                        "uk.social_grade_ab_uk*100/uk.social_grade_total_uk",
                                        "uk.social_grade_c1_uk*100/uk.social_grade_total_uk",
                                        "uk.social_grade_c2_uk*100/uk.social_grade_total_uk",
                                        "uk.social_grade_de_uk*100/uk.social_grade_total_uk",
                                        "uk.social_grade_total_uk*100/uk.social_grade_total_uk"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                "sg_index": {
                                    "title": "Social Grade Index",
                                    "type": "integer",
                                    "formatter": "progress",
                                    "formatterParams": {
                                        "strokeColor": [
                                            "rgba(211, 47, 47, 0.7)",
                                            "rgba(56, 142, 60, 0.7)"
                                        ],
                                        "max": 200,
                                        "legend": true,
                                        "legendAlign": "right"
                                    },
                                    "width": 200,
                                    "sorter": "number",
                                    "rows": [
                                        "uk.social_grade_total_uk*(100*min15.sg_ab/min15.sg_total)/uk.social_grade_ab_uk",
                                        "uk.social_grade_total_uk*(100*min15.sg_c1/min15.sg_total)/uk.social_grade_c1_uk",
                                        "uk.social_grade_total_uk*(100*min15.sg_c2/min15.sg_total)/uk.social_grade_c2_uk",
                                        "uk.social_grade_total_uk*(100*min15.sg_de/min15.sg_total)/uk.social_grade_de_uk",
                                        "uk.social_grade_total_uk*(100*min15.sg_total/min15.sg_total)/uk.social_grade_total_uk"
                                    ]
                                }
                            }
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Acorn Catchment Profile",
                            "target_id": "xyz_acorn",
                            "class": "hidden_in_report",
                            "display": true,
                            "columns": [
                                {
                                    "type": "numeric",
                                    "title": "0-5 mins",
                                    "field": "min5",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "mb.output_area",
                                        "geom_a": "isoline_5min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "center",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "title": "0-10 mins",
                                    "field": "min10",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "mb.output_area",
                                        "geom_a": "isoline_10min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "center",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "title": "0-15 mins",
                                    "field": "min15",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "mb.output_area",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geom_p_4326"
                                    },
                                    "align": "center",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "field": "uk",
                                    "aspatial": "lavish_lifestyles, executive_wealth, mature_money, city_sophisticates, career_climbers, countryside_communities, successful_suburbs, steady_neighbourhoods, comfortable_seniors, starting_out, student_life, modest_means, striving_families, poorer_pensioners, young_hardship, struggling_estates, difficult_circumstances, not_private_households, total_pop FROM mb.uk_acorn_groups_regional where region = 'UK'"
                                }
                            ],
                            "rows": [
                                {
                                    "field": "lavish_lifestyles",
                                    "fieldfx": "SUM(COALESCE(b.lavish_lifestyles))",
                                    "title": "Lavish Lifestyles"
                                },
                                {
                                    "field": "executive_wealth",
                                    "fieldfx": "SUM(COALESCE(b.executive_wealth))",
                                    "title": "Executive Wealth"
                                },
                                {
                                    "field": "mature_money",
                                    "fieldfx": "SUM(COALESCE(b.mature_money))",
                                    "title": "Mature Money"
                                },
                                {
                                    "field": "city_sophisticates",
                                    "fieldfx": "SUM(COALESCE(b.city_sophisticates))",
                                    "title": "City Sophisticates"
                                },
                                {
                                    "field": "career_climbers",
                                    "fieldfx": "SUM(COALESCE(b.career_climbers))",
                                    "title": "Career Climbers"
                                },
                                {
                                    "field": "countryside_communities",
                                    "fieldfx": "SUM(COALESCE(b.countryside_communities))",
                                    "title": "Countryside Communities"
                                },
                                {
                                    "field": "successful_suburbs",
                                    "fieldfx": "SUM(COALESCE(b.successful_suburbs))",
                                    "title": "Successful Suburbs"
                                },
                                {
                                    "field": "steady_neighbourhoods",
                                    "fieldfx": "SUM(COALESCE(b.steady_neighbourhoods))",
                                    "title": "Steady Neighbourhoods"
                                },
                                {
                                    "field": "comfortable_seniors",
                                    "fieldfx": "SUM(COALESCE(b.comfortable_seniors))",
                                    "title": "Comfortable Seniors"
                                },
                                {
                                    "field": "starting_out",
                                    "fieldfx": "SUM(COALESCE(b.starting_out))",
                                    "title": "Starting Out"
                                },
                                {
                                    "field": "student_life",
                                    "fieldfx": "SUM(COALESCE(b.student_life))",
                                    "title": "Student Life"
                                },
                                {
                                    "field": "modest_means",
                                    "fieldfx": "SUM(COALESCE(b.modest_means))",
                                    "title": "Modest Means"
                                },
                                {
                                    "field": "striving_families",
                                    "fieldfx": "SUM(COALESCE(b.striving_families))",
                                    "title": "Striving Families"
                                },
                                {
                                    "field": "poorer_pensioners",
                                    "fieldfx": "SUM(COALESCE(b.poorer_pensioners))",
                                    "title": "Poorer Pensioners"
                                },
                                {
                                    "field": "young_hardship",
                                    "fieldfx": "SUM(COALESCE(b.young_hardship))",
                                    "title": "Young Hardship"
                                },
                                {
                                    "field": "struggling_estates",
                                    "fieldfx": "SUM(COALESCE(b.struggling_estates))",
                                    "title": "Struggling Estates"
                                },
                                {
                                    "field": "difficult_circumstances",
                                    "fieldfx": "SUM(COALESCE(b.difficult_circumstances))",
                                    "title": "Difficult Circumstances"
                                },
                                {
                                    "field": "not_private_households",
                                    "fieldfx": "SUM(COALESCE(b.not_private_households))",
                                    "title": "Not Private Households"
                                },
                                {
                                    "field": "total_pop",
                                    "fieldfx": "SUM(COALESCE(b.total_pop))",
                                    "title": "ACORN Total"
                                }
                            ],
                            "agg": {
                                "share15": {
                                    "title": "% with 15 min",
                                    "rows": [
                                        "100*min15.lavish_lifestyles/min15.total_pop",
                                        "100*min15.executive_wealth/min15.total_pop",
                                        "100*min15.mature_money/min15.total_pop",
                                        "100*min15.city_sophisticates/min15.total_pop",
                                        "100*min15.career_climbers/min15.total_pop",
                                        "100*min15.countryside_communities/min15.total_pop",
                                        "100*min15.successful_suburbs/min15.total_pop",
                                        "100*min15.steady_neighbourhoods/min15.total_pop",
                                        "100*min15.comfortable_seniors/min15.total_pop",
                                        "100*min15.starting_out/min15.total_pop",
                                        "100*min15.student_life/min15.total_pop",
                                        "100*min15.modest_means/min15.total_pop",
                                        "100*min15.striving_families/min15.total_pop",
                                        "100*min15.poorer_pensioners/min15.total_pop",
                                        "100*min15.young_hardship/min15.total_pop",
                                        "100*min15.struggling_estates/min15.total_pop",
                                        "100*min15.difficult_circumstances/min15.total_pop",
                                        "100*min15.not_private_households/min15.total_pop"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 1
                                    }
                                },
                                "uk_perc": {
                                    "title": "UK %",
                                    "rows": [
                                        "100*uk.lavish_lifestyles/uk.total_pop",
                                        "100*uk.executive_wealth/uk.total_pop",
                                        "100*uk.mature_money/uk.total_pop",
                                        "100*uk.city_sophisticates/uk.total_pop",
                                        "100*uk.career_climbers/uk.total_pop",
                                        "100*uk.countryside_communities/uk.total_pop",
                                        "100*uk.successful_suburbs/uk.total_pop",
                                        "100*uk.steady_neighbourhoods/uk.total_pop",
                                        "100*uk.comfortable_seniors/uk.total_pop",
                                        "100*uk.starting_out/uk.total_pop",
                                        "100*uk.student_life/uk.total_pop",
                                        "100*uk.modest_means/uk.total_pop",
                                        "100*uk.striving_families/uk.total_pop",
                                        "100*uk.poorer_pensioners/uk.total_pop",
                                        "100*uk.young_hardship/uk.total_pop",
                                        "100*uk.struggling_estates/uk.total_pop",
                                        "100*uk.difficult_circumstances/uk.total_pop",
                                        "100*uk.not_private_households/uk.total_pop"
                                    ],
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 1
                                    }
                                },
                                "acorn_index": {
                                    "title": "ACORN Index",
                                    "type": "integer",
                                    "formatter": "progress",
                                    "formatterParams": {
                                        "strokeColor": [
                                            "rgba(211, 47, 47, 0.7)",
                                            "rgba(56, 142, 60, 0.7)"
                                        ],
                                        "max": 200,
                                        "legend": true,
                                        "legendAlign": "right"
                                    },
                                    "width": 200,
                                    "sorter": "number",
                                    "rows": [
                                        "uk.total_pop*(100*min15.lavish_lifestyles/min15.total_pop)/uk.lavish_lifestyles",
                                        "uk.total_pop*(100*min15.executive_wealth/min15.total_pop)/uk.executive_wealth",
                                        "uk.total_pop*(100*min15.mature_money/min15.total_pop)/uk.mature_money",
                                        "uk.total_pop*(100*min15.city_sophisticates/min15.total_pop)/uk.city_sophisticates",
                                        "uk.total_pop*(100*min15.career_climbers/min15.total_pop)/uk.career_climbers",
                                        "uk.total_pop*(100*min15.countryside_communities/min15.total_pop)/uk.countryside_communities",
                                        "uk.total_pop*(100*min15.successful_suburbs/min15.total_pop)/uk.successful_suburbs",
                                        "uk.total_pop*(100*min15.steady_neighbourhoods/min15.total_pop)/uk.steady_neighbourhoods",
                                        "uk.total_pop*(100*min15.comfortable_seniors/min15.total_pop)/uk.comfortable_seniors",
                                        "uk.total_pop*(100*min15.starting_out/min15.total_pop)/uk.starting_out",
                                        "uk.total_pop*(100*min15.student_life/min15.total_pop)/uk.student_life",
                                        "uk.total_pop*(100*min15.modest_means/min15.total_pop)/uk.modest_means",
                                        "uk.total_pop*(100*min15.striving_families/min15.total_pop)/uk.striving_families",
                                        "uk.total_pop*(100*min15.poorer_pensioners/min15.total_pop)/uk.poorer_pensioners",
                                        "uk.total_pop*(100*min15.young_hardship/min15.total_pop)/uk.young_hardship",
                                        "uk.total_pop*(100*min15.struggling_estates/min15.total_pop)/uk.struggling_estates",
                                        "uk.total_pop*(100*min15.difficult_circumstances/min15.total_pop)/uk.difficult_circumstances",
                                        "uk.total_pop*(100*min15.not_private_households/min15.total_pop)/uk.not_private_households"
                                    ]
                                }
                            }
                        },
                        {
                            "label": "Nearest M&B",
                            "type": "label",
                            "class": "hidden_in_report"
                        },
                        {
                            "type": "orderedList",
                            "title": "Existing",
                            "target_id": "xyz_existing",
                            "level": 2,
                            "display": true,
                            "class": "hidden_in_report",
                            "from": "live.house_list_pipeline a, mb.house_list b",
                            "where": "a.id = $1",
                            "orderby": "ST_DistanceSphere(a.geom_4326, b.geom_4326)",
                            "limit": 10,
                            "columns": [
                                {
                                    "title": "Buncode",
                                    "field": "buncode",
                                    "fieldfx": "b.buncode",
                                    "align": "right"
                                },
                                {
                                    "title": "Name",
                                    "field": "short_name",
                                    "fieldfx": "b.short_name"
                                },
                                {
                                    "title": "Postcode",
                                    "field": "postcode",
                                    "fieldfx": "b.postcode"
                                },
                                {
                                    "title": "AWT",
                                    "headerTooltip": "Average weekly takings",
                                    "field": "aws",
                                    "fieldfx": "b.aws",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "title": "Distance (km)",
                                    "field": "dist",
                                    "fieldfx": "ST_DistanceSphere(a.geom_4326, b.geom_4326) / 1000",
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 1
                                    }
                                }
                            ]
                        },
                        {
                            "type": "orderedList",
                            "title": "Acquisition",
                            "target_id": "xyz_acquisition",
                            "level": 2,
                            "display": true,
                            "class": "hidden_in_report",
                            "from": "live.house_list_pipeline a, live.house_list_pipeline b",
                            "where": "a.id = $1 AND a.id <> b.id",
                            "orderby": "ST_DistanceSphere(a.geom_4326, b.geom_4326)",
                            "limit": 3,
                            "columns": [
                                {
                                    "title": "ID",
                                    "field": "id",
                                    "fieldfx": "b.id",
                                    "align": "right"
                                },
                                {
                                    "title": "Buncode",
                                    "field": "buncode",
                                    "fieldfx": "b.buncode",
                                    "align": "right"
                                },
                                {
                                    "title": "Site name",
                                    "field": "short_name",
                                    "fieldfx": "b.short_name"
                                },
                                {
                                    "title": "Postcode",
                                    "field": "postcode",
                                    "fieldfx": "b.postcode"
                                },
                                {
                                    "title": "Distance (km)",
                                    "field": "dist",
                                    "fieldfx": "ST_DistanceSphere(a.geom_4326, b.geom_4326) / 1000",
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 1
                                    }
                                }
                            ]
                        },
                        {
                            "type": "orderedList",
                            "title": "Nearest competitors",
                            "target_id": "xyz_competition",
                            "level": 2,
                            "display": true,
                            "class": "hidden_in_report",
                            "from": "live.house_list_pipeline a, mb.competition b",
                            "where": "a.id = $1",
                            "orderby": "ST_DistanceSphere(a.geom_4326, b.geom_4326)",
                            "limit": 17,
                            "columns": [
                                {
                                    "title": "CGA ID",
                                    "field": "cga_identifier",
                                    "fieldfx": "b.cga_identifier",
                                    "align": "right"
                                },
                                {
                                    "title": "Site name",
                                    "field": "site_name",
                                    "fieldfx": "b.site_name"
                                },
                                {
                                    "title": "Brand",
                                    "field": "brand_name",
                                    "fieldfx": "b.brand_name"
                                },
                                {
                                    "title": "Owner Name",
                                    "field": "owner_name",
                                    "fieldfx": "b.owner_name"
                                },
                                {
                                    "title": "Owner Group",
                                    "field": "owner_group",
                                    "fieldfx": "b.owner_group"
                                },
                                {
                                    "title": "Licence",
                                    "field": "site_licence_name",
                                    "fieldfx": "b.site_licence_name"
                                },
                                {
                                    "title": "Type",
                                    "field": "main_comp_display",
                                    "fieldfx": "b.main_comp_display"
                                },
                                {
                                    "title": "Postcode",
                                    "field": "postcode",
                                    "fieldfx": "b.postcode"
                                },
                                {
                                    "title": "Distance (km)",
                                    "field": "dist",
                                    "fieldfx": "ST_DistanceSphere(a.geom_4326, b.geom_4326) / 1000",
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 1
                                    }
                                }
                            ]
                        },
                        {
                            "type": "dashboard",
                            "title": "Propensity Index",
                            "level": 2,
                            "display": true,
                            "target_id": "xyz_propensity_index",
                            "class": "hidden_in_report"
                        },
                        {
                            "type": "pgFunction",
                            "dashboard": "Propensity Index",
                            "pgFunction": "model.get_propensity_index_pipeline",
                            "chart": {
                                "title": {
                                    "display": true,
                                    "position": "bottom",
                                    "text": "The MAB propensity score is a measure to indicate what brand is most aligned to the catchment based on population and distance-decay.",
                                    "fontSize": 11,
                                    "fontStyle": "normal"
                                },
                                "layout": {
                                    "padding": {
                                        "left": 50,
                                        "right": 50
                                    }
                                },
                                "hideTicksX": true,
                                "negativeBackgroundColor": "rgba(211, 47, 47, 0.7)",
                                "negativeBorderColor": "#d32f2f",
                                "backgroundColor": "rgba(56, 142, 60, 0.7)",
                                "borderColor": "#388e3c",
                                "offsetX": -100,
                                "datalabels": {
                                    "align": "right",
                                    "anchor": "end"
                                },
                                "width": 800,
                                "height": 500,
                                "type": "horizontalBar",
                                "label": "crmbrandid",
                                "x": "brand",
                                "y": "propensity_index"
                            }
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Market Overview",
                            "level": 2,
                            "display": true,
                            "class": "hidden_in_report",
                            "target_id": "xyz_market_overview",
                            "columns": [
                                {
                                    "type": "integer",
                                    "title": "Competition",
                                    "field": "shoppertown_comp",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "mb.competition",
                                        "geom_a": "geom_4326",
                                        "geom_b": "geom_4326",
                                        "where_a": {
                                            "spatial": {
                                                "table": "geodata.uk_glx_geodata_seamless_shopper_town",
                                                "geom": "geom_4326"
                                            }
                                        }
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "M & B",
                                    "field": "shoppertown_mb",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "mb.competition",
                                        "geom_a": "geom_4326",
                                        "geom_b": "geom_4326",
                                        "where_a": {
                                            "spatial": {
                                                "table": "geodata.uk_glx_geodata_seamless_shopper_town",
                                                "geom": "geom_4326"
                                            }
                                        }
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "Total",
                                    "field": "shoppertown_total",
                                    "lookup": {
                                        "table_a": "live.house_list_pipeline",
                                        "table_b": "mb.competition",
                                        "geom_a": "geom_4326",
                                        "geom_b": "geom_4326",
                                        "where_a": {
                                            "spatial": {
                                                "table": "geodata.uk_glx_geodata_seamless_shopper_town",
                                                "geom": "geom_4326"
                                            }
                                        }
                                    },
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                }
                            ],
                            "rows": [
                                {
                                    "field": "large_pub_group",
                                    "fieldfx": "(SUM(CASE WHEN b.owner_group = 'Large Pub Group' THEN 1 ELSE 0 END))",
                                    "title": "Large Pub Group"
                                },
                                {
                                    "field": "medium_pub_group",
                                    "fieldfx": "(SUM(CASE WHEN b.owner_group = 'Medium Pub Group' THEN 1 ELSE 0 END))",
                                    "title": "Medium Pub Group"
                                },
                                {
                                    "field": "large_restaurant_group",
                                    "fieldfx": "(SUM(CASE WHEN b.owner_group = 'Large Restaurant Group' THEN 1 ELSE 0 END))",
                                    "title": "Large Restaurant Group"
                                },
                                {
                                    "field": "small_restaurant_group",
                                    "fieldfx": "(SUM(CASE WHEN b.owner_group = 'Small Restaurant Group' THEN 1 ELSE 0 END))",
                                    "title": "Small Restaurant Group"
                                },
                                {
                                    "field": "independent",
                                    "fieldfx": "(SUM(CASE WHEN b.owner_group = 'Independent' THEN 1 ELSE 0 END))",
                                    "title": "Independent"
                                },
                                {
                                    "field": "total",
                                    "fieldfx": "(SUM(CASE WHEN b.owner_group in ('Large Pub Group', 'Medium Pub Group', 'Large Restaurant Group', 'Small Restaurant Group', 'Independent') THEN 1 ELSE 0 END))",
                                    "title": "Total"
                                }
                            ]
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Saturation",
                            "pgFunction": "model.get_saturation_index_pipeline",
                            "target_id": "xyz_saturation",
                            "class": "hidden_in_report",
                            "level": 2,
                            "display": true,
                            "columns": [
                                {
                                    "field": "shoptown_pop_per_pub",
                                    "title": "Population per pub",
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "precision": 0
                                    }
                                },
                                {
                                    "field": "uk_pop_per_pub",
                                    "title": "UK Population per pub",
                                    "align": "right",
                                    "formatter": "money",
                                    "formatterParams": {
                                        "decimal": ".",
                                        "thousand": ",",
                                        "precision": 0
                                    }
                                },
                                {
                                    "field": "saturation_index",
                                    "title": "Headroom Index",
                                    "align": "right",
                                    "type": "integer",
                                    "formatter": "progress",
                                    "formatterParams": {
                                        "strokeColor": [
                                            "rgba(211, 47, 47, 0.7)",
                                            "rgba(56, 142, 60, 0.7)"
                                        ],
                                        "legend": true,
                                        "legendAlign": "right",
                                        "max": 200
                                    }
                                }
                            ]
                        },
                        {
                            "label": "Images",
                            "field": "images",
                            "type": "images",
                            "edit": true,
                            "class": "hidden_in_report"
                        },
                        {
                            "field": "edited",
                            "label": "Created on",
                            "type": "datetime",
                            "class": "hidden_in_report"
                        }
                    ],
                    "style": {
                        "marker": {
                            "type": "target",
                            "fillColor": "#9A031E",
                            "layers": {
                                "0.75": "#EEE",
                                "0.50": "#9A031E"
                            }
                        },
                        "markerMulti": {
                            "type": "target",
                            "fillColor": "#9A031E",
                            "layers": {
                                "0.75": "#EEE",
                                "0.50": "#9A031E"
                            }
                        },
                        "themes": {
                            "Review Stage": {
                                "type": "categorized",
                                "field": "review_stage",
                                "cat": {
                                    "Lead": {
                                        "style": {
                                            "fillColor": "#3498DB",
                                            "layers": {
                                                "0.6": "#ffffff",
                                                "0.3": "#3498DB"
                                            }
                                        }
                                    },
                                    "Sep Issued": {
                                        "style": {
                                            "fillColor": "#1ABC9C",
                                            "layers": {
                                                "0.6": "#ffffff",
                                                "0.3": "#1ABC9C"
                                            }
                                        }
                                    },
                                    "Endorsed by DD": {
                                        "style": {
                                            "fillColor": "#AF7AC5",
                                            "layers": {
                                                "0.6": "#ffffff",
                                                "0.3": "#AF7AC5"
                                            }
                                        }
                                    },
                                    "PDC Approved": {
                                        "style": {
                                            "fillColor": "#BDC3C7",
                                            "layers": {
                                                "0.6": "#ffffff",
                                                "0.3": "#BDC3C7"
                                            }
                                        }
                                    },
                                    "Open Trading": {
                                        "style": {
                                            "fillColor": "#2ECC71",
                                            "layers": {
                                                "0.6": "#ffffff",
                                                "0.3": "#2ECC71"
                                            }
                                        }
                                    },
                                    "Rejected": {
                                        "style": {
                                            "fillColor": "#E74C3C",
                                            "layers": {
                                                "0.6": "#ffffff",
                                                "0.3": "#E74C3C"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "roles": {
                        "sites3_visible": null,
                        "Super": null
                    }
                },
                "Ember": {
                    "group": "Network Blueprint",
                    "format": "cluster",
                    "dbs": "MB",
                    "table": "mb.uk_mb_restrict_network_blueprint_ember",
                    "geom": "geom_p_4326",
                    "srid": "4326",
                    "qID": "id",
                    "cluster_label": "name",
                    "cluster_kmeans": 0.01,
                    "markerMin": 6,
                    "markerMax": 20,
                    "hover": {
                        "field": "name"
                    },
                    "roles": {
                        "Standard": null,
                        "Super": null
                    },
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "field": "name",
                            "label": "Name",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "opportunity_type",
                            "label": "Opportunity Type",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "sales",
                            "label": "Sales",
                            "type": "integer",
                            "prefix": "£",
                            "filter": "numeric"
                        },
                        {
                            "field": "selected",
                            "label": "Rank",
                            "type": "integer",
                            "filter": "numeric"
                        }
                    ],
                    "style": {
                        "label": {
                            "field": "name",
                            "display": false,
                            "declutter": true,
                            "strokeColor": "#ffffff",
                            "strokeWidth": 3
                        },
                        "marker": {
                            "type": "square",
                            "fillColor": "#000000",
                            "layers": {
                                "0.6": "#ffffff",
                                "0.3": "#000000"
                            }
                        },
                        "markerMulti": {
                            "type": "square",
                            "fillColor": "#000000",
                            "layers": {
                                "0.6": "#ffffff",
                                "0.3": "#000000"
                            }
                        },
                        "themes": {
                            "Opportunity Type": {
                                "type": "categorized",
                                "field": "opportunity_type",
                                "cat": {
                                    "Blueprint": {
                                        "style": {
                                            "fillColor": "#000000",
                                            "layers": {
                                                "0.6": "#ffffff",
                                                "0.3": "#000000"
                                            }
                                        }
                                    },
                                    "Marginal": {
                                        "style": {
                                            "fillColor": "#a0a0a0",
                                            "layers": {
                                                "0.6": "#ffffff",
                                                "0.3": "#a0a0a0"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "Miller & Carter": {
                    "group": "Network Blueprint",
                    "format": "cluster",
                    "dbs": "MB",
                    "table": "mb.uk_mb_restrict_network_blueprint_m_c",
                    "geom": "geom_p_4326",
                    "qID": "id",
                    "cluster_label": "name",
                    "cluster_kmeans": 0.01,
                    "markerMin": 6,
                    "markerMax": 20,
                    "hover": {
                        "field": "name"
                    },
                    "roles": {
                        "Standard": null,
                        "Super": null
                    },
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "field": "name",
                            "label": "Name",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "opportunity_type",
                            "label": "Opportunity Type",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "sales",
                            "label": "Sales",
                            "type": "integer",
                            "prefix": "£",
                            "filter": "numeric"
                        },
                        {
                            "field": "selected",
                            "label": "Rank",
                            "type": "integer",
                            "filter": "numeric"
                        }
                    ],
                    "style": {
                        "label": {
                            "field": "name",
                            "display": false,
                            "declutter": true,
                            "strokeColor": "#ffffff",
                            "strokeWidth": 3
                        },
                        "marker": {
                            "type": "square",
                            "fillColor": "#2171b5",
                            "layers": {
                                "0.6": "#ffffff",
                                "0.3": "#2171b5"
                            }
                        },
                        "markerMulti": {
                            "type": "square",
                            "fillColor": "#2171b5",
                            "layers": {
                                "0.6": "#ffffff",
                                "0.3": "#2171b5"
                            }
                        },
                        "themes": {
                            "Opportunity Type": {
                                "type": "categorized",
                                "field": "opportunity_type",
                                "cat": {
                                    "Blueprint": {
                                        "style": {
                                            "fillColor": "#2171b5",
                                            "layers": {
                                                "0.6": "#ffffff",
                                                "0.3": "#2171b5"
                                            }
                                        }
                                    },
                                    "Marginal": {
                                        "style": {
                                            "fillColor": "#9ecae1",
                                            "layers": {
                                                "0.6": "#ffffff",
                                                "0.3": "#9ecae1"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "PCDG": {
                    "group": "Network Blueprint",
                    "format": "cluster",
                    "dbs": "MB",
                    "table": "mb.uk_mb_restrict_network_blueprint_pcp",
                    "geom": "geom_p_4326",
                    "qID": "id",
                    "cluster_label": "name",
                    "cluster_kmeans": 0.01,
                    "markerMin": 6,
                    "markerMax": 20,
                    "hover": {
                        "field": "name"
                    },
                    "roles": {
                        "Standard": null,
                        "Super": null
                    },
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "field": "name",
                            "label": "Name",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "opportunity_type",
                            "label": "Opportunity Type",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "sales",
                            "label": "Sales",
                            "type": "integer",
                            "prefix": "£",
                            "filter": "numeric"
                        },
                        {
                            "field": "selected",
                            "label": "Rank",
                            "type": "integer",
                            "filter": "numeric"
                        }
                    ],
                    "style": {
                        "label": {
                            "field": "name",
                            "display": false,
                            "declutter": true,
                            "strokeColor": "#ffffff",
                            "strokeWidth": 3
                        },
                        "marker": {
                            "type": "square",
                            "fillColor": "#005a32",
                            "layers": {
                                "0.6": "#ffffff",
                                "0.3": "#005a32"
                            }
                        },
                        "markerMulti": {
                            "type": "square",
                            "fillColor": "#005a32",
                            "layers": {
                                "0.6": "#ffffff",
                                "0.3": "#005a32"
                            }
                        },
                        "themes": {
                            "Opportunity Type": {
                                "type": "categorized",
                                "field": "opportunity_type",
                                "cat": {
                                    "Blueprint": {
                                        "style": {
                                            "fillColor": "#005a32",
                                            "layers": {
                                                "0.6": "#ffffff",
                                                "0.3": "#005a32"
                                            }
                                        }
                                    },
                                    "Marginal": {
                                        "style": {
                                            "fillColor": "#a1d99b",
                                            "layers": {
                                                "0.6": "#ffffff",
                                                "0.3": "#a1d99b"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "Toby Carvery": {
                    "group": "Network Blueprint",
                    "format": "cluster",
                    "dbs": "MB",
                    "table": "mb.uk_mb_restrict_network_blueprint_toby",
                    "geom": "geom_p_4326",
                    "qID": "id",
                    "cluster_label": "name",
                    "cluster_kmeans": 0.01,
                    "markerMin": 6,
                    "markerMax": 20,
                    "hover": {
                        "field": "name"
                    },
                    "roles": {
                        "Standard": null,
                        "Super": null
                    },
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "field": "name",
                            "label": "Name",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "opportunity_type",
                            "label": "Opportunity Type",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "sales",
                            "label": "Sales",
                            "type": "integer",
                            "prefix": "£",
                            "filter": "numeric"
                        },
                        {
                            "field": "selected",
                            "label": "Rank",
                            "type": "integer",
                            "filter": "numeric"
                        }
                    ],
                    "style": {
                        "label": {
                            "field": "name",
                            "display": false,
                            "declutter": true,
                            "strokeColor": "#ffffff",
                            "strokeWidth": 3
                        },
                        "marker": {
                            "type": "square",
                            "fillColor": "#91003f",
                            "layers": {
                                "0.6": "#ffffff",
                                "0.3": "#91003f"
                            }
                        },
                        "markerMulti": {
                            "type": "square",
                            "fillColor": "#91003f",
                            "layers": {
                                "0.6": "#ffffff",
                                "0.3": "#91003f"
                            }
                        },
                        "themes": {
                            "Opportunity Type": {
                                "type": "categorized",
                                "field": "opportunity_type",
                                "cat": {
                                    "Blueprint": {
                                        "style": {
                                            "fillColor": "#91003f",
                                            "layers": {
                                                "0.6": "#ffffff",
                                                "0.3": "#91003f"
                                            }
                                        }
                                    },
                                    "Marginal": {
                                        "style": {
                                            "fillColor": "#c994c7",
                                            "layers": {
                                                "0.6": "#ffffff",
                                                "0.3": "#c994c7"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "Vintage Inns": {
                    "group": "Network Blueprint",
                    "format": "cluster",
                    "dbs": "MB",
                    "table": "mb.uk_mb_restrict_network_blueprint_vintage",
                    "geom": "geom_p_4326",
                    "qID": "id",
                    "cluster_label": "name",
                    "cluster_kmeans": 0.01,
                    "markerMin": 6,
                    "markerMax": 20,
                    "hover": {
                        "field": "name"
                    },
                    "roles": {
                        "Standard": null,
                        "Super": null
                    },
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "field": "name",
                            "label": "Name",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "opportunity_type",
                            "label": "Opportunity Type",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "field": "sales",
                            "label": "Sales",
                            "type": "integer",
                            "prefix": "£",
                            "filter": "numeric"
                        },
                        {
                            "field": "selected",
                            "label": "Rank",
                            "type": "integer",
                            "filter": "numeric"
                        }
                    ],
                    "style": {
                        "label": {
                            "field": "name",
                            "display": false,
                            "declutter": true,
                            "strokeColor": "#ffffff",
                            "strokeWidth": 3
                        },
                        "marker": {
                            "type": "square",
                            "fillColor": "#cc4c02",
                            "layers": {
                                "0.6": "#ffffff",
                                "0.3": "#cc4c02"
                            }
                        },
                        "markerMulti": {
                            "type": "square",
                            "fillColor": "#cc4c02",
                            "layers": {
                                "0.6": "#ffffff",
                                "0.3": "#cc4c02"
                            }
                        },
                        "themes": {
                            "Opportunity Type": {
                                "type": "categorized",
                                "field": "opportunity_type",
                                "cat": {
                                    "Blueprint": {
                                        "style": {
                                            "fillColor": "#cc4c02",
                                            "layers": {
                                                "0.6": "#ffffff",
                                                "0.3": "#cc4c02"
                                            }
                                        }
                                    },
                                    "Marginal": {
                                        "style": {
                                            "fillColor": "#fec44f",
                                            "layers": {
                                                "0.6": "#ffffff",
                                                "0.3": "#fec44f"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}